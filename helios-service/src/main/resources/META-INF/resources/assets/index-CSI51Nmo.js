var Hi=e=>{throw TypeError(e)};var ma=(e,t,r)=>t.has(e)||Hi("Cannot "+r);var b=(e,t,r)=>(ma(e,t,"read from private field"),r?r.call(e):t.get(e)),Z=(e,t,r)=>t.has(e)?Hi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Q=(e,t,r,n)=>(ma(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ue=(e,t,r)=>(ma(e,t,"access private method"),r);var cn=(e,t,r,n)=>({set _(a){Q(e,t,a,r)},get _(){return b(e,t,n)}});import{j as s,c as Jr,a as eu,u as fi,P as at,b as Ie,d as Ot,e as mi,f as Vn,g as os,h as Ss,S as tu,R as su,I as ru,H as nu,T as au,C as iu,i as ou,k as lu,l as cu,m as du,n as uu,V as hu,o as fu,p as mu,q as pu,r as xu,s as gu,t as yu,v as vu,w as bu,x as ju,y as Nu,z as $l,A as wu,B as Su,D as Cu,E as Eu,F as Tu,G as Au,J as Ru,K as _u,O as Ll,L as Ou,M as Dl,N as ku,Q as Fl,U as zl,W as Pu,X as pi}from"./ui-vendor-qKpagzvl.js";import{b as Iu,r as h,R as V,c as $u,a as xi}from"./react-vendor-Bmr21nA4.js";import{c as Ml}from"./chart-vendor-kPNDWyeG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ta={},Vi=Iu;Ta.createRoot=Vi.createRoot,Ta.hydrateRoot=Vi.hydrateRoot;var gr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lu={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ls,hi,Sl,Du=(Sl=class{constructor(){Z(this,ls,Lu);Z(this,hi,!1)}setTimeoutProvider(e){Q(this,ls,e)}setTimeout(e,t){return b(this,ls).setTimeout(e,t)}clearTimeout(e){b(this,ls).clearTimeout(e)}setInterval(e,t){return b(this,ls).setInterval(e,t)}clearInterval(e){b(this,ls).clearInterval(e)}},ls=new WeakMap,hi=new WeakMap,Sl),Rs=new Du;function Fu(e){setTimeout(e,0)}var Qs=typeof window>"u"||"Deno"in globalThis;function st(){}function zu(e,t){return typeof e=="function"?e(t):e}function Aa(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ul(e,t){return Math.max(e+(t||0)-Date.now(),0)}function vs(e,t){return typeof e=="function"?e(t):e}function vt(e,t){return typeof e=="function"?e(t):e}function Gi(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==gi(o,t.options))return!1}else if(!Fr(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Qi(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ws(t.options.mutationKey)!==Ws(i))return!1}else if(!Fr(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function gi(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ws)(e)}function Ws(e){return JSON.stringify(e,(t,r)=>Ra(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Fr(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Fr(e[r],t[r])):!1}var Mu=Object.prototype.hasOwnProperty;function Bl(e,t){if(e===t)return e;const r=Wi(e)&&Wi(t);if(!r&&!(Ra(e)&&Ra(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],p=e[u],x=t[u];if(p===x){l[u]=p,(r?d<a:Mu.call(e,u))&&c++;continue}if(p===null||x===null||typeof p!="object"||typeof x!="object"){l[u]=x;continue}const f=Bl(p,x);l[u]=f,f===p&&c++}return a===o&&c===a?e:l}function Rn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Wi(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ra(e){if(!Ki(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ki(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ki(e){return Object.prototype.toString.call(e)==="[object Object]"}function Uu(e){return new Promise(t=>{Rs.setTimeout(t,e)})}function _a(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Bl(e,t):t}function Bu(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function qu(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var yi=Symbol();function ql(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yi?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Hl(e,t){return typeof e=="function"?e(...t):!!e}var Ps,cs,tr,Cl,Hu=(Cl=class extends gr{constructor(){super();Z(this,Ps);Z(this,cs);Z(this,tr);Q(this,tr,t=>{if(!Qs&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){b(this,cs)||this.setEventListener(b(this,tr))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,cs))==null||t.call(this),Q(this,cs,void 0))}setEventListener(t){var r;Q(this,tr,t),(r=b(this,cs))==null||r.call(this),Q(this,cs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){b(this,Ps)!==t&&(Q(this,Ps,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof b(this,Ps)=="boolean"?b(this,Ps):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ps=new WeakMap,cs=new WeakMap,tr=new WeakMap,Cl),vi=new Hu;function Oa(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var Vu=Fu;function Gu(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Vu;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Be=Gu(),sr,ds,rr,El,Qu=(El=class extends gr{constructor(){super();Z(this,sr,!0);Z(this,ds);Z(this,rr);Q(this,rr,t=>{if(!Qs&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){b(this,ds)||this.setEventListener(b(this,rr))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,ds))==null||t.call(this),Q(this,ds,void 0))}setEventListener(t){var r;Q(this,rr,t),(r=b(this,ds))==null||r.call(this),Q(this,ds,t(this.setOnline.bind(this)))}setOnline(t){b(this,sr)!==t&&(Q(this,sr,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return b(this,sr)}},sr=new WeakMap,ds=new WeakMap,rr=new WeakMap,El),_n=new Qu;function Wu(e){return Math.min(1e3*2**e,3e4)}function Vl(e){return(e??"online")==="online"?_n.isOnline():!0}var ka=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Gl(e){let t=!1,r=0,n;const a=Oa(),i=()=>a.status!=="pending",o=g=>{var m;if(!i()){const v=new ka(g);x(v),(m=e.onCancel)==null||m.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>vi.isFocused()&&(e.networkMode==="always"||_n.isOnline())&&e.canRun(),u=()=>Vl(e.networkMode)&&e.canRun(),p=g=>{i()||(n==null||n(),a.resolve(g))},x=g=>{i()||(n==null||n(),a.reject(g))},f=()=>new Promise(g=>{var m;n=v=>{(i()||d())&&g(v)},(m=e.onPause)==null||m.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(i())return;let g;const m=r===0?e.initialPromise:void 0;try{g=m??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(p).catch(v=>{var k;if(i())return;const j=e.retry??(Qs?0:3),E=e.retryDelay??Wu,A=typeof E=="function"?E(r,v):E,T=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,v);if(t||!T){x(v);return}r++,(k=e.onFail)==null||k.call(e,r,v),Uu(A).then(()=>d()?void 0:f()).then(()=>{t?x(v):y()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),a)}}var Is,Tl,Ql=(Tl=class{constructor(){Z(this,Is)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Aa(this.gcTime)&&Q(this,Is,Rs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qs?1/0:5*60*1e3))}clearGcTimeout(){b(this,Is)&&(Rs.clearTimeout(b(this,Is)),Q(this,Is,void 0))}},Is=new WeakMap,Tl),$s,nr,yt,Ls,Ve,Vr,Ds,Tt,Vt,Al,Ku=(Al=class extends Ql{constructor(t){super();Z(this,Tt);Z(this,$s);Z(this,nr);Z(this,yt);Z(this,Ls);Z(this,Ve);Z(this,Vr);Z(this,Ds);Q(this,Ds,!1),Q(this,Vr,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,Ls,t.client),Q(this,yt,b(this,Ls).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,$s,Yi(this.options)),this.state=t.state??b(this,$s),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=b(this,Ve))==null?void 0:t.promise}setOptions(t){if(this.options={...b(this,Vr),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Yi(this.options);r.data!==void 0&&(this.setState(Ji(r.data,r.dataUpdatedAt)),Q(this,$s,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,yt).remove(this)}setData(t,r){const n=_a(this.state.data,t,this.options);return ue(this,Tt,Vt).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ue(this,Tt,Vt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=b(this,Ve))==null?void 0:n.promise;return(a=b(this,Ve))==null||a.cancel(t),r?r.then(st).catch(st):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,$s))}isActive(){return this.observers.some(t=>vt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>vs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ul(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=b(this,Ve))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=b(this,Ve))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),b(this,yt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(b(this,Ve)&&(b(this,Ds)?b(this,Ve).cancel({revert:!0}):b(this,Ve).cancelRetry()),this.scheduleGc()),b(this,yt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ue(this,Tt,Vt).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,p,x,f,y,g,m,v,j,E;if(this.state.fetchStatus!=="idle"&&((c=b(this,Ve))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(b(this,Ve))return b(this,Ve).continueRetry(),b(this,Ve).promise}if(t&&this.setOptions(t),!this.options.queryFn){const A=this.observers.find(T=>T.options.queryFn);A&&this.setOptions(A.options)}const n=new AbortController,a=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Q(this,Ds,!0),n.signal)})},i=()=>{const A=ql(this.options,r),k=(()=>{const N={client:b(this,Ls),queryKey:this.queryKey,meta:this.meta};return a(N),N})();return Q(this,Ds,!1),this.options.persister?this.options.persister(A,k,this):A(k)},l=(()=>{const A={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:b(this,Ls),state:this.state,fetchFn:i};return a(A),A})();(d=this.options.behavior)==null||d.onFetch(l,this),Q(this,nr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&ue(this,Tt,Vt).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Q(this,Ve,Gl({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:A=>{A instanceof ka&&A.revert&&this.setState({...b(this,nr),fetchStatus:"idle"}),n.abort()},onFail:(A,T)=>{ue(this,Tt,Vt).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{ue(this,Tt,Vt).call(this,{type:"pause"})},onContinue:()=>{ue(this,Tt,Vt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const A=await b(this,Ve).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(f=(x=b(this,yt).config).onSuccess)==null||f.call(x,A,this),(g=(y=b(this,yt).config).onSettled)==null||g.call(y,A,this.state.error,this),A}catch(A){if(A instanceof ka){if(A.silent)return b(this,Ve).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw ue(this,Tt,Vt).call(this,{type:"error",error:A}),(v=(m=b(this,yt).config).onError)==null||v.call(m,A,this),(E=(j=b(this,yt).config).onSettled)==null||E.call(j,this.state.data,A,this),A}finally{this.scheduleGc()}}},$s=new WeakMap,nr=new WeakMap,yt=new WeakMap,Ls=new WeakMap,Ve=new WeakMap,Vr=new WeakMap,Ds=new WeakMap,Tt=new WeakSet,Vt=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wl(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Ji(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,nr,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Be.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),b(this,yt).notify({query:this,type:"updated",action:t})})},Al);function Wl(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vl(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ji(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Yi(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var lt,be,Gr,et,Fs,ar,Gt,us,Qr,ir,or,zs,Ms,hs,lr,Ee,$r,Pa,Ia,$a,La,Da,Fa,za,Kl,Rl,Ju=(Rl=class extends gr{constructor(t,r){super();Z(this,Ee);Z(this,lt);Z(this,be);Z(this,Gr);Z(this,et);Z(this,Fs);Z(this,ar);Z(this,Gt);Z(this,us);Z(this,Qr);Z(this,ir);Z(this,or);Z(this,zs);Z(this,Ms);Z(this,hs);Z(this,lr,new Set);this.options=r,Q(this,lt,t),Q(this,us,null),Q(this,Gt,Oa()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,be).addObserver(this),Xi(b(this,be),this.options)?ue(this,Ee,$r).call(this):this.updateResult(),ue(this,Ee,La).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ma(b(this,be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ma(b(this,be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ue(this,Ee,Da).call(this),ue(this,Ee,Fa).call(this),b(this,be).removeObserver(this)}setOptions(t){const r=this.options,n=b(this,be);if(this.options=b(this,lt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vt(this.options.enabled,b(this,be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ue(this,Ee,za).call(this),b(this,be).setOptions(this.options),r._defaulted&&!Rn(this.options,r)&&b(this,lt).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,be),observer:this});const a=this.hasListeners();a&&Zi(b(this,be),n,this.options,r)&&ue(this,Ee,$r).call(this),this.updateResult(),a&&(b(this,be)!==n||vt(this.options.enabled,b(this,be))!==vt(r.enabled,b(this,be))||vs(this.options.staleTime,b(this,be))!==vs(r.staleTime,b(this,be)))&&ue(this,Ee,Pa).call(this);const i=ue(this,Ee,Ia).call(this);a&&(b(this,be)!==n||vt(this.options.enabled,b(this,be))!==vt(r.enabled,b(this,be))||i!==b(this,hs))&&ue(this,Ee,$a).call(this,i)}getOptimisticResult(t){const r=b(this,lt).getQueryCache().build(b(this,lt),t),n=this.createResult(r,t);return Xu(this,n)&&(Q(this,et,n),Q(this,ar,this.options),Q(this,Fs,b(this,be).state)),n}getCurrentResult(){return b(this,et)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&b(this,Gt).status==="pending"&&b(this,Gt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){b(this,lr).add(t)}getCurrentQuery(){return b(this,be)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=b(this,lt).defaultQueryOptions(t),n=b(this,lt).getQueryCache().build(b(this,lt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ue(this,Ee,$r).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),b(this,et)))}createResult(t,r){var B;const n=b(this,be),a=this.options,i=b(this,et),o=b(this,Fs),l=b(this,ar),d=t!==n?t.state:b(this,Gr),{state:u}=t;let p={...u},x=!1,f;if(r._optimisticResults){const L=this.hasListeners(),F=!L&&Xi(t,r),q=L&&Zi(t,n,r,a);(F||q)&&(p={...p,...Wl(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:y,errorUpdatedAt:g,status:m}=p;f=p.data;let v=!1;if(r.placeholderData!==void 0&&f===void 0&&m==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(L=i.data,v=!0):L=typeof r.placeholderData=="function"?r.placeholderData((B=b(this,or))==null?void 0:B.state.data,b(this,or)):r.placeholderData,L!==void 0&&(m="success",f=_a(i==null?void 0:i.data,L,r),x=!0)}if(r.select&&f!==void 0&&!v)if(i&&f===(o==null?void 0:o.data)&&r.select===b(this,Qr))f=b(this,ir);else try{Q(this,Qr,r.select),f=r.select(f),f=_a(i==null?void 0:i.data,f,r),Q(this,ir,f),Q(this,us,null)}catch(L){Q(this,us,L)}b(this,us)&&(y=b(this,us),f=b(this,ir),g=Date.now(),m="error");const j=p.fetchStatus==="fetching",E=m==="pending",A=m==="error",T=E&&j,k=f!==void 0,R={status:m,fetchStatus:p.fetchStatus,isPending:E,isSuccess:m==="success",isError:A,isInitialLoading:T,isLoading:T,data:f,dataUpdatedAt:p.dataUpdatedAt,error:y,errorUpdatedAt:g,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!E,isLoadingError:A&&!k,isPaused:p.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:A&&k,isStale:bi(t,r),refetch:this.refetch,promise:b(this,Gt),isEnabled:vt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=fe=>{R.status==="error"?fe.reject(R.error):R.data!==void 0&&fe.resolve(R.data)},F=()=>{const fe=Q(this,Gt,R.promise=Oa());L(fe)},q=b(this,Gt);switch(q.status){case"pending":t.queryHash===n.queryHash&&L(q);break;case"fulfilled":(R.status==="error"||R.data!==q.value)&&F();break;case"rejected":(R.status!=="error"||R.error!==q.reason)&&F();break}}return R}updateResult(){const t=b(this,et),r=this.createResult(b(this,be),this.options);if(Q(this,Fs,b(this,be).state),Q(this,ar,this.options),b(this,Fs).data!==void 0&&Q(this,or,b(this,be)),Rn(r,t))return;Q(this,et,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!b(this,lr).size)return!0;const o=new Set(i??b(this,lr));return this.options.throwOnError&&o.add("error"),Object.keys(b(this,et)).some(l=>{const c=l;return b(this,et)[c]!==t[c]&&o.has(c)})};ue(this,Ee,Kl).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ue(this,Ee,La).call(this)}},lt=new WeakMap,be=new WeakMap,Gr=new WeakMap,et=new WeakMap,Fs=new WeakMap,ar=new WeakMap,Gt=new WeakMap,us=new WeakMap,Qr=new WeakMap,ir=new WeakMap,or=new WeakMap,zs=new WeakMap,Ms=new WeakMap,hs=new WeakMap,lr=new WeakMap,Ee=new WeakSet,$r=function(t){ue(this,Ee,za).call(this);let r=b(this,be).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(st)),r},Pa=function(){ue(this,Ee,Da).call(this);const t=vs(this.options.staleTime,b(this,be));if(Qs||b(this,et).isStale||!Aa(t))return;const n=Ul(b(this,et).dataUpdatedAt,t)+1;Q(this,zs,Rs.setTimeout(()=>{b(this,et).isStale||this.updateResult()},n))},Ia=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,be)):this.options.refetchInterval)??!1},$a=function(t){ue(this,Ee,Fa).call(this),Q(this,hs,t),!(Qs||vt(this.options.enabled,b(this,be))===!1||!Aa(b(this,hs))||b(this,hs)===0)&&Q(this,Ms,Rs.setInterval(()=>{(this.options.refetchIntervalInBackground||vi.isFocused())&&ue(this,Ee,$r).call(this)},b(this,hs)))},La=function(){ue(this,Ee,Pa).call(this),ue(this,Ee,$a).call(this,ue(this,Ee,Ia).call(this))},Da=function(){b(this,zs)&&(Rs.clearTimeout(b(this,zs)),Q(this,zs,void 0))},Fa=function(){b(this,Ms)&&(Rs.clearInterval(b(this,Ms)),Q(this,Ms,void 0))},za=function(){const t=b(this,lt).getQueryCache().build(b(this,lt),this.options);if(t===b(this,be))return;const r=b(this,be);Q(this,be,t),Q(this,Gr,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Kl=function(t){Be.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(b(this,et))}),b(this,lt).getQueryCache().notify({query:b(this,be),type:"observerResultsUpdated"})})},Rl);function Yu(e,t){return vt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Xi(e,t){return Yu(e,t)||e.state.data!==void 0&&Ma(e,t,t.refetchOnMount)}function Ma(e,t,r){if(vt(t.enabled,e)!==!1&&vs(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&bi(e,t)}return!1}function Zi(e,t,r,n){return(e!==t||vt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&bi(e,r)}function bi(e,t){return vt(t.enabled,e)!==!1&&e.isStaleByTime(vs(t.staleTime,e))}function Xu(e,t){return!Rn(e.getCurrentResult(),t)}function eo(e){return{onFetch:(t,r)=>{var u,p,x,f,y;const n=t.options,a=(x=(p=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:p.fetchMore)==null?void 0:x.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const m=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=ql(t.options,t.fetchOptions),j=async(E,A,T)=>{if(g)return Promise.reject();if(A==null&&E.pages.length)return Promise.resolve(E);const N=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:A,direction:T?"backward":"forward",meta:t.options.meta};return m(F),F})(),R=await v(N),{maxPages:B}=t.options,L=T?qu:Bu;return{pages:L(E.pages,R,B),pageParams:L(E.pageParams,A,B)}};if(a&&i.length){const E=a==="backward",A=E?Zu:to,T={pages:i,pageParams:o},k=A(n,T);l=await j(T,k,E)}else{const E=e??i.length;do{const A=c===0?o[0]??n.initialPageParam:to(n,l);if(c>0&&A==null)break;l=await j(l,A),c++}while(c<E)}return l};t.options.persister?t.fetchFn=()=>{var g,m;return(m=(g=t.options).persister)==null?void 0:m.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function to(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Zu(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Wr,Lt,tt,Us,Dt,as,_l,eh=(_l=class extends Ql{constructor(t){super();Z(this,Dt);Z(this,Wr);Z(this,Lt);Z(this,tt);Z(this,Us);Q(this,Wr,t.client),this.mutationId=t.mutationId,Q(this,tt,t.mutationCache),Q(this,Lt,[]),this.state=t.state||Jl(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){b(this,Lt).includes(t)||(b(this,Lt).push(t),this.clearGcTimeout(),b(this,tt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,Lt,b(this,Lt).filter(r=>r!==t)),this.scheduleGc(),b(this,tt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){b(this,Lt).length||(this.state.status==="pending"?this.scheduleGc():b(this,tt).remove(this))}continue(){var t;return((t=b(this,Us))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,p,x,f,y,g,m,v,j,E,A,T,k,N,R,B;const r=()=>{ue(this,Dt,as).call(this,{type:"continue"})},n={client:b(this,Wr),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,Us,Gl({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,F)=>{ue(this,Dt,as).call(this,{type:"failed",failureCount:L,error:F})},onPause:()=>{ue(this,Dt,as).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,tt).canRun(this)}));const a=this.state.status==="pending",i=!b(this,Us).canStart();try{if(a)r();else{ue(this,Dt,as).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=b(this,tt).config).onMutate)==null?void 0:l.call(o,t,this,n));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));F!==this.state.context&&ue(this,Dt,as).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const L=await b(this,Us).start();return await((p=(u=b(this,tt).config).onSuccess)==null?void 0:p.call(u,L,t,this.state.context,this,n)),await((f=(x=this.options).onSuccess)==null?void 0:f.call(x,L,t,this.state.context,n)),await((g=(y=b(this,tt).config).onSettled)==null?void 0:g.call(y,L,null,this.state.variables,this.state.context,this,n)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,L,null,t,this.state.context,n)),ue(this,Dt,as).call(this,{type:"success",data:L}),L}catch(L){try{throw await((E=(j=b(this,tt).config).onError)==null?void 0:E.call(j,L,t,this.state.context,this,n)),await((T=(A=this.options).onError)==null?void 0:T.call(A,L,t,this.state.context,n)),await((N=(k=b(this,tt).config).onSettled)==null?void 0:N.call(k,void 0,L,this.state.variables,this.state.context,this,n)),await((B=(R=this.options).onSettled)==null?void 0:B.call(R,void 0,L,t,this.state.context,n)),L}finally{ue(this,Dt,as).call(this,{type:"error",error:L})}}finally{b(this,tt).runNext(this)}}},Wr=new WeakMap,Lt=new WeakMap,tt=new WeakMap,Us=new WeakMap,Dt=new WeakSet,as=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Be.batch(()=>{b(this,Lt).forEach(n=>{n.onMutationUpdate(t)}),b(this,tt).notify({mutation:this,type:"updated",action:t})})},_l);function Jl(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qt,At,Kr,Ol,th=(Ol=class extends gr{constructor(t={}){super();Z(this,Qt);Z(this,At);Z(this,Kr);this.config=t,Q(this,Qt,new Set),Q(this,At,new Map),Q(this,Kr,0)}build(t,r,n){const a=new eh({client:t,mutationCache:this,mutationId:++cn(this,Kr)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){b(this,Qt).add(t);const r=dn(t);if(typeof r=="string"){const n=b(this,At).get(r);n?n.push(t):b(this,At).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(b(this,Qt).delete(t)){const r=dn(t);if(typeof r=="string"){const n=b(this,At).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&b(this,At).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=dn(t);if(typeof r=="string"){const n=b(this,At).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=dn(t);if(typeof r=="string"){const a=(n=b(this,At).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Be.batch(()=>{b(this,Qt).forEach(t=>{this.notify({type:"removed",mutation:t})}),b(this,Qt).clear(),b(this,At).clear()})}getAll(){return Array.from(b(this,Qt))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Qi(r,n))}findAll(t={}){return this.getAll().filter(r=>Qi(t,r))}notify(t){Be.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Be.batch(()=>Promise.all(t.map(r=>r.continue().catch(st))))}},Qt=new WeakMap,At=new WeakMap,Kr=new WeakMap,Ol);function dn(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Wt,fs,ct,Kt,Yt,bn,Ua,kl,sh=(kl=class extends gr{constructor(r,n){super();Z(this,Yt);Z(this,Wt);Z(this,fs);Z(this,ct);Z(this,Kt);Q(this,Wt,r),this.setOptions(n),this.bindMethods(),ue(this,Yt,bn).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=b(this,Wt).defaultMutationOptions(r),Rn(this.options,n)||b(this,Wt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,ct),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ws(n.mutationKey)!==Ws(this.options.mutationKey)?this.reset():((a=b(this,ct))==null?void 0:a.state.status)==="pending"&&b(this,ct).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=b(this,ct))==null||r.removeObserver(this)}onMutationUpdate(r){ue(this,Yt,bn).call(this),ue(this,Yt,Ua).call(this,r)}getCurrentResult(){return b(this,fs)}reset(){var r;(r=b(this,ct))==null||r.removeObserver(this),Q(this,ct,void 0),ue(this,Yt,bn).call(this),ue(this,Yt,Ua).call(this)}mutate(r,n){var a;return Q(this,Kt,n),(a=b(this,ct))==null||a.removeObserver(this),Q(this,ct,b(this,Wt).getMutationCache().build(b(this,Wt),this.options)),b(this,ct).addObserver(this),b(this,ct).execute(r)}},Wt=new WeakMap,fs=new WeakMap,ct=new WeakMap,Kt=new WeakMap,Yt=new WeakSet,bn=function(){var n;const r=((n=b(this,ct))==null?void 0:n.state)??Jl();Q(this,fs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Ua=function(r){Be.batch(()=>{var n,a,i,o,l,c,d,u;if(b(this,Kt)&&this.hasListeners()){const p=b(this,fs).variables,x=b(this,fs).context,f={client:b(this,Wt),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=b(this,Kt)).onSuccess)==null||a.call(n,r.data,p,x,f),(o=(i=b(this,Kt)).onSettled)==null||o.call(i,r.data,null,p,x,f)):(r==null?void 0:r.type)==="error"&&((c=(l=b(this,Kt)).onError)==null||c.call(l,r.error,p,x,f),(u=(d=b(this,Kt)).onSettled)==null||u.call(d,void 0,r.error,p,x,f))}this.listeners.forEach(p=>{p(b(this,fs))})})},kl),Ft,Pl,rh=(Pl=class extends gr{constructor(t={}){super();Z(this,Ft);this.config=t,Q(this,Ft,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??gi(a,r);let o=this.get(i);return o||(o=new Ku({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){b(this,Ft).has(t.queryHash)||(b(this,Ft).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=b(this,Ft).get(t.queryHash);r&&(t.destroy(),r===t&&b(this,Ft).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Be.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return b(this,Ft).get(t)}getAll(){return[...b(this,Ft).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Gi(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Gi(t,n)):r}notify(t){Be.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Be.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Be.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ft=new WeakMap,Pl),Fe,ms,ps,cr,dr,xs,ur,hr,Il,nh=(Il=class{constructor(e={}){Z(this,Fe);Z(this,ms);Z(this,ps);Z(this,cr);Z(this,dr);Z(this,xs);Z(this,ur);Z(this,hr);Q(this,Fe,e.queryCache||new rh),Q(this,ms,e.mutationCache||new th),Q(this,ps,e.defaultOptions||{}),Q(this,cr,new Map),Q(this,dr,new Map),Q(this,xs,0)}mount(){cn(this,xs)._++,b(this,xs)===1&&(Q(this,ur,vi.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Fe).onFocus())})),Q(this,hr,_n.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Fe).onOnline())})))}unmount(){var e,t;cn(this,xs)._--,b(this,xs)===0&&((e=b(this,ur))==null||e.call(this),Q(this,ur,void 0),(t=b(this,hr))==null||t.call(this),Q(this,hr,void 0))}isFetching(e){return b(this,Fe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return b(this,ms).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=b(this,Fe).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=b(this,Fe).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(vs(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return b(this,Fe).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=b(this,Fe).get(n.queryHash),i=a==null?void 0:a.state.data,o=zu(t,i);if(o!==void 0)return b(this,Fe).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Be.batch(()=>b(this,Fe).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=b(this,Fe).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=b(this,Fe);Be.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=b(this,Fe);return Be.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Be.batch(()=>b(this,Fe).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(st).catch(st)}invalidateQueries(e,t={}){return Be.batch(()=>(b(this,Fe).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Be.batch(()=>b(this,Fe).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(st)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(st)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=b(this,Fe).build(this,t);return r.isStaleByTime(vs(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(st).catch(st)}fetchInfiniteQuery(e){return e.behavior=eo(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(st).catch(st)}ensureInfiniteQueryData(e){return e.behavior=eo(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _n.isOnline()?b(this,ms).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,Fe)}getMutationCache(){return b(this,ms)}getDefaultOptions(){return b(this,ps)}setDefaultOptions(e){Q(this,ps,e)}setQueryDefaults(e,t){b(this,cr).set(Ws(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...b(this,cr).values()],r={};return t.forEach(n=>{Fr(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){b(this,dr).set(Ws(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...b(this,dr).values()],r={};return t.forEach(n=>{Fr(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...b(this,ps).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gi(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yi&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...b(this,ps).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){b(this,Fe).clear(),b(this,ms).clear()}},Fe=new WeakMap,ms=new WeakMap,ps=new WeakMap,cr=new WeakMap,dr=new WeakMap,xs=new WeakMap,ur=new WeakMap,hr=new WeakMap,Il),Yl=h.createContext(void 0),Gn=e=>{const t=h.useContext(Yl);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ah=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Yl.Provider,{value:e,children:t})),Xl=h.createContext(!1),ih=()=>h.useContext(Xl);Xl.Provider;function oh(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var lh=h.createContext(oh()),ch=()=>h.useContext(lh),dh=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},uh=e=>{h.useEffect(()=>{e.clearReset()},[e])},hh=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Hl(r,[e.error,n])),fh=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},mh=(e,t)=>e.isLoading&&e.isFetching&&!t,ph=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,so=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function xh(e,t,r){var p,x,f,y,g;const n=ih(),a=ch(),i=Gn(),o=i.defaultQueryOptions(e);(x=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||x.call(p,o),o._optimisticResults=n?"isRestoring":"optimistic",fh(o),dh(o,a),uh(a);const l=!i.getQueryCache().get(o.queryHash),[c]=h.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(m=>{const v=u?c.subscribe(Be.batchCalls(m)):st;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(o)},[o,c]),ph(o,d))throw so(o,c,a);if(hh({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((y=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||y.call(f,o,d),o.experimental_prefetchInRender&&!Qs&&mh(d,n)){const m=l?so(o,c,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;m==null||m.catch(st).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function gh(e,t){return xh(e,Ju)}function zr(e,t){const r=Gn(),[n]=h.useState(()=>new sh(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(Be.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(st)},[n]);if(a.error&&Hl(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var yh=e=>{switch(e){case"success":return jh;case"info":return wh;case"warning":return Nh;case"error":return Sh;default:return null}},vh=Array(12).fill(0),bh=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},vh.map((r,n)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),jh=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Nh=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wh=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sh=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ch=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Eh=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Ba=1,Th=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ba++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],V.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(Rh(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Ba++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},dt=new Th,Ah=(e,t)=>{let r=(t==null?void 0:t.id)||Ba++;return dt.addToast({title:e,...t,id:r}),r},Rh=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",_h=Ah,Oh=()=>dt.toasts,kh=()=>dt.getActiveToasts(),ee=Object.assign(_h,{success:dt.success,info:dt.info,warning:dt.warning,error:dt.error,custom:dt.custom,message:dt.message,promise:dt.promise,dismiss:dt.dismiss,loading:dt.loading},{getHistory:Oh,getToasts:kh});function Ph(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Ph(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function un(e){return e.label!==void 0}var Ih=3,$h="32px",Lh="16px",ro=4e3,Dh=356,Fh=14,zh=20,Mh=200;function Et(...e){return e.filter(Boolean).join(" ")}function Uh(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var Bh=e=>{var t,r,n,a,i,o,l,c,d,u,p;let{invert:x,toast:f,unstyled:y,interacting:g,setHeights:m,visibleToasts:v,heights:j,index:E,toasts:A,expanded:T,removeToast:k,defaultRichColors:N,closeButton:R,style:B,cancelButtonStyle:L,actionButtonStyle:F,className:q="",descriptionClassName:fe="",duration:oe,position:je,gap:Y,loadingIcon:ye,expandByDefault:ve,classNames:S,icons:w,closeButtonAriaLabel:P="Close toast",pauseWhenPageIsHidden:I}=e,[D,z]=V.useState(null),[H,$]=V.useState(null),[M,G]=V.useState(!1),[te,se]=V.useState(!1),[U,ae]=V.useState(!1),[ge,De]=V.useState(!1),[O,X]=V.useState(!1),[Te,_e]=V.useState(0),[jt,es]=V.useState(0),gt=V.useRef(f.duration||oe||ro),an=V.useRef(null),Pt=V.useRef(null),ha=E===0,fa=E+1<=v,Xe=f.type,Ut=f.dismissible!==!1,on=f.className||"",ln=f.descriptionClassName||"",Bt=V.useMemo(()=>j.findIndex(re=>re.toastId===f.id)||0,[j,f.id]),C=V.useMemo(()=>{var re;return(re=f.closeButton)!=null?re:R},[f.closeButton,R]),J=V.useMemo(()=>f.duration||oe||ro,[f.duration,oe]),ne=V.useRef(0),K=V.useRef(0),it=V.useRef(0),Ze=V.useRef(null),[Nt,Cs]=je.split("-"),Pe=V.useMemo(()=>j.reduce((re,de,Ae)=>Ae>=Bt?re:re+de.height,0),[j,Bt]),ot=Eh(),qt=f.invert||x,He=Xe==="loading";K.current=V.useMemo(()=>Bt*Y+Pe,[Bt,Pe]),V.useEffect(()=>{gt.current=J},[J]),V.useEffect(()=>{G(!0)},[]),V.useEffect(()=>{let re=Pt.current;if(re){let de=re.getBoundingClientRect().height;return es(de),m(Ae=>[{toastId:f.id,height:de,position:f.position},...Ae]),()=>m(Ae=>Ae.filter(wt=>wt.toastId!==f.id))}},[m,f.id]),V.useLayoutEffect(()=>{if(!M)return;let re=Pt.current,de=re.style.height;re.style.height="auto";let Ae=re.getBoundingClientRect().height;re.style.height=de,es(Ae),m(wt=>wt.find(St=>St.toastId===f.id)?wt.map(St=>St.toastId===f.id?{...St,height:Ae}:St):[{toastId:f.id,height:Ae,position:f.position},...wt])},[M,f.title,f.description,m,f.id]);let we=V.useCallback(()=>{se(!0),_e(K.current),m(re=>re.filter(de=>de.toastId!==f.id)),setTimeout(()=>{k(f)},Mh)},[f,k,m,K]);V.useEffect(()=>{if(f.promise&&Xe==="loading"||f.duration===1/0||f.type==="loading")return;let re;return T||g||I&&ot?(()=>{if(it.current<ne.current){let de=new Date().getTime()-ne.current;gt.current=gt.current-de}it.current=new Date().getTime()})():gt.current!==1/0&&(ne.current=new Date().getTime(),re=setTimeout(()=>{var de;(de=f.onAutoClose)==null||de.call(f,f),we()},gt.current)),()=>clearTimeout(re)},[T,g,f,Xe,I,ot,we]),V.useEffect(()=>{f.delete&&we()},[we,f.delete]);function It(){var re,de,Ae;return w!=null&&w.loading?V.createElement("div",{className:Et(S==null?void 0:S.loader,(re=f==null?void 0:f.classNames)==null?void 0:re.loader,"sonner-loader"),"data-visible":Xe==="loading"},w.loading):ye?V.createElement("div",{className:Et(S==null?void 0:S.loader,(de=f==null?void 0:f.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Xe==="loading"},ye):V.createElement(bh,{className:Et(S==null?void 0:S.loader,(Ae=f==null?void 0:f.classNames)==null?void 0:Ae.loader),visible:Xe==="loading"})}return V.createElement("li",{tabIndex:0,ref:Pt,className:Et(q,on,S==null?void 0:S.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,S==null?void 0:S.default,S==null?void 0:S[Xe],(r=f==null?void 0:f.classNames)==null?void 0:r[Xe]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:N,"data-styled":!(f.jsx||f.unstyled||y),"data-mounted":M,"data-promise":!!f.promise,"data-swiped":O,"data-removed":te,"data-visible":fa,"data-y-position":Nt,"data-x-position":Cs,"data-index":E,"data-front":ha,"data-swiping":U,"data-dismissible":Ut,"data-type":Xe,"data-invert":qt,"data-swipe-out":ge,"data-swipe-direction":H,"data-expanded":!!(T||ve&&M),style:{"--index":E,"--toasts-before":E,"--z-index":A.length-E,"--offset":`${te?Te:K.current}px`,"--initial-height":ve?"auto":`${jt}px`,...B,...f.style},onDragEnd:()=>{ae(!1),z(null),Ze.current=null},onPointerDown:re=>{He||!Ut||(an.current=new Date,_e(K.current),re.target.setPointerCapture(re.pointerId),re.target.tagName!=="BUTTON"&&(ae(!0),Ze.current={x:re.clientX,y:re.clientY}))},onPointerUp:()=>{var re,de,Ae,wt;if(ge||!Ut)return;Ze.current=null;let St=Number(((re=Pt.current)==null?void 0:re.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ts=Number(((de=Pt.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Es=new Date().getTime()-((Ae=an.current)==null?void 0:Ae.getTime()),Ct=D==="x"?St:ts,ss=Math.abs(Ct)/Es;if(Math.abs(Ct)>=zh||ss>.11){_e(K.current),(wt=f.onDismiss)==null||wt.call(f,f),$(D==="x"?St>0?"right":"left":ts>0?"down":"up"),we(),De(!0),X(!1);return}ae(!1),z(null)},onPointerMove:re=>{var de,Ae,wt,St;if(!Ze.current||!Ut||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;let ts=re.clientY-Ze.current.y,Es=re.clientX-Ze.current.x,Ct=(Ae=e.swipeDirections)!=null?Ae:Uh(je);!D&&(Math.abs(Es)>1||Math.abs(ts)>1)&&z(Math.abs(Es)>Math.abs(ts)?"x":"y");let ss={x:0,y:0};D==="y"?(Ct.includes("top")||Ct.includes("bottom"))&&(Ct.includes("top")&&ts<0||Ct.includes("bottom")&&ts>0)&&(ss.y=ts):D==="x"&&(Ct.includes("left")||Ct.includes("right"))&&(Ct.includes("left")&&Es<0||Ct.includes("right")&&Es>0)&&(ss.x=Es),(Math.abs(ss.x)>0||Math.abs(ss.y)>0)&&X(!0),(wt=Pt.current)==null||wt.style.setProperty("--swipe-amount-x",`${ss.x}px`),(St=Pt.current)==null||St.style.setProperty("--swipe-amount-y",`${ss.y}px`)}},C&&!f.jsx?V.createElement("button",{"aria-label":P,"data-disabled":He,"data-close-button":!0,onClick:He||!Ut?()=>{}:()=>{var re;we(),(re=f.onDismiss)==null||re.call(f,f)},className:Et(S==null?void 0:S.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=w==null?void 0:w.close)!=null?i:Ch):null,f.jsx||h.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:V.createElement(V.Fragment,null,Xe||f.icon||f.promise?V.createElement("div",{"data-icon":"",className:Et(S==null?void 0:S.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||It():null,f.type!=="loading"?f.icon||(w==null?void 0:w[Xe])||yh(Xe):null):null,V.createElement("div",{"data-content":"",className:Et(S==null?void 0:S.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:Et(S==null?void 0:S.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?V.createElement("div",{"data-description":"",className:Et(fe,ln,S==null?void 0:S.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),h.isValidElement(f.cancel)?f.cancel:f.cancel&&un(f.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||L,onClick:re=>{var de,Ae;un(f.cancel)&&Ut&&((Ae=(de=f.cancel).onClick)==null||Ae.call(de,re),we())},className:Et(S==null?void 0:S.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,h.isValidElement(f.action)?f.action:f.action&&un(f.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||F,onClick:re=>{var de,Ae;un(f.action)&&((Ae=(de=f.action).onClick)==null||Ae.call(de,re),!re.defaultPrevented&&we())},className:Et(S==null?void 0:S.actionButton,(p=f==null?void 0:f.classNames)==null?void 0:p.actionButton)},f.action.label):null))};function no(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function qh(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?Lh:$h;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var Hh=h.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:p,duration:x,style:f,visibleToasts:y=Ih,toastOptions:g,dir:m=no(),gap:v=Fh,loadingIcon:j,icons:E,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:T}=e,[k,N]=V.useState([]),R=V.useMemo(()=>Array.from(new Set([n].concat(k.filter(I=>I.position).map(I=>I.position)))),[k,n]),[B,L]=V.useState([]),[F,q]=V.useState(!1),[fe,oe]=V.useState(!1),[je,Y]=V.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ye=V.useRef(null),ve=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=V.useRef(null),w=V.useRef(!1),P=V.useCallback(I=>{N(D=>{var z;return(z=D.find(H=>H.id===I.id))!=null&&z.delete||dt.dismiss(I.id),D.filter(({id:H})=>H!==I.id)})},[]);return V.useEffect(()=>dt.subscribe(I=>{if(I.dismiss){N(D=>D.map(z=>z.id===I.id?{...z,delete:!0}:z));return}setTimeout(()=>{$u.flushSync(()=>{N(D=>{let z=D.findIndex(H=>H.id===I.id);return z!==-1?[...D.slice(0,z),{...D[z],...I},...D.slice(z+1)]:[I,...D]})})})}),[]),V.useEffect(()=>{if(u!=="system"){Y(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:D})=>{Y(D?"dark":"light")})}catch{I.addListener(({matches:z})=>{try{Y(z?"dark":"light")}catch(H){console.error(H)}})}},[u]),V.useEffect(()=>{k.length<=1&&q(!1)},[k]),V.useEffect(()=>{let I=D=>{var z,H;a.every($=>D[$]||D.code===$)&&(q(!0),(z=ye.current)==null||z.focus()),D.code==="Escape"&&(document.activeElement===ye.current||(H=ye.current)!=null&&H.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[a]),V.useEffect(()=>{if(ye.current)return()=>{S.current&&(S.current.focus({preventScroll:!0}),S.current=null,w.current=!1)}},[ye.current]),V.createElement("section",{ref:t,"aria-label":`${A} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((I,D)=>{var z;let[H,$]=I.split("-");return k.length?V.createElement("ol",{key:I,dir:m==="auto"?no():m,tabIndex:-1,ref:ye,className:l,"data-sonner-toaster":!0,"data-theme":je,"data-y-position":H,"data-lifted":F&&k.length>1&&!i,"data-x-position":$,style:{"--front-toast-height":`${((z=B[0])==null?void 0:z.height)||0}px`,"--width":`${Dh}px`,"--gap":`${v}px`,...f,...qh(c,d)},onBlur:M=>{w.current&&!M.currentTarget.contains(M.relatedTarget)&&(w.current=!1,S.current&&(S.current.focus({preventScroll:!0}),S.current=null))},onFocus:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||w.current||(w.current=!0,S.current=M.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{fe||q(!1)},onDragEnd:()=>q(!1),onPointerDown:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},k.filter(M=>!M.position&&D===0||M.position===I).map((M,G)=>{var te,se;return V.createElement(Bh,{key:M.id,icons:E,index:G,toast:M,defaultRichColors:p,duration:(te=g==null?void 0:g.duration)!=null?te:x,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:y,closeButton:(se=g==null?void 0:g.closeButton)!=null?se:o,interacting:fe,position:I,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:P,toasts:k.filter(U=>U.position==M.position),heights:B.filter(U=>U.position==M.position),setHeights:L,expandByDefault:i,gap:v,loadingIcon:j,expanded:F,pauseWhenPageIsHidden:T,swipeDirections:e.swipeDirections})})):null}))}),pa="rovingFocusGroup.onEntryFocus",Vh={bubbles:!1,cancelable:!0},Yr="RovingFocusGroup",[qa,Zl,Gh]=eu(Yr),[Qh,ec]=Jr(Yr,[Gh]),[Wh,Kh]=Qh(Yr),tc=h.forwardRef((e,t)=>s.jsx(qa.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(qa.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Jh,{...e,ref:t})})}));tc.displayName=Yr;var Jh=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...p}=e,x=h.useRef(null),f=Ot(t,x),y=mi(i),[g,m]=Vn({prop:o,defaultProp:l??null,onChange:c,caller:Yr}),[v,j]=h.useState(!1),E=os(d),A=Zl(r),T=h.useRef(!1),[k,N]=h.useState(0);return h.useEffect(()=>{const R=x.current;if(R)return R.addEventListener(pa,E),()=>R.removeEventListener(pa,E)},[E]),s.jsx(Wh,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(R=>m(R),[m]),onItemShiftTab:h.useCallback(()=>j(!0),[]),onFocusableItemAdd:h.useCallback(()=>N(R=>R+1),[]),onFocusableItemRemove:h.useCallback(()=>N(R=>R-1),[]),children:s.jsx(at.div,{tabIndex:v||k===0?-1:0,"data-orientation":n,...p,ref:f,style:{outline:"none",...e.style},onMouseDown:Ie(e.onMouseDown,()=>{T.current=!0}),onFocus:Ie(e.onFocus,R=>{const B=!T.current;if(R.target===R.currentTarget&&B&&!v){const L=new CustomEvent(pa,Vh);if(R.currentTarget.dispatchEvent(L),!L.defaultPrevented){const F=A().filter(Y=>Y.focusable),q=F.find(Y=>Y.active),fe=F.find(Y=>Y.id===g),je=[q,fe,...F].filter(Boolean).map(Y=>Y.ref.current);nc(je,u)}}T.current=!1}),onBlur:Ie(e.onBlur,()=>j(!1))})})}),sc="RovingFocusGroupItem",rc=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=fi(),d=i||c,u=Kh(sc,r),p=u.currentTabStopId===d,x=Zl(r),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:g}=u;return h.useEffect(()=>{if(n)return f(),()=>y()},[n,f,y]),s.jsx(qa.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(at.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Ie(e.onMouseDown,m=>{n?u.onItemFocus(d):m.preventDefault()}),onFocus:Ie(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Ie(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const v=Zh(m,u.orientation,u.dir);if(v!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let E=x().filter(A=>A.focusable).map(A=>A.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const A=E.indexOf(m.currentTarget);E=u.loop?ef(E,A+1):E.slice(A+1)}setTimeout(()=>nc(E))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:g!=null}):o})})});rc.displayName=sc;var Yh={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xh(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Zh(e,t,r){const n=Xh(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Yh[n]}function nc(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function ef(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var tf=tc,sf=rc,Qn="Tabs",[rf]=Jr(Qn,[ec]),ac=ec(),[nf,ji]=rf(Qn),ic=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=mi(l),[p,x]=Vn({prop:n,onChange:a,defaultProp:i??"",caller:Qn});return s.jsx(nf,{scope:r,baseId:fi(),value:p,onValueChange:x,orientation:o,dir:u,activationMode:c,children:s.jsx(at.div,{dir:u,"data-orientation":o,...d,ref:t})})});ic.displayName=Qn;var oc="TabsList",lc=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=ji(oc,r),o=ac(r);return s.jsx(tf,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(at.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});lc.displayName=oc;var cc="TabsTrigger",dc=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=ji(cc,r),l=ac(r),c=fc(o.baseId,n),d=mc(o.baseId,n),u=n===o.value;return s.jsx(sf,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(at.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ie(e.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?o.onValueChange(n):p.preventDefault()}),onKeyDown:Ie(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(n)}),onFocus:Ie(e.onFocus,()=>{const p=o.activationMode!=="manual";!u&&!a&&p&&o.onValueChange(n)})})})});dc.displayName=cc;var uc="TabsContent",hc=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=ji(uc,r),c=fc(l.baseId,n),d=mc(l.baseId,n),u=n===l.value,p=h.useRef(u);return h.useEffect(()=>{const x=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(x)},[]),s.jsx(Ss,{present:a||u,children:({present:x})=>s.jsx(at.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!x,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:x&&i})})});hc.displayName=uc;function fc(e,t){return`${e}-trigger-${t}`}function mc(e,t){return`${e}-content-${t}`}var af=ic,pc=lc,xc=dc,gc=hc;const Ni="-",of=e=>{const t=cf(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Ni);return l[0]===""&&l.length!==1&&l.shift(),yc(l,t)||lf(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},yc=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?yc(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Ni);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ao=/^\[(.+)\]$/,lf=e=>{if(ao.test(e)){const t=ao.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},cf=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return uf(Object.entries(e.classGroups),r).forEach(([i,o])=>{Ha(o,n,i,t)}),n},Ha=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:io(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(df(a)){Ha(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Ha(o,io(t,i),r,n)})})},io=(e,t)=>{let r=e;return t.split(Ni).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},df=e=>e.isThemeGetter,uf=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,hf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},vc="!",ff=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,p;for(let m=0;m<l.length;m++){let v=l[m];if(d===0){if(v===a&&(n||l.slice(m,m+i)===t)){c.push(l.slice(u,m)),u=m+i;continue}if(v==="/"){p=m;continue}}v==="["?d++:v==="]"&&d--}const x=c.length===0?l:l.substring(u),f=x.startsWith(vc),y=f?x.substring(1):x,g=p&&p>u?p-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},mf=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},pf=e=>({cache:hf(e.cacheSize),parseClassName:ff(e),...of(e)}),xf=/\s+/,gf=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(xf);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:f}=r(d);let y=!!f,g=n(y?x.substring(0,f):x);if(!g){if(!y){l=d+(l.length>0?" "+l:l);continue}if(g=n(x),!g){l=d+(l.length>0?" "+l:l);continue}y=!1}const m=mf(u).join(":"),v=p?m+vc:m,j=v+g;if(i.includes(j))continue;i.push(j);const E=a(g,y);for(let A=0;A<E.length;++A){const T=E[A];i.push(v+T)}l=d+(l.length>0?" "+l:l)}return l};function yf(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=bc(t))&&(n&&(n+=" "),n+=r);return n}const bc=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=bc(e[n]))&&(r&&(r+=" "),r+=t);return r};function vf(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,p)=>p(u),e());return r=pf(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=gf(c,r);return a(c,u),u}return function(){return i(yf.apply(null,arguments))}}const Oe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},jc=/^\[(?:([a-z-]+):)?(.+)\]$/i,bf=/^\d+\/\d+$/,jf=new Set(["px","full","screen"]),Nf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Cf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ef=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ht=e=>Xs(e)||jf.has(e)||bf.test(e),rs=e=>yr(e,"length",If),Xs=e=>!!e&&!Number.isNaN(Number(e)),xa=e=>yr(e,"number",Xs),Ar=e=>!!e&&Number.isInteger(Number(e)),Tf=e=>e.endsWith("%")&&Xs(e.slice(0,-1)),ce=e=>jc.test(e),ns=e=>Nf.test(e),Af=new Set(["length","size","percentage"]),Rf=e=>yr(e,Af,Nc),_f=e=>yr(e,"position",Nc),Of=new Set(["image","url"]),kf=e=>yr(e,Of,Lf),Pf=e=>yr(e,"",$f),Rr=()=>!0,yr=(e,t,r)=>{const n=jc.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},If=e=>wf.test(e)&&!Sf.test(e),Nc=()=>!1,$f=e=>Cf.test(e),Lf=e=>Ef.test(e),Df=()=>{const e=Oe("colors"),t=Oe("spacing"),r=Oe("blur"),n=Oe("brightness"),a=Oe("borderColor"),i=Oe("borderRadius"),o=Oe("borderSpacing"),l=Oe("borderWidth"),c=Oe("contrast"),d=Oe("grayscale"),u=Oe("hueRotate"),p=Oe("invert"),x=Oe("gap"),f=Oe("gradientColorStops"),y=Oe("gradientColorStopPositions"),g=Oe("inset"),m=Oe("margin"),v=Oe("opacity"),j=Oe("padding"),E=Oe("saturate"),A=Oe("scale"),T=Oe("sepia"),k=Oe("skew"),N=Oe("space"),R=Oe("translate"),B=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",ce,t],q=()=>[ce,t],fe=()=>["",Ht,rs],oe=()=>["auto",Xs,ce],je=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",ce],w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>[Xs,ce];return{cacheSize:500,separator:":",theme:{colors:[Rr],spacing:[Ht,rs],blur:["none","",ns,ce],brightness:P(),borderColor:[e],borderRadius:["none","","full",ns,ce],borderSpacing:q(),borderWidth:fe(),contrast:P(),grayscale:S(),hueRotate:P(),invert:S(),gap:q(),gradientColorStops:[e],gradientColorStopPositions:[Tf,rs],inset:F(),margin:F(),opacity:P(),padding:q(),saturate:P(),scale:P(),sepia:S(),skew:P(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",ce]}],container:["container"],columns:[{columns:[ns]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...je(),ce]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ar,ce]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ce]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",Ar,ce]}],"grid-cols":[{"grid-cols":[Rr]}],"col-start-end":[{col:["auto",{span:["full",Ar,ce]},ce]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[Rr]}],"row-start-end":[{row:["auto",{span:[Ar,ce]},ce]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ce]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...ve()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ve(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ve(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ce,t]}],"min-w":[{"min-w":[ce,t,"min","max","fit"]}],"max-w":[{"max-w":[ce,t,"none","full","min","max","fit","prose",{screen:[ns]},ns]}],h:[{h:[ce,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ce,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ce,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ce,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ns,rs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xa]}],"font-family":[{font:[Rr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ce]}],"line-clamp":[{"line-clamp":["none",Xs,xa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ht,ce]}],"list-image":[{"list-image":["none",ce]}],"list-style-type":[{list:["none","disc","decimal",ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ht,rs]}],"underline-offset":[{"underline-offset":["auto",Ht,ce]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...je(),_f]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kf]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ht,ce]}],"outline-w":[{outline:[Ht,rs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ht,rs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ns,Pf]}],"shadow-color":[{shadow:[Rr]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ns,ce]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ce]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",ce]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ar,ce]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ce]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ht,rs,xa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ff=vf(Df);function Se(...e){return Ff(Ml(e))}const Wn=af,Xr=h.forwardRef(({className:e,...t},r)=>s.jsx(pc,{ref:r,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Xr.displayName=pc.displayName;const rt=h.forwardRef(({className:e,...t},r)=>s.jsx(xc,{ref:r,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));rt.displayName=xc.displayName;const nt=h.forwardRef(({className:e,...t},r)=>s.jsx(gc,{ref:r,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));nt.displayName=gc.displayName;function wc(e,t){return function(){return e.apply(t,arguments)}}const{toString:zf}=Object.prototype,{getPrototypeOf:wi}=Object,{iterator:Kn,toStringTag:Sc}=Symbol,Jn=(e=>t=>{const r=zf.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kt=e=>(e=e.toLowerCase(),t=>Jn(t)===e),Yn=e=>t=>typeof t===e,{isArray:vr}=Array,fr=Yn("undefined");function Zr(e){return e!==null&&!fr(e)&&e.constructor!==null&&!fr(e.constructor)&&ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Cc=kt("ArrayBuffer");function Mf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Cc(e.buffer),t}const Uf=Yn("string"),ut=Yn("function"),Ec=Yn("number"),en=e=>e!==null&&typeof e=="object",Bf=e=>e===!0||e===!1,jn=e=>{if(Jn(e)!=="object")return!1;const t=wi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Sc in e)&&!(Kn in e)},qf=e=>{if(!en(e)||Zr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Hf=kt("Date"),Vf=kt("File"),Gf=kt("Blob"),Qf=kt("FileList"),Wf=e=>en(e)&&ut(e.pipe),Kf=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ut(e.append)&&((t=Jn(e))==="formdata"||t==="object"&&ut(e.toString)&&e.toString()==="[object FormData]"))},Jf=kt("URLSearchParams"),[Yf,Xf,Zf,em]=["ReadableStream","Request","Response","Headers"].map(kt),tm=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tn(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),vr(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Zr(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function Tc(e,t){if(Zr(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ac=e=>!fr(e)&&e!==_s;function Va(){const{caseless:e,skipUndefined:t}=Ac(this)&&this||{},r={},n=(a,i)=>{const o=e&&Tc(r,i)||i;jn(r[o])&&jn(a)?r[o]=Va(r[o],a):jn(a)?r[o]=Va({},a):vr(a)?r[o]=a.slice():(!t||!fr(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&tn(arguments[a],n);return r}const sm=(e,t,r,{allOwnKeys:n}={})=>(tn(t,(a,i)=>{r&&ut(a)?e[i]=wc(a,r):e[i]=a},{allOwnKeys:n}),e),rm=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nm=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},am=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&wi(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},im=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},om=e=>{if(!e)return null;if(vr(e))return e;let t=e.length;if(!Ec(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lm=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wi(Uint8Array)),cm=(e,t)=>{const n=(e&&e[Kn]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},dm=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},um=kt("HTMLFormElement"),hm=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),oo=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),fm=kt("RegExp"),Rc=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tn(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},mm=e=>{Rc(e,(t,r)=>{if(ut(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ut(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pm=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return vr(e)?n(e):n(String(e).split(t)),r},xm=()=>{},gm=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ym(e){return!!(e&&ut(e.append)&&e[Sc]==="FormData"&&e[Kn])}const vm=e=>{const t=new Array(10),r=(n,a)=>{if(en(n)){if(t.indexOf(n)>=0)return;if(Zr(n))return n;if(!("toJSON"in n)){t[a]=n;const i=vr(n)?[]:{};return tn(n,(o,l)=>{const c=r(o,a+1);!fr(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(e,0)},bm=kt("AsyncFunction"),jm=e=>e&&(en(e)||ut(e))&&ut(e.then)&&ut(e.catch),_c=((e,t)=>e?setImmediate:t?((r,n)=>(_s.addEventListener("message",({source:a,data:i})=>{a===_s&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),_s.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ut(_s.postMessage)),Nm=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||_c,wm=e=>e!=null&&ut(e[Kn]),_={isArray:vr,isArrayBuffer:Cc,isBuffer:Zr,isFormData:Kf,isArrayBufferView:Mf,isString:Uf,isNumber:Ec,isBoolean:Bf,isObject:en,isPlainObject:jn,isEmptyObject:qf,isReadableStream:Yf,isRequest:Xf,isResponse:Zf,isHeaders:em,isUndefined:fr,isDate:Hf,isFile:Vf,isBlob:Gf,isRegExp:fm,isFunction:ut,isStream:Wf,isURLSearchParams:Jf,isTypedArray:lm,isFileList:Qf,forEach:tn,merge:Va,extend:sm,trim:tm,stripBOM:rm,inherits:nm,toFlatObject:am,kindOf:Jn,kindOfTest:kt,endsWith:im,toArray:om,forEachEntry:cm,matchAll:dm,isHTMLForm:um,hasOwnProperty:oo,hasOwnProp:oo,reduceDescriptors:Rc,freezeMethods:mm,toObjectSet:pm,toCamelCase:hm,noop:xm,toFiniteNumber:gm,findKey:Tc,global:_s,isContextDefined:Ac,isSpecCompliantForm:ym,toJSONObject:vm,isAsyncFn:bm,isThenable:jm,setImmediate:_c,asap:Nm,isIterable:wm};function le(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}_.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Oc=le.prototype,kc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{kc[e]={value:e}});Object.defineProperties(le,kc);Object.defineProperty(Oc,"isAxiosError",{value:!0});le.from=(e,t,r,n,a,i)=>{const o=Object.create(Oc);_.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return le.call(o,l,c,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Sm=null;function Ga(e){return _.isPlainObject(e)||_.isArray(e)}function Pc(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function lo(e,t,r){return e?e.concat(t).map(function(a,i){return a=Pc(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function Cm(e){return _.isArray(e)&&!e.some(Ga)}const Em=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function Xn(e,t,r){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=_.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!_.isUndefined(m[g])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(a))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(_.isDate(y))return y.toISOString();if(_.isBoolean(y))return y.toString();if(!c&&_.isBlob(y))throw new le("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(y)||_.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,g,m){let v=y;if(y&&!m&&typeof y=="object"){if(_.endsWith(g,"{}"))g=n?g:g.slice(0,-2),y=JSON.stringify(y);else if(_.isArray(y)&&Cm(y)||(_.isFileList(y)||_.endsWith(g,"[]"))&&(v=_.toArray(y)))return g=Pc(g),v.forEach(function(E,A){!(_.isUndefined(E)||E===null)&&t.append(o===!0?lo([g],A,i):o===null?g:g+"[]",d(E))}),!1}return Ga(y)?!0:(t.append(lo(m,g,i),d(y)),!1)}const p=[],x=Object.assign(Em,{defaultVisitor:u,convertValue:d,isVisitable:Ga});function f(y,g){if(!_.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));p.push(y),_.forEach(y,function(v,j){(!(_.isUndefined(v)||v===null)&&a.call(t,v,_.isString(j)?j.trim():j,g,x))===!0&&f(v,g?g.concat(j):[j])}),p.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return f(e),t}function co(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Si(e,t){this._pairs=[],e&&Xn(e,this,t)}const Ic=Si.prototype;Ic.append=function(t,r){this._pairs.push([t,r])};Ic.toString=function(t){const r=t?function(n){return t.call(this,n,co)}:co;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Tm(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $c(e,t,r){if(!t)return e;const n=r&&r.encode||Tm;_.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=_.isURLSearchParams(t)?t.toString():new Si(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class uo{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Lc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Am=typeof URLSearchParams<"u"?URLSearchParams:Si,Rm=typeof FormData<"u"?FormData:null,_m=typeof Blob<"u"?Blob:null,Om={isBrowser:!0,classes:{URLSearchParams:Am,FormData:Rm,Blob:_m},protocols:["http","https","file","blob","url","data"]},Ci=typeof window<"u"&&typeof document<"u",Qa=typeof navigator=="object"&&navigator||void 0,km=Ci&&(!Qa||["ReactNative","NativeScript","NS"].indexOf(Qa.product)<0),Pm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Im=Ci&&window.location.href||"http://localhost",$m=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ci,hasStandardBrowserEnv:km,hasStandardBrowserWebWorkerEnv:Pm,navigator:Qa,origin:Im},Symbol.toStringTag,{value:"Module"})),Je={...$m,...Om};function Lm(e,t){return Xn(e,new Je.classes.URLSearchParams,{visitor:function(r,n,a,i){return Je.isNode&&_.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Dm(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Fm(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function Dc(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&_.isArray(a)?a.length:o,c?(_.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!_.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&_.isArray(a[o])&&(a[o]=Fm(a[o])),!l)}if(_.isFormData(e)&&_.isFunction(e.entries)){const r={};return _.forEachEntry(e,(n,a)=>{t(Dm(n),a,r,0)}),r}return null}function zm(e,t,r){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const sn={transitional:Lc,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=_.isObject(t);if(i&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return a?JSON.stringify(Dc(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Lm(t,this.formSerializer).toString();if((l=_.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Xn(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),zm(t)):t}],transformResponse:[function(t){const r=this.transitional||sn.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?le.from(l,le.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Je.classes.FormData,Blob:Je.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{sn.headers[e]={}});const Mm=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Um=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&Mm[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},ho=Symbol("internals");function _r(e){return e&&String(e).trim().toLowerCase()}function Nn(e){return e===!1||e==null?e:_.isArray(e)?e.map(Nn):String(e)}function Bm(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qm=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ga(e,t,r,n,a){if(_.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!_.isString(t)){if(_.isString(n))return t.indexOf(n)!==-1;if(_.isRegExp(n))return n.test(t)}}function Hm(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Vm(e,t){const r=_.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let ht=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=_r(c);if(!u)throw new Error("header name must be a non-empty string");const p=_.findKey(a,u);(!p||a[p]===void 0||d===!0||d===void 0&&a[p]!==!1)&&(a[p||c]=Nn(l))}const o=(l,c)=>_.forEach(l,(d,u)=>i(d,u,c));if(_.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(_.isString(t)&&(t=t.trim())&&!qm(t))o(Um(t),r);else if(_.isObject(t)&&_.isIterable(t)){let l={},c,d;for(const u of t){if(!_.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?_.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=_r(t),t){const n=_.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return Bm(a);if(_.isFunction(r))return r.call(this,a,n);if(_.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_r(t),t){const n=_.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||ga(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=_r(o),o){const l=_.findKey(n,o);l&&(!r||ga(n,n[l],l,r))&&(delete n[l],a=!0)}}return _.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||ga(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return _.forEach(this,(a,i)=>{const o=_.findKey(n,i);if(o){r[o]=Nn(a),delete r[i];return}const l=t?Hm(i):String(i).trim();l!==i&&delete r[i],r[l]=Nn(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return _.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&_.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[ho]=this[ho]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=_r(o);n[l]||(Vm(a,o),n[l]=!0)}return _.isArray(t)?t.forEach(i):i(t),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(ht.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});_.freezeMethods(ht);function ya(e,t){const r=this||sn,n=t||r,a=ht.from(n.headers);let i=n.data;return _.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Fc(e){return!!(e&&e.__CANCEL__)}function br(e,t,r){le.call(this,e??"canceled",le.ERR_CANCELED,t,r),this.name="CanceledError"}_.inherits(br,le,{__CANCEL__:!0});function zc(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new le("Request failed with status code "+r.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Gm(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qm(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let p=i,x=0;for(;p!==a;)x+=r[p++],p=p%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const f=u&&d-u;return f?Math.round(x*1e3/f):void 0}}function Wm(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),p=u-r;p>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-p)))},()=>a&&o(a)]}const On=(e,t,r=3)=>{let n=0;const a=Qm(50,250);return Wm(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},r)},fo=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},mo=e=>(...t)=>_.asap(()=>e(...t)),Km=Je.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Je.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Je.origin),Je.navigator&&/(msie|trident)/i.test(Je.navigator.userAgent)):()=>!0,Jm=Je.hasStandardBrowserEnv?{write(e,t,r,n,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];_.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),_.isString(n)&&l.push(`path=${n}`),_.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),_.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ym(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Xm(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Mc(e,t,r){let n=!Ym(t);return e&&(n||r==!1)?Xm(e,t):t}const po=e=>e instanceof ht?{...e}:e;function Ks(e,t){t=t||{};const r={};function n(d,u,p,x){return _.isPlainObject(d)&&_.isPlainObject(u)?_.merge.call({caseless:x},d,u):_.isPlainObject(u)?_.merge({},u):_.isArray(u)?u.slice():u}function a(d,u,p,x){if(_.isUndefined(u)){if(!_.isUndefined(d))return n(void 0,d,p,x)}else return n(d,u,p,x)}function i(d,u){if(!_.isUndefined(u))return n(void 0,u)}function o(d,u){if(_.isUndefined(u)){if(!_.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,p){if(p in t)return n(d,u);if(p in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,p)=>a(po(d),po(u),p,!0)};return _.forEach(Object.keys({...e,...t}),function(u){const p=c[u]||a,x=p(e[u],t[u],u);_.isUndefined(x)&&p!==l||(r[u]=x)}),r}const Uc=e=>{const t=Ks({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=ht.from(o),t.url=$c(Mc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),_.isFormData(r)){if(Je.hasStandardBrowserEnv||Je.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(_.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,p])=>{d.includes(u.toLowerCase())&&o.set(u,p)})}}if(Je.hasStandardBrowserEnv&&(n&&_.isFunction(n)&&(n=n(t)),n||n!==!1&&Km(t.url))){const c=a&&i&&Jm.read(i);c&&o.set(a,c)}return t},Zm=typeof XMLHttpRequest<"u",ep=Zm&&function(e){return new Promise(function(r,n){const a=Uc(e);let i=a.data;const o=ht.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,p,x,f,y;function g(){f&&f(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(a.method.toUpperCase(),a.url,!0),m.timeout=a.timeout;function v(){if(!m)return;const E=ht.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:E,config:e,request:m};zc(function(N){r(N),g()},function(N){n(N),g()},T),m=null}"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(n(new le("Request aborted",le.ECONNABORTED,e,m)),m=null)},m.onerror=function(A){const T=A&&A.message?A.message:"Network Error",k=new le(T,le.ERR_NETWORK,e,m);k.event=A||null,n(k),m=null},m.ontimeout=function(){let A=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const T=a.transitional||Lc;a.timeoutErrorMessage&&(A=a.timeoutErrorMessage),n(new le(A,T.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,e,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&_.forEach(o.toJSON(),function(A,T){m.setRequestHeader(T,A)}),_.isUndefined(a.withCredentials)||(m.withCredentials=!!a.withCredentials),l&&l!=="json"&&(m.responseType=a.responseType),d&&([x,y]=On(d,!0),m.addEventListener("progress",x)),c&&m.upload&&([p,f]=On(c),m.upload.addEventListener("progress",p),m.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=E=>{m&&(n(!E||E.type?new br(null,e,m):E),m.abort(),m=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const j=Gm(a.url);if(j&&Je.protocols.indexOf(j)===-1){n(new le("Unsupported protocol "+j+":",le.ERR_BAD_REQUEST,e));return}m.send(i||null)})},tp=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof le?u:new br(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new le(`timeout ${t} of ms exceeded`,le.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>_.asap(l),c}},sp=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},rp=async function*(e,t){for await(const r of np(e))yield*sp(r,t)},np=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},xo=(e,t,r,n)=>{const a=rp(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let p=u.byteLength;if(r){let x=i+=p;r(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},go=64*1024,{isFunction:hn}=_,ap=(({Request:e,Response:t})=>({Request:e,Response:t}))(_.global),{ReadableStream:yo,TextEncoder:vo}=_.global,bo=(e,...t)=>{try{return!!e(...t)}catch{return!1}},ip=e=>{e=_.merge.call({skipUndefined:!0},ap,e);const{fetch:t,Request:r,Response:n}=e,a=t?hn(t):typeof fetch=="function",i=hn(r),o=hn(n);if(!a)return!1;const l=a&&hn(yo),c=a&&(typeof vo=="function"?(y=>g=>y.encode(g))(new vo):async y=>new Uint8Array(await new r(y).arrayBuffer())),d=i&&l&&bo(()=>{let y=!1;const g=new r(Je.origin,{body:new yo,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!g}),u=o&&l&&bo(()=>_.isReadableStream(new n("").body)),p={stream:u&&(y=>y.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(g,m)=>{let v=g&&g[y];if(v)return v.call(g);throw new le(`Response type '${y}' is not supported`,le.ERR_NOT_SUPPORT,m)})});const x=async y=>{if(y==null)return 0;if(_.isBlob(y))return y.size;if(_.isSpecCompliantForm(y))return(await new r(Je.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(_.isArrayBufferView(y)||_.isArrayBuffer(y))return y.byteLength;if(_.isURLSearchParams(y)&&(y=y+""),_.isString(y))return(await c(y)).byteLength},f=async(y,g)=>{const m=_.toFiniteNumber(y.getContentLength());return m??x(g)};return async y=>{let{url:g,method:m,data:v,signal:j,cancelToken:E,timeout:A,onDownloadProgress:T,onUploadProgress:k,responseType:N,headers:R,withCredentials:B="same-origin",fetchOptions:L}=Uc(y),F=t||fetch;N=N?(N+"").toLowerCase():"text";let q=tp([j,E&&E.toAbortSignal()],A),fe=null;const oe=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let je;try{if(k&&d&&m!=="get"&&m!=="head"&&(je=await f(R,v))!==0){let P=new r(g,{method:"POST",body:v,duplex:"half"}),I;if(_.isFormData(v)&&(I=P.headers.get("content-type"))&&R.setContentType(I),P.body){const[D,z]=fo(je,On(mo(k)));v=xo(P.body,go,D,z)}}_.isString(B)||(B=B?"include":"omit");const Y=i&&"credentials"in r.prototype,ye={...L,signal:q,method:m.toUpperCase(),headers:R.normalize().toJSON(),body:v,duplex:"half",credentials:Y?B:void 0};fe=i&&new r(g,ye);let ve=await(i?F(fe,L):F(g,ye));const S=u&&(N==="stream"||N==="response");if(u&&(T||S&&oe)){const P={};["status","statusText","headers"].forEach(H=>{P[H]=ve[H]});const I=_.toFiniteNumber(ve.headers.get("content-length")),[D,z]=T&&fo(I,On(mo(T),!0))||[];ve=new n(xo(ve.body,go,D,()=>{z&&z(),oe&&oe()}),P)}N=N||"text";let w=await p[_.findKey(p,N)||"text"](ve,y);return!S&&oe&&oe(),await new Promise((P,I)=>{zc(P,I,{data:w,headers:ht.from(ve.headers),status:ve.status,statusText:ve.statusText,config:y,request:fe})})}catch(Y){throw oe&&oe(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,y,fe),{cause:Y.cause||Y}):le.from(Y,Y&&Y.code,y,fe)}}},op=new Map,Bc=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,l=o,c,d,u=op;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:ip(t)),u=d;return d};Bc();const Ei={http:Sm,xhr:ep,fetch:{get:Bc}};_.forEach(Ei,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jo=e=>`- ${e}`,lp=e=>_.isFunction(e)||e===null||e===!1;function cp(e,t){e=_.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let l;if(a=n,!lp(n)&&(a=Ei[(l=String(n)).toLowerCase()],a===void 0))throw new le(`Unknown adapter '${l}'`);if(a&&(_.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(jo).join(`
`):" "+jo(o[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const qc={getAdapter:cp,adapters:Ei};function va(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new br(null,e)}function No(e){return va(e),e.headers=ht.from(e.headers),e.data=ya.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qc.getAdapter(e.adapter||sn.adapter,e)(e).then(function(n){return va(e),n.data=ya.call(e,e.transformResponse,n),n.headers=ht.from(n.headers),n},function(n){return Fc(n)||(va(e),n&&n.response&&(n.response.data=ya.call(e,e.transformResponse,n.response),n.response.headers=ht.from(n.response.headers))),Promise.reject(n)})}const Hc="1.13.2",Zn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Zn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const wo={};Zn.transitional=function(t,r,n){function a(i,o){return"[Axios v"+Hc+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new le(a(o," has been removed"+(r?" in "+r:"")),le.ERR_DEPRECATED);return r&&!wo[o]&&(wo[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Zn.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function dp(e,t,r){if(typeof e!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new le("option "+i+" must be "+c,le.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new le("Unknown option "+i,le.ERR_BAD_OPTION)}}const wn={assertOptions:dp,validators:Zn},$t=wn.validators;let Bs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new uo,response:new uo}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ks(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&wn.assertOptions(n,{silentJSONParsing:$t.transitional($t.boolean),forcedJSONParsing:$t.transitional($t.boolean),clarifyTimeoutError:$t.transitional($t.boolean)},!1),a!=null&&(_.isFunction(a)?r.paramsSerializer={serialize:a}:wn.assertOptions(a,{encode:$t.function,serialize:$t.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),wn.assertOptions(r,{baseUrl:$t.spelling("baseURL"),withXsrfToken:$t.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&_.merge(i.common,i[r.method]);i&&_.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=ht.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,p=0,x;if(!c){const y=[No.bind(this),void 0];for(y.unshift(...l),y.push(...d),x=y.length,u=Promise.resolve(r);p<x;)u=u.then(y[p++],y[p++]);return u}x=l.length;let f=r;for(;p<x;){const y=l[p++],g=l[p++];try{f=y(f)}catch(m){g.call(this,m);break}}try{u=No.call(this,f)}catch(y){return Promise.reject(y)}for(p=0,x=d.length;p<x;)u=u.then(d[p++],d[p++]);return u}getUri(t){t=Ks(this.defaults,t);const r=Mc(t.baseURL,t.url,t.allowAbsoluteUrls);return $c(r,t.params,t.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(t){Bs.prototype[t]=function(r,n){return this.request(Ks(n||{},{method:t,url:r,data:(n||{}).data}))}});_.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Ks(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Bs.prototype[t]=r(),Bs.prototype[t+"Form"]=r(!0)});let up=class Vc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new br(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Vc(function(a){t=a}),cancel:t}}};function hp(e){return function(r){return e.apply(null,r)}}function fp(e){return _.isObject(e)&&e.isAxiosError===!0}const Wa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Wa).forEach(([e,t])=>{Wa[t]=e});function Gc(e){const t=new Bs(e),r=wc(Bs.prototype.request,t);return _.extend(r,Bs.prototype,t,{allOwnKeys:!0}),_.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Gc(Ks(e,a))},r}const Le=Gc(sn);Le.Axios=Bs;Le.CanceledError=br;Le.CancelToken=up;Le.isCancel=Fc;Le.VERSION=Hc;Le.toFormData=Xn;Le.AxiosError=le;Le.Cancel=Le.CanceledError;Le.all=function(t){return Promise.all(t)};Le.spread=hp;Le.isAxiosError=fp;Le.mergeConfig=Ks;Le.AxiosHeaders=ht;Le.formToJSON=e=>Dc(_.isHTMLForm(e)?new FormData(e):e);Le.getAdapter=qc.getAdapter;Le.HttpStatusCode=Wa;Le.default=Le;const{Axios:G1,AxiosError:Q1,CanceledError:W1,isCancel:K1,CancelToken:J1,VERSION:Y1,all:X1,Cancel:Z1,isAxiosError:ew,spread:tw,toFormData:sw,AxiosHeaders:rw,HttpStatusCode:nw,formToJSON:aw,getAdapter:iw,mergeConfig:ow}=Le,mp="http://localhost:8080",jr=Le.create({baseURL:`${mp}/api/v1`,timeout:3e4,headers:{"Content-Type":"application/json"}});jr.interceptors.request.use(e=>(e.metadata={startTime:Date.now()},e),e=>(console.error("[API Request Error]",e),Promise.reject(e)));jr.interceptors.response.use(e=>{var t;return Date.now()-(((t=e.config.metadata)==null?void 0:t.startTime)||0),e},e=>{var r,n,a,i,o,l,c,d,u,p,x,f,y;console.error("[API Response Error]",{message:e.message,status:(r=e.response)==null?void 0:r.status,data:(n=e.response)==null?void 0:n.data});const t={error:((i=(a=e.response)==null?void 0:a.data)==null?void 0:i.error)||"Request Failed",message:((l=(o=e.response)==null?void 0:o.data)==null?void 0:l.message)||e.message,status:(c=e.response)==null?void 0:c.status,details:(u=(d=e.response)==null?void 0:d.data)==null?void 0:u.details};return((p=e.response)==null?void 0:p.status)===401?console.warn("[API] Unauthorized access - authentication required"):((x=e.response)==null?void 0:x.status)===403?console.warn("[API] Forbidden - insufficient permissions"):((f=e.response)==null?void 0:f.status)===404?console.warn("[API] Resource not found"):((y=e.response)==null?void 0:y.status)===500?console.error("[API] Internal server error"):e.code==="ECONNABORTED"?t.message="Request timeout - server did not respond in time":e.code==="ERR_NETWORK"&&(t.message="Network error - unable to connect to server"),Promise.reject(t)});const pp=e=>typeof e=="object"&&e!==null&&"message"in e?e.message:"An unexpected error occurred",Ye=async(e,t)=>(await jr.get(e,{params:t})).data,Xt=async(e,t)=>(await jr.post(e,t)).data,xp=async(e,t)=>(await jr.put(e,t)).data,gp=async e=>(await jr.delete(e)).data,yp=async e=>Ye("/rules",e),vp=async e=>Ye(`/rules/${encodeURIComponent(e)}`),bp=async e=>Ye(`/rules/${encodeURIComponent(e)}/combinations`),jp=async e=>Ye(`/rules/by-predicate/${e}`),Np=async e=>Ye(`/rules/by-tag/${encodeURIComponent(e)}`),Qc=async e=>gp(`/rules/${encodeURIComponent(e)}`),Wc=async e=>Xt("/rules/batch-delete",{ruleCodes:e}),Kc=async(e,t)=>xp(`/rules/${encodeURIComponent(e)}`,t),is={all:["rules"],lists:()=>[...is.all,"list"],list:e=>[...is.lists(),e],details:()=>[...is.all,"detail"],detail:e=>[...is.details(),e],combinations:e=>[...is.detail(e),"combinations"],byPredicate:e=>[...is.all,"by-predicate",e],byTag:e=>[...is.all,"by-tag",e]},So={listRules:yp,getRule:vp,getRuleCombinations:bp,getRulesByPredicate:jp,getRulesByTag:Np,deleteRule:Qc,deleteRulesBatch:Wc,updateRule:Kc,queryKeys:is},Jc=(e,t)=>gh({queryKey:So.queryKeys.list(e),queryFn:()=>So.listRules(e),staleTime:3e4,...t}),me=h.forwardRef(({className:e="",...t},r)=>s.jsx("div",{ref:r,className:`rounded-lg border bg-card text-card-foreground shadow-sm ${e}`,...t}));me.displayName="Card";const Ce=h.forwardRef(({className:e="",...t},r)=>s.jsx("div",{ref:r,className:`flex flex-col space-y-1.5 p-6 ${e}`,...t}));Ce.displayName="CardHeader";const $e=h.forwardRef(({className:e="",...t},r)=>s.jsx("h3",{ref:r,className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...t}));$e.displayName="CardTitle";const Re=h.forwardRef(({className:e="",...t},r)=>s.jsx("p",{ref:r,className:`text-sm text-muted-foreground ${e}`,...t}));Re.displayName="CardDescription";const pe=h.forwardRef(({className:e="",...t},r)=>s.jsx("div",{ref:r,className:`p-6 pt-0 ${e}`,...t}));pe.displayName="CardContent";const wp=h.forwardRef(({className:e="",...t},r)=>s.jsx("div",{ref:r,className:`flex items-center p-6 pt-0 ${e}`,...t}));wp.displayName="CardFooter";const Co=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Eo=Ml,Sp=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Eo(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],p=i==null?void 0:i[d];if(u===null)return null;const x=Co(u)||Co(p);return a[d][x]}),l=r&&Object.entries(r).reduce((d,u)=>{let[p,x]=u;return x===void 0||(d[p]=x),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:p,className:x,...f}=u;return Object.entries(f).every(y=>{let[g,m]=y;return Array.isArray(m)?m.includes({...i,...l}[g]):{...i,...l}[g]===m})?[...d,p,x]:d},[]);return Eo(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},Cp=Sp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ie({className:e,variant:t,asChild:r=!1,...n}){const a=r?tu:"span";return s.jsx(a,{"data-slot":"badge",className:Se(Cp({variant:t}),e),...n})}const W=h.forwardRef(({className:e="",variant:t="default",size:r="default",...n},a)=>{const i="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",ghost:"hover:bg-accent hover:text-accent-foreground"},l={default:"h-10 py-2 px-4",sm:"h-9 px-3 text-sm",lg:"h-11 px-8"};return s.jsx("button",{className:`${i} ${o[t]} ${l[r]} ${e}`,ref:a,...n})});W.displayName="Button";function Jt({className:e,type:t,...r}){return s.jsx("input",{type:t,"data-slot":"input",className:Se("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ep={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(e,t)=>{const r=h.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>h.createElement("svg",{ref:u,...Ep,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Tp(e)}`,l].join(" "),...d},[...t.map(([p,x])=>h.createElement(p,x)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=xe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=xe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=xe("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=xe("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=xe("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=xe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=xe("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=xe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=xe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=xe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=xe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=xe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=xe("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=xe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=xe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ko({...e}){return s.jsx(su,{"data-slot":"accordion",...e})}function Po({className:e,...t}){return s.jsx(ru,{"data-slot":"accordion-item",className:Se("border-b last:border-b-0",e),...t})}function Io({className:e,children:t,...r}){return s.jsx(nu,{className:"flex",children:s.jsxs(au,{"data-slot":"accordion-trigger",className:Se("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,s.jsx(ea,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function $o({className:e,children:t,...r}){return s.jsx(iu,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...r,children:s.jsx("div",{className:Se("pt-0 pb-4",e),children:t})})}var ta="Checkbox",[Lp]=Jr(ta),[Dp,Ai]=Lp(ta);function Fp(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:p}=e,[x,f]=Vn({prop:r,defaultProp:a??!1,onChange:c,caller:ta}),[y,g]=h.useState(null),[m,v]=h.useState(null),j=h.useRef(!1),E=y?!!o||!!y.closest("form"):!0,A={checked:x,disabled:i,setChecked:f,control:y,setControl:g,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:js(a)?!1:a,isFormControl:E,bubbleInput:m,setBubbleInput:v};return s.jsx(Dp,{scope:t,...A,children:zp(p)?p(A):n})}var Yc="CheckboxTrigger",Xc=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:p,hasConsumerStoppedPropagationRef:x,isFormControl:f,bubbleInput:y}=Ai(Yc,e),g=Ot(a,u),m=h.useRef(c);return h.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const j=()=>p(m.current);return v.addEventListener("reset",j),()=>v.removeEventListener("reset",j)}},[i,p]),s.jsx(at.button,{type:"button",role:"checkbox","aria-checked":js(c)?"mixed":c,"aria-required":d,"data-state":nd(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:Ie(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Ie(r,v=>{p(j=>js(j)?!0:!j),y&&f&&(x.current=v.isPropagationStopped(),x.current||v.stopPropagation())})})});Xc.displayName=Yc;var Zc=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...p}=e;return s.jsx(Fp,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:x})=>s.jsxs(s.Fragment,{children:[s.jsx(Xc,{...p,ref:t,__scopeCheckbox:r}),x&&s.jsx(rd,{__scopeCheckbox:r})]})})});Zc.displayName=ta;var ed="CheckboxIndicator",td=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=Ai(ed,r);return s.jsx(Ss,{present:n||js(i.checked)||i.checked===!0,children:s.jsx(at.span,{"data-state":nd(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});td.displayName=ed;var sd="CheckboxBubbleInput",rd=h.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:p,bubbleInput:x,setBubbleInput:f}=Ai(sd,e),y=Ot(r,f),g=ou(i),m=lu(n);h.useEffect(()=>{const j=x;if(!j)return;const E=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(E,"checked").set,k=!a.current;if(g!==i&&T){const N=new Event("click",{bubbles:k});j.indeterminate=js(i),T.call(j,js(i)?!1:i),j.dispatchEvent(N)}},[x,g,i,a]);const v=h.useRef(js(i)?!1:i);return s.jsx(at.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rd.displayName=sd;function zp(e){return typeof e=="function"}function js(e){return e==="indeterminate"}function nd(e){return js(e)?"indeterminate":e?"checked":"unchecked"}function Os({className:e,...t}){return s.jsx(Zc,{"data-slot":"checkbox",className:Se("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(td,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Ti,{className:"size-3.5"})})})}function ft({...e}){return s.jsx(cu,{"data-slot":"select",...e})}function mt({...e}){return s.jsx(hu,{"data-slot":"select-value",...e})}function pt({className:e,size:t="default",children:r,...n}){return s.jsxs(du,{"data-slot":"select-trigger","data-size":t,className:Se("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[r,s.jsx(uu,{asChild:!0,children:s.jsx(ea,{className:"size-4 opacity-50"})})]})}function xt({className:e,children:t,position:r="popper",...n}){return s.jsx(fu,{children:s.jsxs(mu,{"data-slot":"select-content",className:Se("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(Mp,{}),s.jsx(pu,{className:Se("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(Up,{})]})})}function Ne({className:e,children:t,...r}){return s.jsxs(xu,{"data-slot":"select-item",className:Se("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(gu,{children:s.jsx(Ti,{className:"size-4"})})}),s.jsx(yu,{children:t})]})}function Mp({className:e,...t}){return s.jsx(vu,{"data-slot":"select-scroll-up-button",className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Rp,{className:"size-4"})})}function Up({className:e,...t}){return s.jsx(bu,{"data-slot":"select-scroll-down-button",className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ea,{className:"size-4"})})}function Bp(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Ri="ScrollArea",[ad]=Jr(Ri),[qp,bt]=ad(Ri),id=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=h.useState(null),[d,u]=h.useState(null),[p,x]=h.useState(null),[f,y]=h.useState(null),[g,m]=h.useState(null),[v,j]=h.useState(0),[E,A]=h.useState(0),[T,k]=h.useState(!1),[N,R]=h.useState(!1),B=Ot(t,F=>c(F)),L=mi(a);return s.jsx(qp,{scope:r,type:n,dir:L,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:p,onContentChange:x,scrollbarX:f,onScrollbarXChange:y,scrollbarXEnabled:T,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:m,scrollbarYEnabled:N,onScrollbarYEnabledChange:R,onCornerWidthChange:j,onCornerHeightChange:A,children:s.jsx(at.div,{dir:L,...o,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});id.displayName=Ri;var od="ScrollAreaViewport",ld=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=bt(od,r),l=h.useRef(null),c=Ot(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(at.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ld.displayName=od;var Mt="ScrollAreaScrollbar",cd=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=bt(Mt,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(Hp,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(Vp,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(dd,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(_i,{...n,ref:t}):null});cd.displayName=Mt;var Hp=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=bt(Mt,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Ss,{present:r||i,children:s.jsx(dd,{"data-state":i?"visible":"hidden",...n,ref:t})})}),Vp=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=bt(Mt,e.__scopeScrollArea),i=e.orientation==="horizontal",o=ra(()=>c("SCROLL_END"),100),[l,c]=Bp("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let p=d[u];const x=()=>{const f=d[u];p!==f&&(c("SCROLL"),o()),p=f};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[a.viewport,i,c,o]),s.jsx(Ss,{present:r||l!=="hidden",children:s.jsx(_i,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Ie(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ie(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),dd=h.forwardRef((e,t)=>{const r=bt(Mt,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",c=ra(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return pr(r.viewport,c),pr(r.content,c),s.jsx(Ss,{present:n||i,children:s.jsx(_i,{"data-state":i?"visible":"hidden",...a,ref:t})})}),_i=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=bt(Mt,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=pd(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:x=>o.current=x};function p(x,f){return Yp(x,o.current,l,f)}return r==="horizontal"?s.jsx(Gp,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const x=a.viewport.scrollLeft,f=Lo(x,l,a.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=p(x,a.dir))}}):r==="vertical"?s.jsx(Qp,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const x=a.viewport.scrollTop,f=Lo(x,l);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=p(x))}}):null}),Gp=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=bt(Mt,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=Ot(t,c,i.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(hd,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":sa(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,p)=>{if(i.viewport){const x=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(x),gd(x,p)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:In(o.paddingLeft),paddingEnd:In(o.paddingRight)}})}})}),Qp=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=bt(Mt,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=Ot(t,c,i.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(hd,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":sa(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,p)=>{if(i.viewport){const x=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(x),gd(x,p)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:In(o.paddingTop),paddingEnd:In(o.paddingBottom)}})}})}),[Wp,ud]=ad(Mt),hd=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:p,...x}=e,f=bt(Mt,r),[y,g]=h.useState(null),m=Ot(t,B=>g(B)),v=h.useRef(null),j=h.useRef(""),E=f.viewport,A=n.content-n.viewport,T=os(u),k=os(c),N=ra(p,10);function R(B){if(v.current){const L=B.clientX-v.current.left,F=B.clientY-v.current.top;d({x:L,y:F})}}return h.useEffect(()=>{const B=L=>{const F=L.target;(y==null?void 0:y.contains(F))&&T(L,A)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[E,y,A,T]),h.useEffect(k,[n,k]),pr(y,N),pr(f.content,N),s.jsx(Wp,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:os(i),onThumbPointerUp:os(o),onThumbPositionChange:k,onThumbPointerDown:os(l),children:s.jsx(at.div,{...x,ref:m,style:{position:"absolute",...x.style},onPointerDown:Ie(e.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),v.current=y.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),R(B))}),onPointerMove:Ie(e.onPointerMove,R),onPointerUp:Ie(e.onPointerUp,B=>{const L=B.target;L.hasPointerCapture(B.pointerId)&&L.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})})}),Pn="ScrollAreaThumb",fd=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ud(Pn,e.__scopeScrollArea);return s.jsx(Ss,{present:r||a.hasThumb,children:s.jsx(Kp,{ref:t,...n})})}),Kp=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=bt(Pn,r),o=ud(Pn,r),{onThumbPositionChange:l}=o,c=Ot(t,p=>o.onThumbChange(p)),d=h.useRef(void 0),u=ra(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const p=i.viewport;if(p){const x=()=>{if(u(),!d.current){const f=Xp(p,l);d.current=f,l()}};return l(),p.addEventListener("scroll",x),()=>p.removeEventListener("scroll",x)}},[i.viewport,u,l]),s.jsx(at.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ie(e.onPointerDownCapture,p=>{const f=p.target.getBoundingClientRect(),y=p.clientX-f.left,g=p.clientY-f.top;o.onThumbPointerDown({x:y,y:g})}),onPointerUp:Ie(e.onPointerUp,o.onThumbPointerUp)})});fd.displayName=Pn;var Oi="ScrollAreaCorner",md=h.forwardRef((e,t)=>{const r=bt(Oi,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(Jp,{...e,ref:t}):null});md.displayName=Oi;var Jp=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=bt(Oi,r),[i,o]=h.useState(0),[l,c]=h.useState(0),d=!!(i&&l);return pr(a.scrollbarX,()=>{var p;const u=((p=a.scrollbarX)==null?void 0:p.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),pr(a.scrollbarY,()=>{var p;const u=((p=a.scrollbarY)==null?void 0:p.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?s.jsx(at.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function In(e){return e?parseInt(e,10):0}function pd(e,t){const r=e/t;return isNaN(r)?0:r}function sa(e){const t=pd(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Yp(e,t,r,n="ltr"){const a=sa(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,p=n==="ltr"?[0,u]:[u*-1,0];return xd([c,d],p)(e)}function Lo(e,t,r="ltr"){const n=sa(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=Nu(e,c);return xd([0,o],[0,l])(d)}function xd(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function gd(e,t){return e>0&&e<t}var Xp=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function ra(e,t){const r=os(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function pr(e,t){const r=os(t);ju(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var Zp=id,ex=ld,tx=md;function ks({className:e,children:t,...r}){return s.jsxs(Zp,{"data-slot":"scroll-area",className:Se("relative",e),...r,children:[s.jsx(ex,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),s.jsx(sx,{}),s.jsx(tx,{})]})}function sx({className:e,orientation:t="vertical",...r}){return s.jsx(cd,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Se("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:s.jsx(fd,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var[na]=Jr("Tooltip",[$l]),aa=$l(),yd="TooltipProvider",rx=700,Za="tooltip.open",[nx,ki]=na(yd),vd=e=>{const{__scopeTooltip:t,delayDuration:r=rx,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(nx,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};vd.displayName=yd;var Mr="Tooltip",[ax,rn]=na(Mr),bd=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=ki(Mr,e.__scopeTooltip),d=aa(t),[u,p]=h.useState(null),x=fi(),f=h.useRef(0),y=o??c.disableHoverableContent,g=l??c.delayDuration,m=h.useRef(!1),[v,j]=Vn({prop:n,defaultProp:a??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Za))):c.onClose(),i==null||i(N)},caller:Mr}),E=h.useMemo(()=>v?m.current?"delayed-open":"instant-open":"closed",[v]),A=h.useCallback(()=>{window.clearTimeout(f.current),f.current=0,m.current=!1,j(!0)},[j]),T=h.useCallback(()=>{window.clearTimeout(f.current),f.current=0,j(!1)},[j]),k=h.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m.current=!0,j(!0),f.current=0},g)},[g,j]);return h.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),s.jsx(wu,{...d,children:s.jsx(ax,{scope:t,contentId:x,open:v,stateAttribute:E,trigger:u,onTriggerChange:p,onTriggerEnter:h.useCallback(()=>{c.isOpenDelayedRef.current?k():A()},[c.isOpenDelayedRef,k,A]),onTriggerLeave:h.useCallback(()=>{y?T():(window.clearTimeout(f.current),f.current=0)},[T,y]),onOpen:A,onClose:T,disableHoverableContent:y,children:r})})};bd.displayName=Mr;var ei="TooltipTrigger",jd=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=rn(ei,r),i=ki(ei,r),o=aa(r),l=h.useRef(null),c=Ot(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),p=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),s.jsx(Su,{asChild:!0,...o,children:s.jsx(at.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Ie(e.onPointerMove,x=>{x.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ie(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Ie(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Ie(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Ie(e.onBlur,a.onClose),onClick:Ie(e.onClick,a.onClose)})})});jd.displayName=ei;var Pi="TooltipPortal",[ix,ox]=na(Pi,{forceMount:void 0}),Nd=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:a}=e,i=rn(Pi,t);return s.jsx(ix,{scope:t,forceMount:r,children:s.jsx(Ss,{present:r||i.open,children:s.jsx(Cu,{asChild:!0,container:a,children:n})})})};Nd.displayName=Pi;var xr="TooltipContent",wd=h.forwardRef((e,t)=>{const r=ox(xr,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=rn(xr,e.__scopeTooltip);return s.jsx(Ss,{present:n||o.open,children:o.disableHoverableContent?s.jsx(Sd,{side:a,...i,ref:t}):s.jsx(lx,{side:a,...i,ref:t})})}),lx=h.forwardRef((e,t)=>{const r=rn(xr,e.__scopeTooltip),n=ki(xr,e.__scopeTooltip),a=h.useRef(null),i=Ot(t,a),[o,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:p}=n,x=h.useCallback(()=>{l(null),p(!1)},[p]),f=h.useCallback((y,g)=>{const m=y.currentTarget,v={x:y.clientX,y:y.clientY},j=hx(v,m.getBoundingClientRect()),E=fx(v,j),A=mx(g.getBoundingClientRect()),T=xx([...E,...A]);l(T),p(!0)},[p]);return h.useEffect(()=>()=>x(),[x]),h.useEffect(()=>{if(c&&u){const y=m=>f(m,u),g=m=>f(m,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[c,u,f,x]),h.useEffect(()=>{if(o){const y=g=>{const m=g.target,v={x:g.clientX,y:g.clientY},j=(c==null?void 0:c.contains(m))||(u==null?void 0:u.contains(m)),E=!px(v,o);j?x():E&&(x(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,o,d,x]),s.jsx(Sd,{...e,ref:i})}),[cx,dx]=na(Mr,{isInside:!1}),ux=Ru("TooltipContent"),Sd=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=rn(xr,r),d=aa(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Za,u),()=>document.removeEventListener(Za,u)),[u]),h.useEffect(()=>{if(c.trigger){const p=x=>{const f=x.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,u]),s.jsx(Tu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:s.jsxs(Au,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(ux,{children:n}),s.jsx(cx,{scope:r,isInside:!0,children:s.jsx(_u,{id:c.contentId,role:"tooltip",children:a||n})})]})})});wd.displayName=xr;var Cd="TooltipArrow",Ed=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=aa(r);return dx(Cd,r).isInside?null:s.jsx(Eu,{...a,...n,ref:t})});Ed.displayName=Cd;function hx(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function fx(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function mx(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function px(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,p=c.x,x=c.y;u>n!=x>n&&r<(p-d)*(n-u)/(x-u)+d&&(a=!a)}return a}function xx(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),gx(t)}function gx(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var yx=vd,vx=bd,bx=jd,jx=Nd,Nx=wd,wx=Ed;function Ns({delayDuration:e=0,...t}){return s.jsx(yx,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function qs({...e}){return s.jsx(Ns,{children:s.jsx(vx,{"data-slot":"tooltip",...e})})}function Hs({...e}){return s.jsx(bx,{"data-slot":"tooltip-trigger",...e})}function Vs({className:e,sideOffset:t=0,children:r,...n}){return s.jsx(jx,{children:s.jsxs(Nx,{"data-slot":"tooltip-content",sideOffset:t,className:Se("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...n,children:[r,s.jsx(wx,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const qe=h.forwardRef(({className:e="",variant:t="default",...r},n)=>{const a={default:"bg-background text-foreground border",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive bg-destructive/10"};return s.jsx("div",{ref:n,role:"alert",className:`relative w-full rounded-lg border p-4 ${a[t]} ${e}`,...r})});qe.displayName="Alert";const Sx=h.forwardRef(({className:e="",...t},r)=>s.jsx("h5",{ref:r,className:`mb-1 font-medium leading-none tracking-tight ${e}`,...t}));Sx.displayName="AlertTitle";const Qe=h.forwardRef(({className:e="",...t},r)=>s.jsx("div",{ref:r,className:`text-sm [&_p]:leading-relaxed ${e}`,...t}));Qe.displayName="AlertDescription";const Td=async()=>Xt("/compilation/compile-from-db"),$n=Pu,Cx=Ou,Ad=h.forwardRef(({className:e,...t},r)=>s.jsx(Ll,{ref:r,className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Ad.displayName=Ll.displayName;const Ur=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Cx,{children:[s.jsx(Ad,{}),s.jsxs(Dl,{ref:n,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(ku,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ur.displayName=Dl.displayName;const Br=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Br.displayName="DialogHeader";const Ln=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ln.displayName="DialogFooter";const qr=h.forwardRef(({className:e,...t},r)=>s.jsx(Fl,{ref:r,className:Se("text-lg font-semibold leading-none tracking-tight",e),...t}));qr.displayName=Fl.displayName;const Hr=h.forwardRef(({className:e,...t},r)=>s.jsx(zl,{ref:r,className:Se("text-sm text-muted-foreground",e),...t}));Hr.displayName=zl.displayName;const Cn={slow:{color:"red",description:"P99 latency > 1ms"},"needs-optimization":{color:"orange",description:"Requires performance tuning"},vectorized:{color:"blue",description:"Uses SIMD vectorization"},"high-match":{color:"green",description:"Match rate > 75%"},"low-match":{color:"yellow",description:"Match rate < 10%"},"production-critical":{color:"purple",description:"Critical production rule"},experimental:{color:"cyan",description:"Experimental/testing phase"},deprecated:{color:"gray",description:"Scheduled for removal"},"needs-review":{color:"orange",description:"Requires manual review"},seasonal:{color:"pink",description:"Seasonal campaign rule"}},kr=e=>{const t=Cn[e];return t?{red:"bg-red-100 text-red-800 border-red-300",orange:"bg-orange-100 text-orange-800 border-orange-300",blue:"bg-blue-100 text-blue-800 border-blue-300",green:"bg-green-100 text-green-800 border-green-300",yellow:"bg-yellow-100 text-yellow-800 border-yellow-300",purple:"bg-purple-100 text-purple-800 border-purple-300",cyan:"bg-cyan-100 text-cyan-800 border-cyan-300",gray:"bg-gray-100 text-gray-800 border-gray-300",pink:"bg-pink-100 text-pink-800 border-pink-300",indigo:"bg-indigo-100 text-indigo-800 border-indigo-300"}[t.color]:"bg-indigo-100 text-indigo-800 border-indigo-300"},Ex=e=>{const t=new Set;return e.forEach(r=>{r.tags&&r.tags.forEach(n=>t.add(n))}),Array.from(t).sort()},Tx=e=>({...e,status:e.enabled?"active":"inactive",family:Ax(e),lastModified:e.last_modified_at||"Unknown",stats:{evalsPerDay:0,matchRate:0,avgLatencyMs:0,p99LatencyMs:0,cacheHitRate:0}}),Ax=e=>{const t=e.rule_code.split(".");if(t.length>1)return t[0];if(e.tags){const r=e.tags.find(n=>n.includes("family:"));if(r)return r.replace("family:","")}return"general"},Rx=["EQUAL_TO","NOT_EQUAL_TO","IS_ANY_OF","IS_NONE_OF","GREATER_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","BETWEEN","CONTAINS","STARTS_WITH","ENDS_WITH","REGEX","IS_NULL","IS_NOT_NULL"],_x=e=>{if(!e)return"";const t=e.toUpperCase().trim();switch(t){case"EQUALS":case"EQ":case"==":case"=":case"IS_EQUAL_TO":case"IS_EQUAL":return"EQUAL_TO";case"NOT_EQUALS":case"NE":case"NEQ":case"!=":case"<>":case"IS_NOT_EQUAL_TO":case"IS_NOT_EQUAL":return"NOT_EQUAL_TO";case"GT":case">":case"IS_GREATER_THAN":case"GREATER":return"GREATER_THAN";case"GTE":case"GE":case">=":case"IS_GREATER_THAN_OR_EQUAL":return"GREATER_THAN_OR_EQUAL";case"LT":case"<":case"IS_LESS_THAN":case"LESS":return"LESS_THAN";case"LTE":case"LE":case"<=":case"IS_LESS_THAN_OR_EQUAL":return"LESS_THAN_OR_EQUAL";case"IN_RANGE":case"RANGE":return"BETWEEN";case"IN":case"ANY_OF":case"ONE_OF":return"IS_ANY_OF";case"NOT_IN":case"NONE_OF":return"IS_NONE_OF";case"HAS":case"INCLUDES":return"CONTAINS";case"BEGINS_WITH":case"PREFIX":return"STARTS_WITH";case"SUFFIX":return"ENDS_WITH";case"MATCHES":case"REGEXP":case"PATTERN":return"REGEX";case"NULL":case"ISNULL":return"IS_NULL";case"NOT_NULL":case"NOTNULL":case"ISNOTNULL":return"IS_NOT_NULL";default:return t}},Do=e=>{const t=[];if((!e.rule_code||e.rule_code.trim()==="")&&t.push({type:"error",message:"Missing required field: rule_code"}),(!e.description||e.description.trim()==="")&&t.push({type:"error",message:"Missing required field: description"}),(!e.conditions||e.conditions.length===0)&&t.push({type:"error",message:"Missing required field: conditions"}),e.priority<0||e.priority>1e3?t.push({type:"error",message:"Priority must be between 0 and 1000"}):e.priority>900&&t.push({type:"warning",message:`Priority value (${e.priority}) is unusually high`}),e.conditions){const r={},n={};for(const a of e.conditions){const i=_x(a.operator);if(Rx.includes(i)||t.push({type:"error",message:`Unsupported operator: ${a.operator}`,field:a.field}),i==="EQUAL_TO"&&a.value===null&&t.push({type:"warning",message:"Consider using IS_NULL instead of EQUAL_TO for null checks",field:a.field}),i==="NOT_EQUAL_TO"&&a.value===null&&t.push({type:"warning",message:"Consider using IS_NOT_NULL instead of NOT_EQUAL_TO for null checks",field:a.field}),i==="EQUAL_TO"){const o=a.field;n[o]||(n[o]=[]),n[o].push(a.value),r[o]=(r[o]||0)+1}}for(const[a,i]of Object.entries(r))if(i>1){const o=n[a]||[];[...new Set(o.map(c=>JSON.stringify(c)))].length>1?t.push({type:"error",message:`Contradictory conditions: field '${a}' cannot equal multiple different values simultaneously. This rule will never match any event.`,field:a}):t.push({type:"warning",message:`Duplicate EQUAL_TO condition on field '${a}' with the same value`,field:a})}}return e.enabled===!1&&t.push({type:"warning",message:'Rule is disabled and will not be evaluated. Click "Activate" to enable it.'}),e.compilation_status==="ERROR"?t.push({type:"error",message:"Rule failed to compile - check conditions for errors"}):e.compilation_status==="WARNING"?t.push({type:"warning",message:"Rule has contradictory conditions and won't match any events. Check for: conflicting EQUAL_TO values on the same field, non-overlapping IS_ANY_OF lists, or inverted BETWEEN ranges."}):(!e.compilation_status||e.compilation_status==="PENDING")&&t.push({type:"warning",message:"Rule has not been compiled yet - it won't be active until compiled"}),t};var Ox=Symbol.for("react.lazy"),Dn=xi[" use ".trim().toString()];function kx(e){return typeof e=="object"&&e!==null&&"then"in e}function Rd(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ox&&"_payload"in e&&kx(e._payload)}function Px(e){const t=Ix(e),r=h.forwardRef((n,a)=>{let{children:i,...o}=n;Rd(i)&&typeof Dn=="function"&&(i=Dn(i._payload));const l=h.Children.toArray(i),c=l.find(Lx);if(c){const d=c.props.children,u=l.map(p=>p===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:p);return s.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function Ix(e){const t=h.forwardRef((r,n)=>{let{children:a,...i}=r;if(Rd(a)&&typeof Dn=="function"&&(a=Dn(a._payload)),h.isValidElement(a)){const o=Fx(a),l=Dx(i,a.props);return a.type!==h.Fragment&&(l.ref=n?pi(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $x=Symbol("radix.slottable");function Lx(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$x}function Dx(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Fx(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var zx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mx=zx.reduce((e,t)=>{const r=Px(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Ux="Label",_d=h.forwardRef((e,t)=>s.jsx(Mx.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));_d.displayName=Ux;var Bx=_d;function We({className:e,...t}){return s.jsx(Bx,{"data-slot":"label",className:Se("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function qx(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o);l.displayName=i+"Context";const c=r.length;r=[...r,o];const d=p=>{var v;const{scope:x,children:f,...y}=p,g=((v=x==null?void 0:x[e])==null?void 0:v[c])||l,m=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:m,children:f})};d.displayName=i+"Provider";function u(p,x){var g;const f=((g=x==null?void 0:x[e])==null?void 0:g[c])||l,y=h.useContext(f);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Hx(a,...t)]}function Hx(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Vx=Symbol.for("react.lazy"),Fn=xi[" use ".trim().toString()];function Gx(e){return typeof e=="object"&&e!==null&&"then"in e}function Od(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Vx&&"_payload"in e&&Gx(e._payload)}function Qx(e){const t=Wx(e),r=h.forwardRef((n,a)=>{let{children:i,...o}=n;Od(i)&&typeof Fn=="function"&&(i=Fn(i._payload));const l=h.Children.toArray(i),c=l.find(Jx);if(c){const d=c.props.children,u=l.map(p=>p===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:p);return s.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function Wx(e){const t=h.forwardRef((r,n)=>{let{children:a,...i}=r;if(Od(a)&&typeof Fn=="function"&&(a=Fn(a._payload)),h.isValidElement(a)){const o=Xx(a),l=Yx(i,a.props);return a.type!==h.Fragment&&(l.ref=n?pi(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Kx=Symbol("radix.slottable");function Jx(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Kx}function Yx(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Xx(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Zx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kd=Zx.reduce((e,t)=>{const r=Qx(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Ii="Progress",$i=100,[eg]=qx(Ii),[tg,sg]=eg(Ii),Pd=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=rg,...o}=e;(a||a===0)&&!Fo(a)&&console.error(ng(`${a}`,"Progress"));const l=Fo(a)?a:$i;n!==null&&!zo(n,l)&&console.error(ag(`${n}`,"Progress"));const c=zo(n,l)?n:null,d=zn(c)?i(c,l):void 0;return s.jsx(tg,{scope:r,value:c,max:l,children:s.jsx(kd.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zn(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Ld(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});Pd.displayName=Ii;var Id="ProgressIndicator",$d=h.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=sg(Id,r);return s.jsx(kd.div,{"data-state":Ld(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});$d.displayName=Id;function rg(e,t){return`${Math.round(e/t*100)}%`}function Ld(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zn(e){return typeof e=="number"}function Fo(e){return zn(e)&&!isNaN(e)&&e>0}function zo(e,t){return zn(e)&&!isNaN(e)&&e<=t&&e>=0}function ng(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${$i}\`.`}function ag(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${$i} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ig=Pd,og=$d;function lg({className:e,value:t,...r}){return s.jsx(ig,{"data-slot":"progress",className:Se("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:s.jsx(og,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const cg=async e=>Xt("/rules/import/validate",e),dg=async e=>Xt("/rules/import/execute",e),Mo=new Set(["EQUAL_TO","NOT_EQUAL_TO","IS_ANY_OF","IS_NONE_OF","GREATER_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","BETWEEN","CONTAINS","STARTS_WITH","ENDS_WITH","REGEX","IS_NULL","IS_NOT_NULL"]),ug=e=>{if(!e)return"";const t=e.toUpperCase().trim();switch(t){case"EQUALS":case"EQ":case"==":case"=":case"IS_EQUAL_TO":case"IS_EQUAL":return"EQUAL_TO";case"NOT_EQUALS":case"NE":case"NEQ":case"!=":case"<>":case"IS_NOT_EQUAL_TO":case"IS_NOT_EQUAL":return"NOT_EQUAL_TO";case"GT":case">":case"IS_GREATER_THAN":case"GREATER":return"GREATER_THAN";case"GTE":case"GE":case">=":case"IS_GREATER_THAN_OR_EQUAL":return"GREATER_THAN_OR_EQUAL";case"LT":case"<":case"IS_LESS_THAN":case"LESS":return"LESS_THAN";case"LTE":case"LE":case"<=":case"IS_LESS_THAN_OR_EQUAL":return"LESS_THAN_OR_EQUAL";case"IN_RANGE":case"RANGE":return"BETWEEN";case"IN":case"ANY_OF":case"ONE_OF":return"IS_ANY_OF";case"NOT_IN":case"NONE_OF":return"IS_NONE_OF";case"HAS":case"INCLUDES":return"CONTAINS";case"BEGINS_WITH":case"PREFIX":return"STARTS_WITH";case"SUFFIX":return"ENDS_WITH";case"MATCHES":case"REGEXP":case"PATTERN":return"REGEX";case"NULL":case"ISNULL":return"IS_NULL";case"NOT_NULL":case"NOTNULL":case"ISNOTNULL":return"IS_NOT_NULL";default:return t}},hg=e=>{const t=[];if(!e.conditions||e.conditions.length===0)return t;for(const r of e.conditions){if(!r.operator)continue;const n=ug(r.operator);Mo.has(n)||t.push(`Unsupported operator "${r.operator}" on field "${r.field}". Supported operators: ${Array.from(Mo).join(", ")}`)}return t};function fg({open:e,onOpenChange:t}){const r=Gn(),[n,a]=h.useState("upload"),[i,o]=h.useState("file"),[l,c]=h.useState("json"),[d,u]=h.useState(null),[p,x]=h.useState(""),[f,y]=h.useState([]),[g,m]=h.useState(new Set),[v,j]=h.useState("SKIP"),[E,A]=h.useState(0),[T,k]=h.useState({valid:0,warnings:0,errors:0}),N=h.useRef(null),[R,B]=h.useState(!1),[L,F]=h.useState("ALL"),[q,fe]=h.useState(!0),[oe,je]=h.useState(!0),[Y,ye]=h.useState(null),ve=zr({mutationFn:cg,onSuccess:O=>{y(O.rules),k(O.stats);const X=new Set(O.rules.filter(Te=>Te.status!=="ERROR").map(Te=>Te.importId));m(X),a("configure"),ee.success("Validation complete")},onError:O=>{ee.error(`Validation failed: ${O.message}`),a("upload")}}),S=zr({mutationFn:dg,onSuccess:async O=>{if(ee.success(`Successfully imported ${O.imported} rules`),O.skipped>0&&ee.info(`Skipped ${O.skipped} rules`),O.failed>0&&ee.error(`Failed to import ${O.failed} rules`),r.invalidateQueries({queryKey:["rules"]}),q&&O.imported>0){a("compiling");try{const X=await Td();ye({success:X.success,message:X.success?`Compiled ${X.compiledRules} rules in ${X.compilationTimeMs}ms`:X.message||X.error||"Compilation failed"}),X.success?ee.success("Rules compiled successfully"):ee.warning("Compilation completed with issues"),r.invalidateQueries({queryKey:["rules"]})}catch(X){ye({success:!1,message:X instanceof Error?X.message:"Compilation failed"}),ee.error("Failed to compile rules")}}a("complete")},onError:O=>{ee.error(`Import failed: ${O.message}`),a("configure")}}),w=O=>{var Te;u(O);const X=(Te=O.name.split(".").pop())==null?void 0:Te.toLowerCase();X==="jsonl"?c("jsonl"):X==="json"&&c("json"),ee.success(`File selected: ${O.name}`)},P=O=>{O.preventDefault(),B(!1);const X=O.dataTransfer.files[0];X&&w(X)},I=O=>{O.preventDefault(),B(!0)},D=()=>{B(!1)},z=async()=>{a("validate");try{let O="";if(i==="file"&&d?O=await d.text():i==="paste"&&(O=p),!O.trim()){ee.error("No content to import"),a("upload");return}let X=[];if(l==="json"){const _e=JSON.parse(O);X=Array.isArray(_e)?_e:[_e]}else l==="jsonl"&&(X=O.split(`
`).filter(jt=>jt.trim()).map((jt,es)=>{try{return JSON.parse(jt)}catch(gt){throw new Error(`Invalid JSON on line ${es+1}: ${gt.message}`)}}));const Te=[];for(const _e of X){const jt=hg(_e);jt.length>0&&Te.push(`Rule "${_e.rule_code||"unknown"}": ${jt.join("; ")}`)}if(Te.length>0){const _e=Te.length;ee.error(`${_e} rule${_e>1?"s have":" has"} unsupported operators`,{description:Te.slice(0,3).join(`
`)+(Te.length>3?`
...and ${Te.length-3} more`:""),duration:1e4}),a("upload");return}ve.mutate({format:l,content:O,rules:X})}catch(O){ee.error(`Failed to parse ${l.toUpperCase()}: ${O.message}`),a("upload")}},H=async()=>{a("importing"),A(0);const O=f.filter(_e=>g.has(_e.importId)).map(_e=>_e.rule),X=Array.from(g),Te=setInterval(()=>{A(_e=>Math.min(_e+10,90))},200);try{await S.mutateAsync({importIds:X,rules:O,conflictResolution:v,enableDisabledRules:oe}),A(100)}finally{clearInterval(Te)}},$=()=>{a("upload"),u(null),x(""),y([]),m(new Set),A(0),k({valid:0,warnings:0,errors:0}),fe(!0),je(!0),ye(null)},M=O=>{const X=new Set(g);X.has(O)?X.delete(O):X.add(O),m(X)},G=O=>{switch(O){case"json":return s.jsx(kp,{className:"size-4"});case"jsonl":return s.jsx(Ys,{className:"size-4"});default:return s.jsx(Pp,{className:"size-4"})}},te=O=>{switch(O){case"VALID":return s.jsx(Me,{className:"size-4 text-green-600"});case"WARNING":return s.jsx(Ue,{className:"size-4 text-yellow-600"});case"ERROR":return s.jsx(ys,{className:"size-4 text-red-600"});default:return s.jsx(mr,{className:"size-4 text-gray-400"})}},se=O=>{switch(O){case"VALID":return"default";case"WARNING":return"secondary";case"ERROR":return"destructive";default:return"outline"}},U=O=>O.includes("Missing required field")?{title:"Missing Required Field",explanation:"This field is mandatory for all rules. The rule cannot be imported without it.",severity:"error"}:O.includes("Priority must be between 0 and 1000")?{title:"Invalid Priority Range",explanation:"Priority must be a number between 0 (lowest) and 1000 (highest). Adjust the priority value to continue.",severity:"error"}:O.includes("Unsupported operator")?{title:"Unsupported Operator",explanation:"This condition uses an operator that is not supported by the rule engine. Please use one of the supported operators: EQUAL_TO, NOT_EQUAL_TO, IS_ANY_OF, IS_NONE_OF, GREATER_THAN, GREATER_THAN_OR_EQUAL, LESS_THAN, LESS_THAN_OR_EQUAL, BETWEEN, CONTAINS, STARTS_WITH, ENDS_WITH, REGEX, IS_NULL, IS_NOT_NULL.",severity:"error"}:O.includes("No vectorized conditions")?{title:"Performance Warning",explanation:"This rule uses only non-vectorized operators (GREATER_THAN, LESS_THAN, etc.). For better performance, consider using vectorized operators like EQUAL_TO, IS_ANY_OF where possible.",severity:"warning"}:O.includes("unusually high")?{title:"High Priority Warning",explanation:"This rule has a very high priority (>900). High priority rules are evaluated first and may affect system performance. Verify this is intentional.",severity:"warning"}:{title:"Validation Issue",explanation:O,severity:O.includes("Missing")?"error":"warning"},ae=f.some(O=>O.rule.enabled===!1),ge=f.filter(O=>O.rule.enabled===!1),De=f.filter(O=>L==="ALL"?!0:O.status===L);return s.jsx($n,{open:e,onOpenChange:t,children:s.jsxs(Ur,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(Br,{children:[s.jsxs(qr,{className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"size-5"}),"Import Rules"]}),s.jsx(Hr,{children:"Import rules from JSON or JSONL files"})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:`flex items-center gap-2 ${n==="upload"?"text-blue-600 font-medium":"text-green-600"}`,children:[n!=="upload"?s.jsx(Me,{className:"size-4"}):s.jsx("div",{className:"size-4 rounded-full border-2 border-current"}),s.jsx("span",{className:"text-sm",children:"Upload"})]}),s.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-2"}),s.jsxs("div",{className:`flex items-center gap-2 ${n==="validate"||n==="configure"||n==="importing"||n==="compiling"||n==="complete"?"text-blue-600 font-medium":"text-gray-400"}`,children:[n==="importing"||n==="compiling"||n==="complete"?s.jsx(Me,{className:"size-4"}):s.jsx("div",{className:"size-4 rounded-full border-2 border-current"}),s.jsx("span",{className:"text-sm",children:"Validate"})]}),s.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-2"}),s.jsxs("div",{className:`flex items-center gap-2 ${n==="configure"||n==="importing"||n==="compiling"||n==="complete"?"text-blue-600 font-medium":"text-gray-400"}`,children:[n==="importing"||n==="compiling"||n==="complete"?s.jsx(Me,{className:"size-4"}):s.jsx("div",{className:"size-4 rounded-full border-2 border-current"}),s.jsx("span",{className:"text-sm",children:"Configure"})]}),s.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-2"}),s.jsxs("div",{className:`flex items-center gap-2 ${n==="importing"||n==="compiling"||n==="complete"?"text-blue-600 font-medium":"text-gray-400"}`,children:[n==="compiling"||n==="complete"?s.jsx(Me,{className:"size-4"}):s.jsx("div",{className:"size-4 rounded-full border-2 border-current"}),s.jsx("span",{className:"text-sm",children:"Import"})]}),q&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-2"}),s.jsxs("div",{className:`flex items-center gap-2 ${n==="compiling"||n==="complete"?"text-blue-600 font-medium":"text-gray-400"}`,children:[n==="complete"?s.jsx(Me,{className:"size-4"}):s.jsx("div",{className:"size-4 rounded-full border-2 border-current"}),s.jsx("span",{className:"text-sm",children:"Compile"})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto",children:[n==="upload"&&s.jsx("div",{className:"space-y-6 p-4",children:s.jsxs(Wn,{value:i,onValueChange:O=>o(O),children:[s.jsxs(Xr,{className:"grid w-full grid-cols-2",children:[s.jsx(rt,{value:"file",children:"Upload File"}),s.jsx(rt,{value:"paste",children:"Paste Content"})]}),s.jsxs(nt,{value:"file",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{children:"File Format"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["json","jsonl"].map(O=>s.jsx("button",{onClick:()=>c(O),className:`
                            p-4 border-2 rounded-lg transition-all
                            ${l===O?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}
                          `,children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[G(O),s.jsx("span",{className:"font-medium uppercase text-sm",children:O})]})},O))})]}),s.jsxs("div",{onDrop:P,onDragOver:I,onDragLeave:D,className:`
                      border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all
                      ${R?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
                    `,onClick:()=>{var O;return(O=N.current)==null?void 0:O.click()},children:[s.jsx("input",{ref:N,type:"file",accept:".json,.jsonl",className:"hidden",onChange:O=>{var Te;const X=(Te=O.target.files)==null?void 0:Te[0];X&&w(X)}}),d?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[s.jsx(Me,{className:"size-5"}),s.jsx("span",{className:"font-medium",children:d.name})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(d.size/1024).toFixed(2)," KB"]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(Xa,{className:"size-8 mx-auto text-gray-400"}),s.jsx("p",{className:"font-medium",children:"Drop file here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Supports .json, .jsonl files"})]})]})]}),s.jsxs(nt,{value:"paste",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{children:"File Format"}),s.jsxs(ft,{value:l,onValueChange:O=>c(O),children:[s.jsx(pt,{children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"json",children:"JSON"}),s.jsx(Ne,{value:"jsonl",children:"JSONL"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{children:"Paste Rule Content"}),s.jsx("textarea",{value:p,onChange:O=>x(O.target.value),className:"w-full h-64 p-3 border rounded-lg font-mono text-sm",placeholder:`Paste your ${l.toUpperCase()} content here...`})]})]})]})}),n==="validate"&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin size-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"text-lg font-medium",children:"Validating rules..."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Checking for errors and conflicts"})]})}),n==="configure"&&s.jsxs("div",{className:"space-y-6 p-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(me,{children:s.jsx(pe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:T.valid}),s.jsx("p",{className:"text-sm text-gray-600",children:"Valid"})]}),s.jsx(Me,{className:"size-8 text-green-600"})]})})}),s.jsx(me,{children:s.jsx(pe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:T.warnings}),s.jsx("p",{className:"text-sm text-gray-600",children:"Warnings"})]}),s.jsx(Ue,{className:"size-8 text-yellow-600"})]})})}),s.jsx(me,{children:s.jsx(pe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.errors}),s.jsx("p",{className:"text-sm text-gray-600",children:"Errors"})]}),s.jsx(ys,{className:"size-8 text-red-600"})]})})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{children:"Conflict Resolution Strategy"}),s.jsxs(ft,{value:v,onValueChange:O=>j(O),children:[s.jsx(pt,{children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"SKIP",children:"Skip - Keep existing rules (safest)"}),s.jsx(Ne,{value:"OVERWRITE",children:"Overwrite - Replace existing rules"}),s.jsx(Ne,{value:"RENAME",children:"Rename - Auto-rename imported rules"})]})]})]}),ae&&s.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[s.jsx(Os,{id:"enable-disabled-rules",checked:oe,onCheckedChange:O=>je(O===!0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"enable-disabled-rules",className:"font-medium cursor-pointer flex items-center gap-2",children:[s.jsx(Ue,{className:"size-4 text-orange-600"}),"Enable ",ge.length," disabled rule",ge.length>1?"s":""," during import"]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ge.length," rule",ge.length>1?"s have":" has"," ",s.jsx("code",{className:"bg-orange-100 px-1 rounded text-xs",children:"enabled: false"})," in the import file.",oe?" These rules will be automatically enabled so they can be compiled and evaluated.":" These rules will remain disabled after import and won't be evaluated until manually activated."]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx(Os,{id:"compile-after-import",checked:q,onCheckedChange:O=>fe(O===!0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"compile-after-import",className:"font-medium cursor-pointer flex items-center gap-2",children:[s.jsx(_t,{className:"size-4 text-blue-600"}),"Compile rules after import"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Automatically compile all rules so they're immediately available for evaluation. If disabled, rules will be saved but won't be active until manually compiled."})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(We,{children:"Filter by Status"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs(W,{size:"sm",variant:L==="ALL"?"default":"outline",onClick:()=>F("ALL"),children:["All (",f.length,")"]}),s.jsxs(W,{size:"sm",variant:L==="VALID"?"default":"outline",onClick:()=>F("VALID"),className:L==="VALID"?"bg-green-600 hover:bg-green-700":"",children:[s.jsx(Me,{className:"size-3 mr-1"}),"Valid (",T.valid,")"]}),s.jsxs(W,{size:"sm",variant:L==="WARNING"?"default":"outline",onClick:()=>F("WARNING"),className:L==="WARNING"?"bg-yellow-600 hover:bg-yellow-700":"",children:[s.jsx(Ue,{className:"size-3 mr-1"}),"Warnings (",T.warnings,")"]}),s.jsxs(W,{size:"sm",variant:L==="ERROR"?"default":"outline",onClick:()=>F("ERROR"),className:L==="ERROR"?"bg-red-600 hover:bg-red-700":"",children:[s.jsx(ys,{className:"size-3 mr-1"}),"Errors (",T.errors,")"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx(We,{children:"Selected"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[g.size," of ",f.length]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{size:"sm",variant:"outline",onClick:()=>{const O=De.filter(X=>X.status!=="ERROR").map(X=>X.importId);m(new Set(O))},children:"Select All Valid"}),s.jsx(W,{size:"sm",variant:"outline",onClick:()=>m(new Set),children:"Deselect All"})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(ks,{className:"h-96 border rounded-lg",children:s.jsx("div",{className:"p-4 space-y-3",children:De.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No rules match the selected filter"}):De.map(O=>s.jsx(me,{className:`
                        ${O.status==="ERROR"?"opacity-50":""}
                      `,children:s.jsx(pe,{className:"pt-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Os,{checked:g.has(O.importId),onCheckedChange:()=>M(O.importId),disabled:O.status==="ERROR"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[te(O.status),s.jsx("span",{className:"font-medium",children:O.rule.rule_code}),s.jsx(ie,{variant:se(O.status),children:O.status}),O.rule.enabled===!1&&s.jsx(ie,{variant:"outline",className:oe?"text-blue-600 border-blue-300 bg-blue-50":"text-orange-600 border-orange-300 bg-orange-50",children:oe?"Will be enabled":"Stays disabled"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.rule.description})]}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Priority: ",O.rule.priority]})]}),O.issues.length>0&&s.jsx("div",{className:"space-y-2",children:O.issues.map((X,Te)=>{const _e=U(X);return s.jsx(qe,{variant:O.status==="ERROR"?"destructive":"default",children:s.jsx(Qe,{className:"space-y-1",children:s.jsxs("div",{className:"flex items-start gap-2",children:[_e.severity==="error"?s.jsx(ys,{className:"size-4 mt-0.5 flex-shrink-0"}):s.jsx(Ue,{className:"size-4 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm",children:_e.title}),s.jsx("p",{className:"text-xs opacity-90 mt-1",children:_e.explanation}),s.jsx("p",{className:"text-xs opacity-70 mt-1 font-mono",children:X})]})]})})},Te)})}),O.conflict&&s.jsx(qe,{className:"bg-yellow-50 border-yellow-200",children:s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(mr,{className:"size-4 mt-0.5 flex-shrink-0 text-yellow-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-yellow-900",children:"Duplicate Rule Code"}),s.jsxs("p",{className:"text-xs text-yellow-800 mt-1",children:["A rule with code ",s.jsx("span",{className:"font-mono font-semibold",children:O.conflict.existingRuleCode})," already exists. Choose a conflict resolution strategy above:"]}),s.jsxs("ul",{className:"text-xs text-yellow-800 mt-2 space-y-1 ml-4",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"SKIP:"})," Keep existing rule, skip this import"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"OVERWRITE:"})," Replace existing rule with this one"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"RENAME:"})," Import with auto-renamed code (",O.rule.rule_code,"_imported_1)"]})]})]})]})})}),O.rule.tags&&O.rule.tags.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:O.rule.tags.map(X=>s.jsx(ie,{variant:"outline",className:"text-xs",children:X},X))})]})]})})},O.importId))})})})]}),n==="importing"&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center space-y-4 w-full max-w-md px-4",children:[s.jsx("div",{className:"size-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto animate-spin"}),s.jsx("p",{className:"text-lg font-medium",children:"Importing rules..."}),s.jsx(lg,{value:E,className:"w-full"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round(E),"% complete"]})]})}),n==="compiling"&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"size-12 text-blue-500 mx-auto"}),s.jsx(bs,{className:"size-16 text-blue-500 mx-auto absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-spin"})]}),s.jsx("p",{className:"text-lg font-medium",children:"Compiling rules..."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Building optimized rule engine model"})]})}),n==="complete"&&s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Me,{className:"size-16 text-green-600 mx-auto"}),s.jsx("p",{className:"text-xl font-semibold",children:"Import Complete!"}),s.jsxs("p",{className:"text-gray-600",children:["Successfully imported ",g.size," rules"]}),Y&&s.jsxs("div",{className:`mt-4 p-4 rounded-lg ${Y.success?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Y.success?s.jsx(_t,{className:"size-5 text-green-600"}):s.jsx(Ue,{className:"size-5 text-yellow-600"}),s.jsx("span",{className:`font-medium ${Y.success?"text-green-800":"text-yellow-800"}`,children:Y.success?"Compilation successful":"Compilation completed with issues"})]}),s.jsx("p",{className:`text-sm mt-1 ${Y.success?"text-green-700":"text-yellow-700"}`,children:Y.message})]})]})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsx("div",{children:n!=="upload"&&n!=="complete"&&n!=="compiling"&&s.jsx(W,{variant:"outline",onClick:$,children:"Cancel"})}),s.jsxs("div",{className:"flex gap-2",children:[n==="upload"&&s.jsx(W,{onClick:z,disabled:!d&&!p.trim(),children:"Continue"}),n==="configure"&&s.jsxs(W,{onClick:H,disabled:g.size===0,children:["Import ",g.size," Rules"]}),n==="complete"&&s.jsx(W,{onClick:()=>{$(),t(!1)},children:"Close"})]})]})]})})}const Mn=e=>{if(typeof e>"u"||e===null||typeof e=="bigint"||Number.isNaN(e)||e===1/0||e===-1/0)return;if(["string","number","boolean"].includes(typeof e))return e;if(Array.isArray(e))return e.map(Mn).filter(r=>typeof r<"u");const t={};for(const[r,n]of Object.entries(e)){const a=Mn(n);typeof a<"u"&&(t[r]=a)}return t},he=(e,t,r=!1)=>{if(!Array.isArray(e)||!Array.isArray(t))throw new Error("Both arguments should be arrays.");const n=e.length,a=t.length,i=n+a,o=new Array(i);if(r){for(let l=0;l<a;l++)o[l]=t[a-l-1];for(let l=0;l<n;l++)o[l+a]=e[l];return o}for(let l=0;l<n;l++)o[l]=e[l];for(let l=0;l<a;l++)o[l+n]=t[l];return o},ti=(e,t=new Map)=>{if(typeof e!="object"||e===null)return!1;if(t.has(e))return!0;if(t.set(e,!0),Array.isArray(e)){for(let r=0;r<e.length;r++)if(ti(e[r],t))return!0;return!1}for(const r in e)if(ti(e[r],t))return!0;return!1},ze=(e,t,r,n=1/0,a)=>{if(!e||typeof e!="object"){let o;if(!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&typeof e!="bigint"&&(o=JSON.stringify(e,t,r)),o===void 0)switch(a){case ci.throw:throw new Error(`Value is not valid in JSON, got ${String(e)}`);case ci.stringify:return mg(e);default:throw new Error("Should not reach here, please report this bug.")}return o}const i=n<1?'"..."':Array.isArray(e)?`[${e.map(o=>ze(o,t,r,n-1,a)).join(",")}]`:`{${Object.keys(e).map(o=>`"${o}": ${ze(e[o],t,r,n-1,a)}`).join(", ")}}`;return JSON.stringify(JSON.parse(i),t,r)},mg=e=>e===void 0?"undefined":e===1/0?"Infinity":e===-1/0?"-Infinity":Number.isNaN(e)?"NaN":typeof e=="bigint"?`${e}n`:String(e),Ge=(e,t=1/0,r=!1,n=ci.stringify)=>e===null?"null":Array.isArray(e)||typeof e=="object"?ze(e,void 0,r?1:void 0,t,n):ze(e,void 0,void 0,void 0,n),Uo=e=>typeof e=="boolean"?0:typeof e=="number"?1:typeof e=="string"?2:e===null?3:Array.isArray(e)?4:typeof e=="object"?5:typeof e=="symbol"?6:typeof e=="function"?7:typeof e=="bigint"?8:-1,nn=(e,t,r)=>{var l,c;const n=(l=r.keyOrdersMap)==null?void 0:l.get(e),a=(c=r.keyOrdersMap)==null?void 0:c.get(t);if(n!==void 0&&a!==void 0)return n-a;const i=Uo(e),o=Uo(t);if(i!==o)return i-o;if(e===null&&t===null||Array.isArray(e)&&Array.isArray(t)||i===5&&o===5)return 0;switch(typeof e){case"number":return Number.isNaN(e)&&Number.isNaN(t)||e===1/0&&t===1/0||e===-1/0&&t===-1/0?0:e-t;case"string":return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e<t?-1:e>t?1:0;case"boolean":return+e-+t;case"symbol":case"function":return String(e).localeCompare(String(t))}if(typeof e=="bigint"&&typeof t=="bigint"){const d=BigInt(e)-BigInt(t);return d<0?-1:d>0?1:0}return String(e).localeCompare(String(t))},Ke=e=>Array.isArray(e)?"array":e===null?"null":typeof e,zt=(e,t,r,n,a,i,o,l)=>{var p,x,f,y,g,m,v,j,E,A,T,k;const c={ignoreCase:l.ignoreCase},d=Ge(a,l.maxDepth,!0,l.undefinedBehavior).split(`
`),u=Ge(i,l.maxDepth,!0,l.undefinedBehavior).split(`
`);if(nn(a,i,c)!==0)if(l.showModifications){const N=Math.max(d.length,u.length);for(let R=d.length;R<N;R++)d.push("");for(let R=u.length;R<N;R++)u.push("");e.push({level:o,type:"modify",text:r?`"${r}": ${d[0]}`:d[0]});for(let R=1;R<d.length;R++)e.push({level:o+(((x=(p=d[R].match(/^\s+/))==null?void 0:p[0])==null?void 0:x.length)||0),type:"modify",text:d[R].replace(/^\s+/,"").replace(/,$/g,"")});for(let R=d.length;R<N;R++)e.push({level:o,type:"equal",text:""});t.push({level:o,type:"modify",text:n?`"${n}": ${u[0]}`:u[0]});for(let R=1;R<u.length;R++)t.push({level:o+(((y=(f=u[R].match(/^\s+/))==null?void 0:f[0])==null?void 0:y.length)||0),type:"modify",text:u[R].replace(/^\s+/,"").replace(/,$/g,"")});for(let R=u.length;R<N;R++)t.push({level:o,type:"equal",text:""})}else{e.push({level:o,type:"remove",text:r?`"${r}": ${d[0]}`:d[0]});for(let N=1;N<d.length;N++)e.push({level:o+(((m=(g=d[N].match(/^\s+/))==null?void 0:g[0])==null?void 0:m.length)||0),type:"remove",text:d[N].replace(/^\s+/,"").replace(/,$/g,"")});for(let N=0;N<u.length;N++)e.push({level:o,type:"equal",text:""});for(let N=0;N<d.length;N++)t.push({level:o,type:"equal",text:""});t.push({level:o,type:"add",text:n?`"${n}": ${u[0]}`:u[0]});for(let N=1;N<u.length;N++)t.push({level:o+(((j=(v=u[N].match(/^\s+/))==null?void 0:v[0])==null?void 0:j.length)||0),type:"add",text:u[N].replace(/^\s+/,"").replace(/,$/g,"")})}else{const N=Math.max(d.length,u.length);for(let R=d.length;R<N;R++)d.push("");for(let R=u.length;R<N;R++)u.push("");e.push({level:o,type:"equal",text:r?`"${r}": ${d[0]}`:d[0]});for(let R=1;R<d.length;R++)e.push({level:o+(((A=(E=d[R].match(/^\s+/))==null?void 0:E[0])==null?void 0:A.length)||0),type:"equal",text:d[R].replace(/^\s+/,"").replace(/,$/g,"")});t.push({level:o,type:"equal",text:n?`"${n}": ${u[0]}`:u[0]});for(let R=1;R<u.length;R++)t.push({level:o+(((k=(T=u[R].match(/^\s+/))==null?void 0:T[0])==null?void 0:k.length)||0),type:"equal",text:u[R].replace(/^\s+/,"").replace(/,$/g,"")})}},Bo=(e,t)=>e.sort((r,n)=>nn(r,n,{ignoreCase:t.ignoreCaseForKey})),Js=(e,t,r=1,n,a)=>{var p,x,f,y,g,m,v,j,E,A,T,k;if(r>(n.maxDepth||1/0))return[[{level:r,type:"equal",text:"..."}],[{level:r,type:"equal",text:"..."}]];let i=[],o=[];if(e===null&&t===null||e===void 0&&t===void 0)return[i,o];if(e==null){const N=ze(t,void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let R=0;R<N.length;R++)i.push({level:r,type:"equal",text:""}),o.push({level:r+(((x=(p=N[R].match(/^\s+/))==null?void 0:p[0])==null?void 0:x.length)||0),type:"add",text:N[R].replace(/^\s+/,"").replace(/,$/g,"")});return[i,o]}else if(t==null){const N=ze(e,void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let R=0;R<N.length;R++)i.push({level:r+(((y=(f=N[R].match(/^\s+/))==null?void 0:f[0])==null?void 0:y.length)||0),type:"remove",text:N[R].replace(/^\s+/,"").replace(/,$/g,"")}),o.push({level:r,type:"equal",text:""});return[i,o]}const l=Object.keys(e),c=Object.keys(t),d=new Map;if(!n.preserveKeyOrder)Bo(l,n),Bo(c,n);else if(n.preserveKeyOrder==="before"){for(let N=0;N<l.length;N++)d.set(l[N],N);for(let N=0;N<c.length;N++)d.has(c[N])||d.set(c[N],l.length+N);c.sort((N,R)=>d.get(N)-d.get(R))}else if(n.preserveKeyOrder==="after"){for(let N=0;N<c.length;N++)d.set(c[N],N);for(let N=0;N<l.length;N++)d.has(l[N])||d.set(l[N],c.length+N);l.sort((N,R)=>d.get(N)-d.get(R))}const u={ignoreCase:n.ignoreCaseForKey,keyOrdersMap:d};for(;l.length||c.length;){const N=l[0],R=c[0],B=nn(N,R,u);if(B===0)if(Ke(e[N])!==Ke(t[R]))zt(i,o,N,R,e[N],t[R],r,n);else if(Array.isArray(e[N])){const L=[...e[N]],F=[...t[R]],[q,fe]=a(L,F,N,R,r,n,[],[]);i=he(i,q),o=he(o,fe)}else if(e[N]===null)i.push({level:r,type:"equal",text:`"${N}": null`}),o.push({level:r,type:"equal",text:`"${R}": null`});else if(typeof e[N]=="object"){const L=Js(e[N],t[R],r+1,n,a);i.push({level:r,type:"equal",text:`"${N}": {`}),i=he(i,L[0]),i.push({level:r,type:"equal",text:"}"}),o.push({level:r,type:"equal",text:`"${R}": {`}),o=he(o,L[1]),o.push({level:r,type:"equal",text:"}"})}else zt(i,o,N,R,e[N],t[R],r,n);else if(l.length&&c.length)if(B<0){const L=ze(e[N],void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let F=0;F<L.length;F++){const q=L[F].replace(/^\s+/,"").replace(/,$/g,"");i.push({level:r+(((m=(g=L[F].match(/^\s+/))==null?void 0:g[0])==null?void 0:m.length)||0),type:"remove",text:F?q:`"${N}": ${q}`}),o.push({level:r,type:"equal",text:""})}}else{const L=ze(t[R],void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let F=0;F<L.length;F++){const q=L[F].replace(/^\s+/,"").replace(/,$/g,"");i.push({level:r,type:"equal",text:""}),o.push({level:r+(((j=(v=L[F].match(/^\s+/))==null?void 0:v[0])==null?void 0:j.length)||0),type:"add",text:F?q:`"${R}": ${q}`})}}else if(l.length){const L=ze(e[N],void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let F=0;F<L.length;F++){const q=L[F].replace(/^\s+/,"").replace(/,$/g,"");i.push({level:r+(((A=(E=L[F].match(/^\s+/))==null?void 0:E[0])==null?void 0:A.length)||0),type:"remove",text:F?q:`"${N}": ${q}`}),o.push({level:r,type:"equal",text:""})}}else if(c.length){const L=ze(t[R],void 0,1,void 0,n.undefinedBehavior).split(`
`);for(let F=0;F<L.length;F++){const q=L[F].replace(/^\s+/,"").replace(/,$/g,"");i.push({level:r,type:"equal",text:""}),o.push({level:r+(((k=(T=L[F].match(/^\s+/))==null?void 0:T[0])==null?void 0:k.length)||0),type:"add",text:F?q:`"${R}": ${q}`})}}N?R?B===0?(l.shift(),c.shift()):B<0?l.shift():c.shift():l.shift():c.shift()}if(i.length!==o.length)throw new Error("Diff error: length not match for left & right, please report a bug with your data.");return[i,o]};function pg(){this.__data__=[],this.size=0}var xg=pg;function gg(e,t){return e===t||e!==e&&t!==t}var Dd=gg,yg=Dd;function vg(e,t){for(var r=e.length;r--;)if(yg(e[r][0],t))return r;return-1}var ia=vg,bg=ia,jg=Array.prototype,Ng=jg.splice;function wg(e){var t=this.__data__,r=bg(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ng.call(t,r,1),--this.size,!0}var Sg=wg,Cg=ia;function Eg(e){var t=this.__data__,r=Cg(t,e);return r<0?void 0:t[r][1]}var Tg=Eg,Ag=ia;function Rg(e){return Ag(this.__data__,e)>-1}var _g=Rg,Og=ia;function kg(e,t){var r=this.__data__,n=Og(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Pg=kg,Ig=xg,$g=Sg,Lg=Tg,Dg=_g,Fg=Pg;function Nr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nr.prototype.clear=Ig;Nr.prototype.delete=$g;Nr.prototype.get=Lg;Nr.prototype.has=Dg;Nr.prototype.set=Fg;var oa=Nr,zg=oa;function Mg(){this.__data__=new zg,this.size=0}var Ug=Mg;function Bg(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var qg=Bg;function Hg(e){return this.__data__.get(e)}var Vg=Hg;function Gg(e){return this.__data__.has(e)}var Qg=Gg,xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wg=typeof xn=="object"&&xn&&xn.Object===Object&&xn,Fd=Wg,Kg=Fd,Jg=typeof self=="object"&&self&&self.Object===Object&&self,Yg=Kg||Jg||Function("return this")(),Zt=Yg,Xg=Zt,Zg=Xg.Symbol,Li=Zg,qo=Li,zd=Object.prototype,ey=zd.hasOwnProperty,ty=zd.toString,Pr=qo?qo.toStringTag:void 0;function sy(e){var t=ey.call(e,Pr),r=e[Pr];try{e[Pr]=void 0;var n=!0}catch{}var a=ty.call(e);return n&&(t?e[Pr]=r:delete e[Pr]),a}var ry=sy,ny=Object.prototype,ay=ny.toString;function iy(e){return ay.call(e)}var oy=iy,Ho=Li,ly=ry,cy=oy,dy="[object Null]",uy="[object Undefined]",Vo=Ho?Ho.toStringTag:void 0;function hy(e){return e==null?e===void 0?uy:dy:Vo&&Vo in Object(e)?ly(e):cy(e)}var la=hy;function fy(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Md=fy,my=la,py=Md,xy="[object AsyncFunction]",gy="[object Function]",yy="[object GeneratorFunction]",vy="[object Proxy]";function by(e){if(!py(e))return!1;var t=my(e);return t==gy||t==yy||t==xy||t==vy}var Ud=by,jy=Zt,Ny=jy["__core-js_shared__"],wy=Ny,Sa=wy,Go=function(){var e=/[^.]+$/.exec(Sa&&Sa.keys&&Sa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sy(e){return!!Go&&Go in e}var Cy=Sy,Ey=Function.prototype,Ty=Ey.toString;function Ay(e){if(e!=null){try{return Ty.call(e)}catch{}try{return e+""}catch{}}return""}var Bd=Ay,Ry=Ud,_y=Cy,Oy=Md,ky=Bd,Py=/[\\^$.*+?()[\]{}|]/g,Iy=/^\[object .+?Constructor\]$/,$y=Function.prototype,Ly=Object.prototype,Dy=$y.toString,Fy=Ly.hasOwnProperty,zy=RegExp("^"+Dy.call(Fy).replace(Py,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function My(e){if(!Oy(e)||_y(e))return!1;var t=Ry(e)?zy:Iy;return t.test(ky(e))}var Uy=My;function By(e,t){return e==null?void 0:e[t]}var qy=By,Hy=Uy,Vy=qy;function Gy(e,t){var r=Vy(e,t);return Hy(r)?r:void 0}var wr=Gy,Qy=wr,Wy=Zt,Ky=Qy(Wy,"Map"),Di=Ky,Jy=wr,Yy=Jy(Object,"create"),ca=Yy,Qo=ca;function Xy(){this.__data__=Qo?Qo(null):{},this.size=0}var Zy=Xy;function ev(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tv=ev,sv=ca,rv="__lodash_hash_undefined__",nv=Object.prototype,av=nv.hasOwnProperty;function iv(e){var t=this.__data__;if(sv){var r=t[e];return r===rv?void 0:r}return av.call(t,e)?t[e]:void 0}var ov=iv,lv=ca,cv=Object.prototype,dv=cv.hasOwnProperty;function uv(e){var t=this.__data__;return lv?t[e]!==void 0:dv.call(t,e)}var hv=uv,fv=ca,mv="__lodash_hash_undefined__";function pv(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fv&&t===void 0?mv:t,this}var xv=pv,gv=Zy,yv=tv,vv=ov,bv=hv,jv=xv;function Sr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sr.prototype.clear=gv;Sr.prototype.delete=yv;Sr.prototype.get=vv;Sr.prototype.has=bv;Sr.prototype.set=jv;var Nv=Sr,Wo=Nv,wv=oa,Sv=Di;function Cv(){this.size=0,this.__data__={hash:new Wo,map:new(Sv||wv),string:new Wo}}var Ev=Cv;function Tv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Av=Tv,Rv=Av;function _v(e,t){var r=e.__data__;return Rv(t)?r[typeof t=="string"?"string":"hash"]:r.map}var da=_v,Ov=da;function kv(e){var t=Ov(this,e).delete(e);return this.size-=t?1:0,t}var Pv=kv,Iv=da;function $v(e){return Iv(this,e).get(e)}var Lv=$v,Dv=da;function Fv(e){return Dv(this,e).has(e)}var zv=Fv,Mv=da;function Uv(e,t){var r=Mv(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Bv=Uv,qv=Ev,Hv=Pv,Vv=Lv,Gv=zv,Qv=Bv;function Cr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Cr.prototype.clear=qv;Cr.prototype.delete=Hv;Cr.prototype.get=Vv;Cr.prototype.has=Gv;Cr.prototype.set=Qv;var qd=Cr,Wv=oa,Kv=Di,Jv=qd,Yv=200;function Xv(e,t){var r=this.__data__;if(r instanceof Wv){var n=r.__data__;if(!Kv||n.length<Yv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Jv(n)}return r.set(e,t),this.size=r.size,this}var Zv=Xv,eb=oa,tb=Ug,sb=qg,rb=Vg,nb=Qg,ab=Zv;function Er(e){var t=this.__data__=new eb(e);this.size=t.size}Er.prototype.clear=tb;Er.prototype.delete=sb;Er.prototype.get=rb;Er.prototype.has=nb;Er.prototype.set=ab;var ib=Er,ob="__lodash_hash_undefined__";function lb(e){return this.__data__.set(e,ob),this}var cb=lb;function db(e){return this.__data__.has(e)}var ub=db,hb=qd,fb=cb,mb=ub;function Un(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new hb;++t<r;)this.add(e[t])}Un.prototype.add=Un.prototype.push=fb;Un.prototype.has=mb;var pb=Un;function xb(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var gb=xb;function yb(e,t){return e.has(t)}var vb=yb,bb=pb,jb=gb,Nb=vb,wb=1,Sb=2;function Cb(e,t,r,n,a,i){var o=r&wb,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var p=-1,x=!0,f=r&Sb?new bb:void 0;for(i.set(e,t),i.set(t,e);++p<l;){var y=e[p],g=t[p];if(n)var m=o?n(g,y,p,t,e,i):n(y,g,p,e,t,i);if(m!==void 0){if(m)continue;x=!1;break}if(f){if(!jb(t,function(v,j){if(!Nb(f,j)&&(y===v||a(y,v,r,n,i)))return f.push(j)})){x=!1;break}}else if(!(y===g||a(y,g,r,n,i))){x=!1;break}}return i.delete(e),i.delete(t),x}var Hd=Cb,Eb=Zt,Tb=Eb.Uint8Array,Ab=Tb;function Rb(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var _b=Rb;function Ob(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var kb=Ob,Ko=Li,Jo=Ab,Pb=Dd,Ib=Hd,$b=_b,Lb=kb,Db=1,Fb=2,zb="[object Boolean]",Mb="[object Date]",Ub="[object Error]",Bb="[object Map]",qb="[object Number]",Hb="[object RegExp]",Vb="[object Set]",Gb="[object String]",Qb="[object Symbol]",Wb="[object ArrayBuffer]",Kb="[object DataView]",Yo=Ko?Ko.prototype:void 0,Ca=Yo?Yo.valueOf:void 0;function Jb(e,t,r,n,a,i,o){switch(r){case Kb:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Wb:return!(e.byteLength!=t.byteLength||!i(new Jo(e),new Jo(t)));case zb:case Mb:case qb:return Pb(+e,+t);case Ub:return e.name==t.name&&e.message==t.message;case Hb:case Gb:return e==t+"";case Bb:var l=$b;case Vb:var c=n&Db;if(l||(l=Lb),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=Fb,o.set(e,t);var u=Ib(l(e),l(t),n,a,i,o);return o.delete(e),u;case Qb:if(Ca)return Ca.call(e)==Ca.call(t)}return!1}var Yb=Jb;function Xb(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Zb=Xb,e0=Array.isArray,Fi=e0,t0=Zb,s0=Fi;function r0(e,t,r){var n=t(e);return s0(e)?n:t0(n,r(e))}var n0=r0;function a0(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var i0=a0;function o0(){return[]}var l0=o0,c0=i0,d0=l0,u0=Object.prototype,h0=u0.propertyIsEnumerable,Xo=Object.getOwnPropertySymbols,f0=Xo?function(e){return e==null?[]:(e=Object(e),c0(Xo(e),function(t){return h0.call(e,t)}))}:d0,m0=f0;function p0(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var x0=p0;function g0(e){return e!=null&&typeof e=="object"}var ua=g0,y0=la,v0=ua,b0="[object Arguments]";function j0(e){return v0(e)&&y0(e)==b0}var N0=j0,Zo=N0,w0=ua,Vd=Object.prototype,S0=Vd.hasOwnProperty,C0=Vd.propertyIsEnumerable,E0=Zo(function(){return arguments}())?Zo:function(e){return w0(e)&&S0.call(e,"callee")&&!C0.call(e,"callee")},T0=E0,Bn={exports:{}};function A0(){return!1}var R0=A0;(function(e,t){var r=Zt,n=R0,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(Bn,Bn.exports);var _0=9007199254740991,O0=/^(?:0|[1-9]\d*)$/;function k0(e,t){var r=typeof e;return t=t??_0,!!t&&(r=="number"||r!="symbol"&&O0.test(e))&&e>-1&&e%1==0&&e<t}var P0=k0,I0=9007199254740991;function $0(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=I0}var Gd=$0,L0=la,D0=Gd,F0=ua,z0="[object Arguments]",M0="[object Array]",U0="[object Boolean]",B0="[object Date]",q0="[object Error]",H0="[object Function]",V0="[object Map]",G0="[object Number]",Q0="[object Object]",W0="[object RegExp]",K0="[object Set]",J0="[object String]",Y0="[object WeakMap]",X0="[object ArrayBuffer]",Z0="[object DataView]",ej="[object Float32Array]",tj="[object Float64Array]",sj="[object Int8Array]",rj="[object Int16Array]",nj="[object Int32Array]",aj="[object Uint8Array]",ij="[object Uint8ClampedArray]",oj="[object Uint16Array]",lj="[object Uint32Array]",ke={};ke[ej]=ke[tj]=ke[sj]=ke[rj]=ke[nj]=ke[aj]=ke[ij]=ke[oj]=ke[lj]=!0;ke[z0]=ke[M0]=ke[X0]=ke[U0]=ke[Z0]=ke[B0]=ke[q0]=ke[H0]=ke[V0]=ke[G0]=ke[Q0]=ke[W0]=ke[K0]=ke[J0]=ke[Y0]=!1;function cj(e){return F0(e)&&D0(e.length)&&!!ke[L0(e)]}var dj=cj;function uj(e){return function(t){return e(t)}}var hj=uj,si={exports:{}};(function(e,t){var r=Fd,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(si,si.exports);var fj=dj,mj=hj,el=si.exports,tl=el&&el.isTypedArray,pj=tl?mj(tl):fj,Qd=pj,xj=x0,gj=T0,yj=Fi,vj=Bn.exports,bj=P0,jj=Qd,Nj=Object.prototype,wj=Nj.hasOwnProperty;function Sj(e,t){var r=yj(e),n=!r&&gj(e),a=!r&&!n&&vj(e),i=!r&&!n&&!a&&jj(e),o=r||n||a||i,l=o?xj(e.length,String):[],c=l.length;for(var d in e)(t||wj.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||bj(d,c)))&&l.push(d);return l}var Cj=Sj,Ej=Object.prototype;function Tj(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ej;return e===r}var Aj=Tj;function Rj(e,t){return function(r){return e(t(r))}}var _j=Rj,Oj=_j,kj=Oj(Object.keys,Object),Pj=kj,Ij=Aj,$j=Pj,Lj=Object.prototype,Dj=Lj.hasOwnProperty;function Fj(e){if(!Ij(e))return $j(e);var t=[];for(var r in Object(e))Dj.call(e,r)&&r!="constructor"&&t.push(r);return t}var zj=Fj,Mj=Ud,Uj=Gd;function Bj(e){return e!=null&&Uj(e.length)&&!Mj(e)}var qj=Bj,Hj=Cj,Vj=zj,Gj=qj;function Qj(e){return Gj(e)?Hj(e):Vj(e)}var Wj=Qj,Kj=n0,Jj=m0,Yj=Wj;function Xj(e){return Kj(e,Yj,Jj)}var Zj=Xj,sl=Zj,eN=1,tN=Object.prototype,sN=tN.hasOwnProperty;function rN(e,t,r,n,a,i){var o=r&eN,l=sl(e),c=l.length,d=sl(t),u=d.length;if(c!=u&&!o)return!1;for(var p=c;p--;){var x=l[p];if(!(o?x in t:sN.call(t,x)))return!1}var f=i.get(e),y=i.get(t);if(f&&y)return f==t&&y==e;var g=!0;i.set(e,t),i.set(t,e);for(var m=o;++p<c;){x=l[p];var v=e[x],j=t[x];if(n)var E=o?n(j,v,x,t,e,i):n(v,j,x,e,t,i);if(!(E===void 0?v===j||a(v,j,r,n,i):E)){g=!1;break}m||(m=x=="constructor")}if(g&&!m){var A=e.constructor,T=t.constructor;A!=T&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof T=="function"&&T instanceof T)&&(g=!1)}return i.delete(e),i.delete(t),g}var nN=rN,aN=wr,iN=Zt,oN=aN(iN,"DataView"),lN=oN,cN=wr,dN=Zt,uN=cN(dN,"Promise"),hN=uN,fN=wr,mN=Zt,pN=fN(mN,"Set"),xN=pN,gN=wr,yN=Zt,vN=gN(yN,"WeakMap"),bN=vN,ri=lN,ni=Di,ai=hN,ii=xN,oi=bN,Wd=la,Tr=Bd,rl="[object Map]",jN="[object Object]",nl="[object Promise]",al="[object Set]",il="[object WeakMap]",ol="[object DataView]",NN=Tr(ri),wN=Tr(ni),SN=Tr(ai),CN=Tr(ii),EN=Tr(oi),As=Wd;(ri&&As(new ri(new ArrayBuffer(1)))!=ol||ni&&As(new ni)!=rl||ai&&As(ai.resolve())!=nl||ii&&As(new ii)!=al||oi&&As(new oi)!=il)&&(As=function(e){var t=Wd(e),r=t==jN?e.constructor:void 0,n=r?Tr(r):"";if(n)switch(n){case NN:return ol;case wN:return rl;case SN:return nl;case CN:return al;case EN:return il}return t});var TN=As,Ea=ib,AN=Hd,RN=Yb,_N=nN,ll=TN,cl=Fi,dl=Bn.exports,ON=Qd,kN=1,ul="[object Arguments]",hl="[object Array]",gn="[object Object]",PN=Object.prototype,fl=PN.hasOwnProperty;function IN(e,t,r,n,a,i){var o=cl(e),l=cl(t),c=o?hl:ll(e),d=l?hl:ll(t);c=c==ul?gn:c,d=d==ul?gn:d;var u=c==gn,p=d==gn,x=c==d;if(x&&dl(e)){if(!dl(t))return!1;o=!0,u=!1}if(x&&!u)return i||(i=new Ea),o||ON(e)?AN(e,t,r,n,a,i):RN(e,t,c,r,n,a,i);if(!(r&kN)){var f=u&&fl.call(e,"__wrapped__"),y=p&&fl.call(t,"__wrapped__");if(f||y){var g=f?e.value():e,m=y?t.value():t;return i||(i=new Ea),a(g,m,r,n,i)}}return x?(i||(i=new Ea),_N(e,t,r,n,a,i)):!1}var $N=IN,LN=$N,ml=ua;function Kd(e,t,r,n,a){return e===t?!0:e==null||t==null||!ml(e)&&!ml(t)?e!==e&&t!==t:LN(e,t,r,n,Kd,a)}var DN=Kd,FN=DN;function zN(e,t,r){r=typeof r=="function"?r:void 0;var n=r?r(e,t):void 0;return n===void 0?FN(e,t,void 0,r):!!n}var MN=zN;const Zs=(e,t,r)=>r.ignoreCase?typeof e=="string"&&typeof t=="string"&&e.toLowerCase()===t.toLowerCase():typeof e=="symbol"&&typeof t=="symbol"?e.toString()===t.toString():r.recursiveEqual?MN(e,t,(n,a)=>r.ignoreCase&&typeof n=="string"&&typeof a=="string"?n.toLowerCase()===a.toLowerCase():void 0):e===t,UN=(e,t)=>{if(e===t)return 1;if(e===null||t===null||typeof e!="object"||typeof t!="object")return 0;let r=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(t,n)&&e[n]===t[n]&&r++;return Math.max(r/Object.keys(e).length,r/Object.keys(t).length)},zi=(e,t,r,n,a)=>{r&&n?(e.push({level:a,type:"equal",text:`"${r}": [`}),t.push({level:a,type:"equal",text:`"${n}": [`})):(e.push({level:a,type:"equal",text:"["}),t.push({level:a,type:"equal",text:"["}))},Mi=(e,t,r)=>{e.push({level:r,type:"equal",text:"]"}),t.push({level:r,type:"equal",text:"]"})},Ui=(e,t,r)=>{e.push({level:r+1,type:"equal",text:"..."}),t.push({level:r+1,type:"equal",text:"..."})},BN=(e,t,r,n,a,i)=>{var x,f,y,g;const o=Array(e.length+1).fill(0).map(()=>Array(t.length+1).fill(0)),l=Array(e.length+1).fill(0).map(()=>Array(t.length+1).fill(0));for(let m=1;m<=e.length;m++)l[m][0]="up";for(let m=1;m<=t.length;m++)l[0][m]="left";for(let m=1;m<=e.length;m++)for(let v=1;v<=t.length;v++){const j=Ke(e[m-1]),E=Ke(t[v-1]);j===E&&(j==="array"||j==="object")?i.recursiveEqual?Zs(e[m-1],t[v-1],i)||UN(e[m-1],t[v-1])>.5?(o[m][v]=o[m-1][v-1]+1,l[m][v]="diag"):o[m-1][v]>=o[m][v-1]?(o[m][v]=o[m-1][v],l[m][v]="up"):(o[m][v]=o[m][v-1],l[m][v]="left"):(o[m][v]=o[m-1][v-1]+1,l[m][v]="diag"):Zs(e[m-1],t[v-1],i)?(o[m][v]=o[m-1][v-1]+1,l[m][v]="diag"):o[m-1][v]>=o[m][v-1]?(o[m][v]=o[m-1][v],l[m][v]="up"):(o[m][v]=o[m][v-1],l[m][v]="left")}let c=e.length,d=t.length,u=[],p=[];for(;c>0||d>0;)if(l[c][d]==="diag"){const m=Ke(e[c-1]);if(i.recursiveEqual&&(m==="array"||m==="object")&&Zs(e[c-1],t[d-1],i)){const v=[],j=[];zt(v,j,"","",e[c-1],t[d-1],a+1,i),u=he(u,v.reverse(),!0),p=he(p,j.reverse(),!0)}else if(m==="array"){const[v,j]=Lr(e[c-1],t[d-1],r,n,a+1,i);u=he(u,v.reverse(),!0),p=he(p,j.reverse(),!0)}else if(m==="object"){const[v,j]=Js(e[c-1],t[d-1],a+2,i,Lr);u.unshift({level:a+1,type:"equal",text:"}"}),p.unshift({level:a+1,type:"equal",text:"}"}),u=he(u,v.reverse(),!0),p=he(p,j.reverse(),!0),u.unshift({level:a+1,type:"equal",text:"{"}),p.unshift({level:a+1,type:"equal",text:"{"})}else{const v=[],j=[];zt(v,j,"","",e[c-1],t[d-1],a+1,i),u=he(u,v.reverse(),!0),p=he(p,j.reverse(),!0)}c--,d--}else if(l[c][d]==="up")if(i.showModifications&&c>1&&l[c-1][d]==="left"){const m=Ke(e[c-1]),v=Ke(t[d-1]);if(m===v)if(m==="array"){const[j,E]=Lr(e[c-1],t[d-1],r,n,a+1,i);u=he(u,j.reverse(),!0),p=he(p,E.reverse(),!0)}else if(m==="object"){const[j,E]=Js(e[c-1],t[d-1],a+2,i,Lr);u.unshift({level:a+1,type:"equal",text:"}"}),p.unshift({level:a+1,type:"equal",text:"}"}),u=he(u,j.reverse(),!0),p=he(p,E.reverse(),!0),u.unshift({level:a+1,type:"equal",text:"{"}),p.unshift({level:a+1,type:"equal",text:"{"})}else u.unshift({level:a+1,type:"modify",text:Ge(e[c-1],void 0,void 0,i.undefinedBehavior)}),p.unshift({level:a+1,type:"modify",text:Ge(t[d-1],void 0,void 0,i.undefinedBehavior)});else{const j=[],E=[];zt(j,E,"","",e[c-1],t[d-1],a+1,i),u=he(u,j.reverse(),!0),p=he(p,E.reverse(),!0)}c--,d--}else{const m=ze(e[c-1],void 0,1,void 0,i.undefinedBehavior).split(`
`);for(let v=m.length-1;v>=0;v--)u.unshift({level:a+1+(((f=(x=m[v].match(/^\s+/))==null?void 0:x[0])==null?void 0:f.length)||0),type:"remove",text:m[v].replace(/^\s+/,"").replace(/,$/g,"")}),p.unshift({level:a+1,type:"equal",text:""});c--}else{const m=ze(t[d-1],void 0,1,void 0,i.undefinedBehavior).split(`
`);for(let v=m.length-1;v>=0;v--)u.unshift({level:a+1,type:"equal",text:""}),p.unshift({level:a+1+(((g=(y=m[v].match(/^\s+/))==null?void 0:y[0])==null?void 0:g.length)||0),type:"add",text:m[v].replace(/^\s+/,"").replace(/,$/g,"")});d--}return[u,p]},Lr=(e,t,r,n,a,i,o=[],l=[])=>{if(zi(o,l,r,n,a),a>=(i.maxDepth||1/0))Ui(o,l,a);else{const[c,d]=BN(e,t,r,n,a,i);o=he(o,c),l=he(l,d)}return Mi(o,l,a),[o,l]};function Gs(e,t){for(const r of e)if(Ke(r)==="object"){if(!(t in r))return!1;for(const a of Object.values(r))if(Array.isArray(a)&&!Gs(a,t))return!1}else if(Array.isArray(r)&&!Gs(r,t))return!1;return!0}function En(e,t,r,n,a,i,o=[],l=[]){var d,u,p,x;if(!i.compareKey)return er(e,t,r,n,a,i,o,l);const c=f=>f.every(y=>Ke(y)==="object");if(!c(e)||!c(t)||!Gs(e,i.compareKey)||!Gs(t,i.compareKey))return er(e,t,r,n,a,i,o,l);if(zi(o,l,r,n,a),a>=(i.maxDepth||1/0))Ui(o,l,a);else{const f=new Set,y=new Set;for(let g=0;g<e.length;g++){const m=e[g];if(f.has(g)||Ke(m)!=="object"||!(i.compareKey in m))continue;const v=m[i.compareKey];let j=-1;for(let E=0;E<t.length;E++){if(y.has(E))continue;const A=t[E];if(Ke(A)!=="object"||!(i.compareKey in A))continue;const T=A[i.compareKey];if(Zs(v,T,i)){j=E;break}}if(j!==-1){const E=t[j],A=Ke(m),T=Ke(E);if(A!==T)zt(o,l,"","",m,E,a+1,i);else if(A==="object"){o.push({level:a+1,type:"equal",text:"{"}),l.push({level:a+1,type:"equal",text:"{"});const k=Array.from(new Set([...Object.keys(m),...Object.keys(E)]));for(const N of k){const R=m[N],B=E[N];if(Array.isArray(R)&&Array.isArray(B)){const[L,F]=En(R,B,N,N,a+2,i,[],[]);o=he(o,L),l=he(l,F)}else if(Array.isArray(R)||Array.isArray(B))zt(o,l,N,N,R,B,a+2,i);else{const[L,F]=Js({[N]:R},{[N]:B},a+2,i,En);o=he(o,L),l=he(l,F)}}o.push({level:a+1,type:"equal",text:"}"}),l.push({level:a+1,type:"equal",text:"}"})}else if(A==="array"){const[k,N]=En(m,E,"","",a+1,i,[],[]);o=he(o,k),l=he(l,N)}else Zs(m,E,i)?(o.push({level:a+1,type:"equal",text:Ge(m,void 0,void 0,i.undefinedBehavior)}),l.push({level:a+1,type:"equal",text:Ge(E,void 0,void 0,i.undefinedBehavior)})):i.showModifications?(o.push({level:a+1,type:"modify",text:Ge(m,void 0,void 0,i.undefinedBehavior)}),l.push({level:a+1,type:"modify",text:Ge(E,void 0,void 0,i.undefinedBehavior)})):(o.push({level:a+1,type:"remove",text:Ge(m,void 0,void 0,i.undefinedBehavior)}),o.push({level:a+1,type:"equal",text:""}),l.push({level:a+1,type:"equal",text:""}),l.push({level:a+1,type:"add",text:Ge(E,void 0,void 0,i.undefinedBehavior)}));f.add(g),y.add(j)}}for(let g=0;g<e.length;g++){if(f.has(g))continue;const m=e[g],v=ze(m,void 0,1,void 0,i.undefinedBehavior).split(`
`);for(let j=0;j<v.length;j++)o.push({level:a+1+(((u=(d=v[j].match(/^\s+/))==null?void 0:d[0])==null?void 0:u.length)||0),type:"remove",text:v[j].replace(/^\s+/,"").replace(/,$/g,"")}),l.push({level:a+1,type:"equal",text:""})}for(let g=0;g<t.length;g++){if(y.has(g))continue;const m=t[g],v=ze(m,void 0,1,void 0,i.undefinedBehavior).split(`
`);for(let j=0;j<v.length;j++)o.push({level:a+1,type:"equal",text:""}),l.push({level:a+1+(((x=(p=v[j].match(/^\s+/))==null?void 0:p[0])==null?void 0:x.length)||0),type:"add",text:v[j].replace(/^\s+/,"").replace(/,$/g,"")})}}return Mi(o,l,a),[o,l]}const li=En;function qN(e,t,r,n,a,i,o){let l=[],c=[];const d=Array.from(new Set([...Object.keys(e||{}),...Object.keys(t||{})]));for(const u of d){const p=e?e[u]:void 0,x=t?t[u]:void 0;if(Array.isArray(p)&&Array.isArray(x)&&n.compareKey&&o(p,n.compareKey)&&o(x,n.compareKey)){const[f,y]=i(p,x,"","",r+2,n,[],[]);l=he(l,f),c=he(c,y);continue}if(Array.isArray(p)&&Array.isArray(x)){const[f,y]=a(p,x,"","",r+2,n,[],[]);l=he(l,f),c=he(c,y)}else if(Array.isArray(p)||Array.isArray(x))zt(l,c,u,u,p,x,r+2,n);else{const[f,y]=Js({[u]:p},{[u]:x},r+2,n,a);l=he(l,f),c=he(c,y)}}return[l,c]}const er=(e,t,r,n,a,i,o=[],l=[])=>{var c,d,u,p;if(e=[...e],t=[...t],zi(o,l,r,n,a),a>=(i.maxDepth||1/0))Ui(o,l,a);else for(;e.length||t.length;){const x=e[0],f=t[0],y=Ke(x),g=Ke(f);if(e.length&&t.length){if(y!==g)zt(o,l,"","",x,f,a+1,i);else if(i.recursiveEqual&&["object","array"].includes(y)&&Zs(x,f,i))zt(o,l,"","",x,f,a+1,i);else if(y==="object"){o.push({level:a+1,type:"equal",text:"{"}),l.push({level:a+1,type:"equal",text:"{"});let m,v;i.arrayDiffMethod==="compare-key"?[m,v]=qN(x,f,a,i,er,li,Gs):[m,v]=Js(x,f,a+2,i,er),o=he(o,m),l=he(l,v),o.push({level:a+1,type:"equal",text:"}"}),l.push({level:a+1,type:"equal",text:"}"})}else if(y==="array")if(i.compareKey&&Gs(x,i.compareKey)&&Gs(f,i.compareKey)){const[m,v]=li(x,f,"","",a+1,i,[],[]);o=he(o,m),l=he(l,v)}else{const[m,v]=er(x,f,"","",a+1,i,[],[]);o=he(o,m),l=he(l,v)}else nn(x,f,{ignoreCase:i.ignoreCase})===0?(o.push({level:a+1,type:"equal",text:Ge(x,void 0,void 0,i.undefinedBehavior)}),l.push({level:a+1,type:"equal",text:Ge(f,void 0,void 0,i.undefinedBehavior)})):i.showModifications?(o.push({level:a+1,type:"modify",text:Ge(x,void 0,void 0,i.undefinedBehavior)}),l.push({level:a+1,type:"modify",text:Ge(f,void 0,void 0,i.undefinedBehavior)})):(o.push({level:a+1,type:"remove",text:Ge(x,void 0,void 0,i.undefinedBehavior)}),o.push({level:a+1,type:"equal",text:""}),l.push({level:a+1,type:"equal",text:""}),l.push({level:a+1,type:"add",text:Ge(f,void 0,void 0,i.undefinedBehavior)}));e.shift(),t.shift()}else if(e.length){const m=Ge(x,void 0,!0,i.undefinedBehavior).split(`
`);for(let v=0;v<m.length;v++)o.push({level:a+1+(((d=(c=m[v].match(/^\s+/))==null?void 0:c[0])==null?void 0:d.length)||0),type:"remove",text:m[v].replace(/^\s+/,"").replace(/,$/g,"")}),l.push({level:a+1,type:"equal",text:""});e.shift()}else if(t.length){const m=Ge(f,void 0,!0,i.undefinedBehavior).split(`
`);for(let v=0;v<m.length;v++)o.push({level:a+1,type:"equal",text:""}),l.push({level:a+1+(((p=(u=m[v].match(/^\s+/))==null?void 0:u[0])==null?void 0:p.length)||0),type:"add",text:m[v].replace(/^\s+/,"").replace(/,$/g,"")});t.shift()}}return Mi(o,l,a),[o,l]},qn=(e,t)=>{if(!e||typeof e!="object")return e;if(Array.isArray(e)){const n=[...e];return n.sort((a,i)=>nn(a,i,{ignoreCase:t==null?void 0:t.ignoreCase})),n.map(a=>qn(a,t))}const r={...e};for(const n in r)r[n]=qn(r[n],t);return r};var ci=function(e){return e.stringify="stringify",e.ignore="ignore",e.throw="throw",e}({});const yn={level:0,type:"equal",text:""},pl={level:0,type:"equal",text:"{"},xl={level:0,type:"equal",text:"}"};let HN=class{detectCircular(t){if(this.options.detectCircular&&ti(t))throw new Error(`Circular reference detected in object (with keys ${Object.keys(t).map(r=>`"${r}"`).join(", ")})`)}sortResultLines(t,r){for(let n=0;n<t.length;n++){let a=!1;for(let i=1;i<t.length;i++)if(t[i].type==="remove"&&t[i-1].type==="equal"&&r[i].type==="equal"&&r[i-1].type==="add"){const o=t[i-1];t[i-1]=t[i],t[i]=o;const l=r[i-1];r[i-1]=r[i],r[i]=l,a=!0}if(!a)break}}calculateLineNumbers(t){let r=0;for(const n of t)n.text&&(n.lineNumber=++r)}calculateCommas(t){const r=Array(t.length).fill(0);for(let n=t.length-1;n>0;n--)t[n].text?r[n-1]=n:r[n-1]=r[n];for(let n=0;n<t.length;n++)!t[n].text.endsWith("{")&&!t[n].text.endsWith("[")&&t[n].text&&r[n]&&t[n].level<=t[r[n]].level&&(t[n].comma=!0)}diff(t,r){this.detectCircular(t),this.detectCircular(r),(this.options.arrayDiffMethod==="unorder-normal"||this.options.arrayDiffMethod==="unorder-lcs")&&(t=qn(t,this.options),r=qn(r,this.options)),this.options.undefinedBehavior==="ignore"&&(t=Mn(t)??null,r=Mn(r)??null);let n=[],a=[];const i=Ke(t),o=Ke(r);if(i!==o){n=ze(t,void 0,1,this.options.maxDepth,this.options.undefinedBehavior).split(`
`).map(p=>{var x,f;return{level:((f=(x=p.match(/^\s+/))==null?void 0:x[0])==null?void 0:f.length)||0,type:"remove",text:p.replace(/^\s+/,"").replace(/,$/g,""),comma:p.endsWith(",")}}),a=ze(r,void 0,1,this.options.maxDepth,this.options.undefinedBehavior).split(`
`).map(p=>{var x,f;return{level:((f=(x=p.match(/^\s+/))==null?void 0:x[0])==null?void 0:f.length)||0,type:"add",text:p.replace(/^\s+/,"").replace(/,$/g,""),comma:p.endsWith(",")}});const d=n.length,u=a.length;n=he(n,Array(u).fill(0).map(()=>({...yn}))),a=he(a,Array(d).fill(0).map(()=>({...yn})),!0)}else i==="object"?([n,a]=Js(t,r,1,this.options,this.arrayDiffFunc),n.unshift({...pl}),n.push({...xl}),a.unshift({...pl}),a.push({...xl})):i==="array"?[n,a]=this.arrayDiffFunc(t,r,"","",0,this.options):t!==r?this.options.ignoreCase?typeof t=="string"&&typeof r=="string"&&t.toLowerCase()===r.toLowerCase()&&(n=[{level:0,type:"equal",text:t}],a=[{level:0,type:"equal",text:r}]):this.options.showModifications?(n=[{level:0,type:"modify",text:ze(t,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)}],a=[{level:0,type:"modify",text:ze(r,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)}]):(n=[{level:0,type:"remove",text:ze(t,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)},{...yn}],a=[{...yn},{level:0,type:"add",text:ze(r,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)}]):(n=[{level:0,type:"equal",text:ze(t,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)}],a=[{level:0,type:"equal",text:ze(r,void 0,void 0,this.options.maxDepth,this.options.undefinedBehavior)}]);return this.sortResultLines(n,a),this.calculateLineNumbers(n),this.calculateLineNumbers(a),this.calculateCommas(n),this.calculateCommas(a),[n,a]}constructor({detectCircular:t=!0,maxDepth:r=1/0,showModifications:n=!0,arrayDiffMethod:a="normal",ignoreCase:i=!1,ignoreCaseForKey:o=!1,recursiveEqual:l=!1,preserveKeyOrder:c,compareKey:d,undefinedBehavior:u="stringify"}={}){this.options={detectCircular:t,maxDepth:r,showModifications:n,arrayDiffMethod:a,ignoreCase:i,ignoreCaseForKey:o,recursiveEqual:l,preserveKeyOrder:c,compareKey:d,undefinedBehavior:u},a==="compare-key"?this.arrayDiffFunc=li:a==="lcs"||a==="unorder-lcs"?this.arrayDiffFunc=Lr:this.arrayDiffFunc=er}};const ws=e=>"hasLinesBefore"in e||"hasLinesAfter"in e,VN=(e,t,r)=>ws(e)?r:t*(e.end-e.start+1),gl=(e,t)=>{const r=[];let n,a;if(e.length&&t.length)for(e=[...e],t=[...t],n={...e.shift()},a={...t.shift()};;){if(n.start===a.start){const i=Math.min(n.end,a.end);r.push({...n,...a,end:i}),n.start=a.start=i}else if(n.start<a.start){const i=Math.min(n.end,a.start);r.push({...a,...n,end:i}),n.start=i}else{const i=Math.min(n.start,a.end);r.push({...n,...a,end:i}),a.start=i}if(!e.length||!t.length)break;n.start===n.end&&(n={...e.shift()}),a.start===a.end&&(a={...t.shift()})}return e.length||r.push(...t.map(i=>({...i,token:n.token||"plain"}))),t.length||r.push(...e),r},GN=(e,t,r,n,a,i,o,l,c)=>{if(!t.length)return[0,0];let d=0,u=0;const p=e[r];ws(p)?d=t[r]:d=t[r]+(n-p.start)*o;const x=e[a];return ws(x)?u=c-t[a]-l:u=c-t[a]-(i-x.start)*o,[d,u]},QN=(e,t,r,n,a,i)=>{if(!t.length)return[0,0,0,0];let o=0,l=0,c=0,d=0,u=0,p=e.length-1;for(;;){const y=Math.floor((u+p)/2);if(t[y]+VN(e[y],a,i)<=r?u=y+1:p=y,u===p){o=u;break}}const x=e[o];for(ws(x)?c=x.start:c=x.start+Math.floor((r-t[o])/a),u=0,p=e.length-1;;){const y=Math.floor((u+p+1)/2);if(t[y]>=n?p=y-1:u=y,u===p){l=u;break}}const f=e[l];return ws(f)?d=f.end:d=f.start+Math.ceil((n-t[l])/a),[o,c,l,d]};var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.applyPatch=Rt.calcPatch=di=Rt.lcs=Rt.diff=Rt.diff_core=void 0;function WN(e,t){const{b:r,eq:n,stack_base:a}=e;let{i,N:o,j:l,M:c,Z:d,stack_top:u}=e;for(;;)switch(t){case 0:{e:for(;o>0&&c>0;){r.fill(0,0,2*d);const p=o-c,x=o+c,f=x&1,y=i+o-1,g=l+c-1,m=(x+f)/2;let v;t:for(let j=0;j<=m;j++){const E=2*Math.max(0,j-c)-j,A=j-2*Math.max(0,j-o);for(let T=E;T<=A;T+=2){const k=r[T-1-d*Math.floor((T-1)/d)],N=r[T+1-d*Math.floor((T+1)/d)],R=T===-j||T!==j&&k<N?N:k+1,B=R-T;let L=R,F=B;for(;L<o&&F<c&&n(i+L,l+F);)L++,F++;if(r[T-d*Math.floor(T/d)]=L,f===1&&(v=p-T)>=1-j&&v<j&&L+r[d+v-d*Math.floor(v/d)]>=o)if(j>1||L!==R){a[u++]=i+L,a[u++]=o-L,a[u++]=l+F,a[u++]=c-F,o=R,c=B,d=2*(Math.min(o,c)+1);continue e}else break t}for(let T=E;T<=A;T+=2){const k=r[d+T-1-d*Math.floor((T-1)/d)],N=r[d+T+1-d*Math.floor((T+1)/d)],R=T===-j||T!==j&&k<N?N:k+1,B=R-T;let L=R,F=B;for(;L<o&&F<c&&n(y-L,g-F);)L++,F++;if(r[d+T-d*Math.floor(T/d)]=L,f===0&&(v=p-T)>=-j&&v<=j&&L+r[v-d*Math.floor(v/d)]>=o)if(j>0||L!==R){a[u++]=i+o-R,a[u++]=R,a[u++]=l+c-B,a[u++]=B,o=o-L,c=c-F,d=2*(Math.min(o,c)+1);continue e}else break t}}if(o!==c){c>o?(i+=o,l+=o,c-=o,o=0):(i+=c,l+=c,o-=c,c=0);break}}if(o+c!==0)if(e.pxe===i||e.pye===l)e.pxe=i+o,e.pye=l+c;else{const p=e.pxs;if(e.oxs=e.pxs,e.oxe=e.pxe,e.oys=e.pys,e.oye=e.pye,e.pxs=i,e.pxe=i+o,e.pys=l,e.pye=l+c,p>=0)return e.i=i,e.N=o,e.j=l,e.M=c,e.Z=d,e.stack_top=u,1}}case 1:{if(u===0)return 2;c=a[--u],l=a[--u],o=a[--u],i=a[--u],d=2*(Math.min(o,c)+1),t=0}}}let KN=class{[Symbol.iterator](){return this}next(){const{state:t,result:r}=this;if(this.c>1)return r.done=!0,r.value=void 0,r;const n=WN(t,this.c);return this.c=n,n===1?(r.value=[t.oxs,t.oxe,t.oys,t.oye],r):t.pxs>=0?(r.value=[t.pxs,t.pxe,t.pys,t.pye],r):(r.done=!0,r.value=void 0,r)}constructor(t){this.state=t,this.c=0,this.result={value:null,done:!1}}};function Jd(e,t,r,n,a){const i=(Math.min(t,n)+1)*2,o=t+n,l=new(o<256?Uint8Array:o<65536?Uint16Array:Uint32Array)(2*i);return new KN({i:e,N:t,j:r,M:n,Z:i,b:l,eq:a,pxs:-1,pxe:-1,pys:-1,pye:-1,oxs:-1,oxe:-1,oys:-1,oye:-1,stack_top:0,stack_base:[]})}Rt.diff_core=Jd;function Bi(e,t){let[r,n,a]=[0,e.length,t.length];for(;r<n&&r<a&&e[r]===t[r];)r++;if(r===n&&r===a)return[][Symbol.iterator]();for(;e[--n]===t[--a]&&n>r&&a>r;);const i=(o,l)=>e[o]===t[l];return Jd(r,n+1-r,r,a+1-r,i)}Rt.diff=Bi;let JN=class{[Symbol.iterator](){return this}next(){const t=this.diff.next();if(t.done){const{i:c,j:d,N:u}=this;return c<u&&(t.done=!1,t.value=[c,d,u-c],this.i=u),t}const r=t.value,n=r[0],a=r[1],i=r[3],{i:o,j:l}=this;return o!==n&&(r.length--,r[0]=o,r[1]=l,r[2]=n-o),this.i=a,this.j=i,t}constructor(t,r){this.diff=t,this.N=r,this.i=0,this.j=0}};function YN(e,t){return new JN(Bi(e,t),e.length)}var di=Rt.lcs=YN;function*XN(e,t){const r=ArrayBuffer.isView(e)?Uint8Array.prototype.subarray:e.slice;for(const n of Bi(e,t))n[2]=r.call(t,n[2],n[3]),yield n}Rt.calcPatch=XN;function*ZN(e,t){let r=0;const n=ArrayBuffer.isView(e)?Uint8Array.prototype.subarray:e.slice;for(const[a,i,o]of t)r<a&&(yield n.call(e,r,a)),o.length>0&&(yield o),r=i;r<e.length&&(yield n.call(e,r))}Rt.applyPatch=ZN;const yl=(e,t)=>{const r=[];let n=0;for(const a of e)r.push(n),n+=a.length+t;return r.push(n-t),r},vn=e=>e.filter(t=>t.end>t.start),e1=(e,t,r)=>{let n=[],a=[],i=0,o=0;if(r.mode==="word"){const c=r.wordSeparator||" ",d=e.split(c),u=t.split(c),p=[...di(d,u)],x=c.length,f=yl(d,x),y=yl(u,x);for(const[g,m,v]of p)g>i&&n.push({type:"remove",start:f[i],end:f[g]}),m>o&&a.push({type:"add",start:y[o],end:y[m]}),i=g+v,o=m+v,n.push({start:f[g],end:f[i]}),a.push({start:y[m],end:y[o]});return e.length>i&&n.push({type:"remove",start:f[i],end:e.length}),t.length>o&&a.push({type:"add",start:y[o],end:t.length}),n=vn(n),a=vn(a),[n,a]}const l=di(e,t);for(const[c,d,u]of l)c>i&&n.push({type:"remove",start:i,end:c}),d>o&&a.push({type:"add",start:o,end:d}),i=c+u,o=d+u,n.push({start:c,end:i}),a.push({start:d,end:o});return e.length>i&&n.push({type:"remove",start:i,end:e.length}),t.length>o&&a.push({type:"add",start:o,end:t.length}),n=vn(n),a=vn(a),[n,a]},ui=(e,t,r)=>{if(!e)return[{token:"plain",start:r,end:t.length+r}];if(t==="undefined"||t==="Infinity"||t==="-Infinity"||t==="NaN"||/^\d+n$/i.test(t)||t.startsWith("Symbol(")||t.startsWith("function")||t.startsWith("("))return[{token:"invalid",start:r,end:t.length+r}];if(!Number.isNaN(Number(t)))return[{token:"number",start:r,end:t.length+r}];if(t==="true"||t==="false")return[{token:"boolean",start:r,end:t.length+r}];if(t==="null")return[{token:"null",start:r,end:t.length+r}];if(t.startsWith('"')){if(t.endsWith(": [")||t.endsWith(": {"))return[{token:"key",start:r,end:t.length-3+r},{token:"punctuation",start:t.length-3,end:t.length-2+r},{token:"plain",start:t.length-2,end:t.length-1+r},{token:"punctuation",start:t.length-1,end:t.length+r}];let n=1;for(;n<t.length&&t[n]!=='"';)t[n]==="\\"&&++n,++n;return n===t.length-1?[{token:"string",start:r,end:t.length+r}]:[{token:"key",start:r,end:n+1+r},{token:"punctuation",start:n+1,end:n+2+r},{token:"plain",start:n+2,end:n+3+r},...ui(e,t.substring(n+3),r+n+3)]}return t==="{"||t==="}"||t==="["||t==="]"?[{token:"punctuation",start:r,end:t.length+r}]:[{token:"plain",start:r,end:t.length+r}]},vl={threshold:8,margin:3},bl=(e,t,r,n)=>{if(!r||n)return[{start:0,end:e.length,isEqual:!1}];const a=[];for(let d=0;d<e.length;d++)e[d].type==="equal"&&t[d].type==="equal"?a.length&&a[a.length-1].isEqual?a[a.length-1].end++:a.push({start:d,end:d+1,isEqual:!0}):a.length&&!a[a.length-1].isEqual?a[a.length-1].end++:a.push({start:d,end:d+1,isEqual:!1});const i=r===!0?vl:{...vl,...r},{threshold:o,margin:l}=i;o<l*2+1&&console.warn(`Threshold (${o}) is no more than 2 margins + 1 "expand" line (${l} * 2 + 1), it's not necessary to hide unchanged areas which have less than ${l*2+1} lines.`);const c=[];for(let d=0;d<a.length;d++){const u=a[d];if(!u.isEqual||u.end-u.start<o||u.end-u.start<=l*2+1){c.push(u);continue}d?d===a.length-1?(c.push({start:u.start,end:u.start+l,isEqual:!0}),c.push({hasLinesBefore:!1,hasLinesAfter:!0,start:u.start+l,end:e.length,isEqual:!0})):(c.push({start:u.start,end:u.start+l,isEqual:!0}),c.push({hasLinesBefore:!0,hasLinesAfter:!0,start:u.start+l,end:u.end-l,isEqual:!0}),c.push({start:u.end-l,end:u.end,isEqual:!0})):(c.push({hasLinesBefore:!0,hasLinesAfter:!1,start:0,end:u.end-l,isEqual:!0}),c.push({start:u.end-l,end:u.end,isEqual:!0}))}return c},t1=2,jl=20,s1={noChangeDetected:"No change detected",showLinesBefore:" Show %d lines before",showLinesAfter:" Show %d lines after",showAll:" Show all unchanged lines"},Yd=e=>{var S,w;const[t,r]=e.diff,n=h.useMemo(()=>t.length===r.length&&t.every(P=>P.type==="equal")&&r.every(P=>P.type==="equal"),[t,r]),a={...s1,...e.texts},i=e.lineNumbers?`calc(${String(t.length).length}ch + 16px)`:0,o=e.indent??t1,l=o==="tab"?"	":" ",c=o==="tab"?1:o,d={mode:((S=e.inlineDiffOptions)==null?void 0:S.mode)||"char",wordSeparator:((w=e.inlineDiffOptions)==null?void 0:w.wordSeparator)||""},u=e.hideUnchangedLines??!1,{scrollContainer:p="body",itemHeight:x=18,expandLineHeight:f=26}=!e.virtual||e.virtual===!0?{}:e.virtual,y=p==="body"?document.body:document.querySelector(p),g=e.lineNumbers?4:2,m=h.useRef(t),v=h.useRef(r),j=h.useRef(bl(t,r,u,n)),E=h.useRef([]),A=h.useRef(0),T=h.useRef(null),[,k]=h.useState({}),N=()=>{if(E.current=[],e.virtual){let P=0;for(const I of j.current)ws(I)?(E.current.push(P),P+=f):(E.current.push(P),P+=x*(I.end-I.start));A.current=j.current.reduce((I,D)=>ws(D)?I+f:I+(D.end-D.start)*x,0)}k({})};h.useEffect(()=>{m.current=t,v.current=r,j.current=bl(t,r,u,n),N()},[u,t,r]),h.useEffect(()=>{if(!e.virtual||!y)return;const P=()=>k({});return y.addEventListener("scroll",P),()=>{y.removeEventListener("scroll",P)}},[e.virtual,y]);const R=P=>I=>{const D=[...j.current],z=D[P];D[P]={...z,end:Math.max(z.end-I,z.start)},P+1<j.current.length-1&&(D[P+1]={...D[P+1],start:Math.max(z.end-I,z.start)}),j.current=D,N()},B=P=>I=>{const D=[...j.current],z=D[P];D[P]={...z,start:Math.min(z.start+I,z.end)},P>1&&(D[P-1]={...D[P-1],end:Math.min(z.start+I,z.end)}),j.current=D,N()},L=P=>()=>{const I=[...j.current],D=I[P];I[P]={...D,start:D.start,end:D.start},P+1<j.current.length-1?I[P+1]={...I[P+1],start:D.start}:I[P-1]={...I[P-1],end:D.end},j.current=I,N()},F=(P,I=[],D=!1,z=!1)=>h.createElement(h.Fragment,null,I.map((H,$)=>{const M=P.slice(H.start,H.end);if(!H.type&&!H.token)return M;const G=[H.type?`inline-diff-${H.type}`:"",H.token?`token ${H.token}`:""].filter(Boolean).join(" ");return h.createElement("span",{key:`${$}-${H.type}-${M}`,className:G},M)}),D&&(z?h.createElement("span",{className:"token punctuation"},","):",")),q=(P,I)=>{var ge,De;const D=m.current[P],z=v.current[P],[H,$]=e.highlightInlineDiff&&D.type==="modify"&&z.type==="modify"?e1(D.text,z.text,d):[[],[]],M=ui(I,D.text,0),G=ui(I,z.text,0),te=gl(M,H),se=gl(G,$),U=D.type!=="equal"?((ge=e.bgColour)==null?void 0:ge[D.type])??"":"",ae=z.type!=="equal"?((De=e.bgColour)==null?void 0:De[z.type])??"":"";return h.createElement("tr",{key:P},e.lineNumbers&&h.createElement("td",{className:`line-${D.type} line-number`,style:{backgroundColor:U}},D.lineNumber),h.createElement("td",{className:`line-${D.type}`,style:{backgroundColor:U}},h.createElement("pre",null,D.text&&l.repeat(D.level*c),F(D.text,te,D.comma,I))),e.lineNumbers&&h.createElement("td",{className:`line-${z.type} line-number`,style:{backgroundColor:ae}},z.lineNumber),h.createElement("td",{className:`line-${z.type}`,style:{backgroundColor:ae}},h.createElement("pre",null,z.text&&l.repeat(z.level*c),F(z.text,se,z.comma,I))))},fe=(P,I,D,z)=>h.createElement(h.Fragment,null,P&&h.createElement("button",{onClick:()=>R(z)(D)},a.showLinesBefore.replaceAll("%d",String(D))),h.createElement("button",{onClick:()=>L(z)()},a.showAll),I&&h.createElement("button",{onClick:()=>B(z)(D)},a.showLinesAfter.replaceAll("%d",String(D)))),oe=(P,I,D,z,H)=>{let{start:$,end:M}=P;if($=Math.max($,D),M=Math.min(M,z),$===M)return null;if(!ws(P))return Array(M-$).fill(0).map((U,ae)=>q($+ae,H));const{hasLinesBefore:G,hasLinesAfter:te}=P,se=typeof u=="boolean"?jl:u.expandMoreLinesLimit||jl;return[h.createElement("tr",{key:`expand-line-${I}`,className:"expand-line"},h.createElement("td",{colSpan:g,className:`${G?"has-lines-before":""} ${te?"has-lines-after":""}`},typeof u!="boolean"&&u.expandLineRenderer?u.expandLineRenderer({hasLinesBefore:G,hasLinesAfter:te,onExpandBefore:R(I),onExpandAfter:B(I),onExpandAll:L(I)}):fe(G,te,se,I)))]},je=P=>{if(n&&u)return h.createElement("tr",{key:"message-line",className:"message-line"},h.createElement("td",{colSpan:g},a.noChangeDetected));if(!e.virtual)return j.current.map((X,Te)=>oe(X,Te,0,m.current.length,P));const I=(y==null?void 0:y.clientHeight)??0,D=(y==null?void 0:y.scrollTop)??0,z=D+I;let H=T.current,$=(H==null?void 0:H.offsetTop)??0;for(;H!=null&&H.offsetParent&&(H==null?void 0:H.offsetParent)!==y;)H=H.offsetParent,$+=H.offsetTop;if($>z||$+A.current<D)return h.createElement("tr",null,h.createElement("td",{colSpan:g,style:{height:`${A.current}px`}}));const M=D-$,G=z-$,[te,se,U,ae]=QN(j.current,E.current,M,G,x,f),[ge,De]=GN(j.current,E.current,te,se,U,ae,x,f,A.current),O=j.current.slice(te,U+1);return O.length?h.createElement(h.Fragment,null,h.createElement("tr",null,h.createElement("td",{colSpan:g,style:{height:ge,padding:0}})),O.map((X,Te)=>oe(X,Te,se,ae,P)),h.createElement("tr",null,h.createElement("td",{colSpan:g,style:{height:De,padding:0}}))):h.createElement("tr",null,h.createElement("td",{colSpan:g,style:{height:`${A.current}px`}}))},Y=()=>h.createElement("colgroup",{className:"measure-line"},e.lineNumbers&&h.createElement("col",{style:{width:i}}),h.createElement("col",null),e.lineNumbers&&h.createElement("col",{style:{width:i}}),h.createElement("col",null)),ye=["json-diff-viewer",e.virtual&&"json-diff-viewer-virtual",e.syntaxHighlight&&`json-diff-viewer-theme-${e.syntaxHighlight.theme||"monokai"}`,e.className].filter(Boolean).join(" "),ve=!!e.syntaxHighlight;return h.createElement("table",{className:ye,style:e.style},Y(),h.createElement("tbody",{ref:T},je(ve)))};Yd.displayName="Viewer";const r1=async e=>Ye(`/rules/${encodeURIComponent(e)}/versions`),n1=async(e,t)=>Ye(`/rules/${encodeURIComponent(e)}/versions/${t}`),a1=async(e,t,r)=>Ye(`/rules/${encodeURIComponent(e)}/versions/compare`,{v1:t,v2:r}),i1=async(e,t,r)=>Xt(`/rules/${encodeURIComponent(e)}/versions/${t}/rollback`,{author:r}),Tn={all:["ruleHistory"],versions:e=>[...Tn.all,"versions",e],version:(e,t)=>[...Tn.versions(e),t],compare:(e,t,r)=>[...Tn.all,"compare",e,t,r]},Nl={getVersions:r1,getVersion:n1,compareVersions:a1,rollback:i1,queryKeys:Tn};function o1(e){var t;return{version:e.version,timestamp:e.timestamp,author:e.author||"unknown",changeType:e.change_type.toLowerCase(),changeSummary:e.change_summary||"No summary",changeDetails:{conditionsChanged:((t=e.conditions)==null?void 0:t.length)||0,actionsChanged:0,metadataChanged:!1},conditions:e.conditions||[],priority:e.priority,enabled:e.enabled,description:e.description||"",tags:e.tags||[],labels:e.labels||{},rawData:e}}function l1({open:e,onOpenChange:t,rule:r,onRollbackSuccess:n}){const[a,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,p]=h.useState("timeline"),[x,f]=h.useState(!1),[y,g]=h.useState([]),[m,v]=h.useState(!1),[j,E]=h.useState(!1),A=h.useCallback(async()=>{if(!r)return;v(!0);const S=w=>{g(w),w.length>0&&(i(w[0].version),w.length>=2&&(l(w[0].version),d(w[1].version)))};try{const P=(await Nl.getVersions(r.rule_code)).versions.map(I=>o1(I));P.sort((I,D)=>D.version-I.version),S(P)}catch(w){console.error("Failed to fetch versions:",w),ee.error("Failed to load version history")}finally{v(!1)}},[r]);h.useEffect(()=>{e&&r&&A()},[e,r==null?void 0:r.rule_code,A]),h.useEffect(()=>{e||(i(null),l(null),d(null),p("timeline"),f(!1),g([]))},[e]);const T=a!==null?y.find(S=>S.version===a):null,k=o!==null?y.find(S=>S.version===o):null,N=c!==null?y.find(S=>S.version===c):null,R=h.useMemo(()=>{if(!k||!N)return null;const S=new HN({detectCircular:!0,maxDepth:1/0,showModifications:!0,arrayDiffMethod:"lcs",recursiveEqual:!0,preserveKeyOrder:"before"}),w=D=>({priority:D.priority,enabled:D.enabled,description:D.description,conditions:D.conditions.map(z=>({field:z.field,operator:z.operator,value:z.value})),tags:D.tags||[],labels:D.labels||{}}),P=w(N),I=w(k);return S.diff(P,I)},[k,N]);if(!e||!r)return null;const B=r.version||1,L=async S=>{E(!0);try{await Nl.rollback(r.rule_code,S,"current-user"),ee.success(`Successfully rolled back to version ${S}`,{description:`A new version (v${B+1}) has been created with the restored settings.`}),f(!1),t(!1),n==null||n()}catch(w){ee.error(w instanceof Error?w.message:"Failed to rollback")}finally{E(!1)}},F=S=>S.toUpperCase(),q=(S,w)=>{const P=new Map(S.map(M=>[F(M.field),M])),I=new Map(w.map(M=>[F(M.field),M])),D=[],z=[],H=[],$=[];for(const[M,G]of P){const te=I.get(M);if(!te)D.push(G);else{const se=JSON.stringify(G.value),U=JSON.stringify(te.value);se!==U||G.operator!==te.operator?H.push({old:te,new:G}):$.push(G)}}for(const[M,G]of I)P.has(M)||z.push(G);return{added:D,removed:z,modified:H,unchanged:$}},fe=(S,w)=>{const P=q(S.conditions||[],w.conditions||[]);let I=P.added.length,D=P.removed.length,z=P.modified.length;S.priority!==w.priority&&z++,S.enabled!==w.enabled&&z++,S.description!==w.description&&z++;const H=new Set(S.tags||[]),$=new Set(w.tags||[]);for(const M of H)$.has(M)||I++;for(const M of $)H.has(M)||D++;return{additions:I,deletions:D,modifications:z}},oe=S=>{switch(S){case"created":return s.jsx(gs,{className:"size-4 text-green-600"});case"updated":return s.jsx(Ts,{className:"size-4 text-blue-600"});case"rollback":return s.jsx(Na,{className:"size-4 text-orange-600"});default:return s.jsx(Ys,{className:"size-4"})}},je=S=>{switch(S){case"created":return s.jsx(ie,{className:"bg-green-100 text-green-800 border-green-200",children:"Created"});case"updated":return s.jsx(ie,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Updated"});case"rollback":return s.jsx(ie,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"Rollback"});default:return s.jsx(ie,{children:"Unknown"})}},Y=S=>{try{return new Date(S).toLocaleString()}catch{return S}},ye=S=>{const w=S.rawData||{rule_code:r.rule_code,version:S.version,description:S.description,conditions:S.conditions,priority:S.priority,enabled:S.enabled,author:S.author,timestamp:S.timestamp,change_type:S.changeType.toUpperCase(),change_summary:S.changeSummary,tags:S.tags,labels:S.labels},P=JSON.stringify(w,null,2),I=new Blob([P],{type:"application/json"}),D=URL.createObjectURL(I),z=document.createElement("a");z.href=D,z.download=`${r.rule_code}_v${S.version}.json`,z.click(),URL.revokeObjectURL(D),ee.success(`Exported version ${S.version}`,{description:`Saved as ${r.rule_code}_v${S.version}.json`})},ve=S=>{const w=[],P=[];return S.forEach(I=>{[">","<",">=","<=","=="].includes(I.operator)&&typeof I.value=="number"&&I.value>1e3?P.push(I):w.push(I)}),{baseConditions:w,vectorizedConditions:P}};return s.jsxs(s.Fragment,{children:[s.jsx($n,{open:e&&!x,onOpenChange:t,children:s.jsxs(Ur,{className:"max-w-[95vw] w-[1400px] max-h-[95vh] h-[900px] flex flex-col p-0",children:[s.jsx(Br,{className:"border-b px-6 py-4 shrink-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Dr,{className:"size-5 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(qr,{className:"text-xl flex items-center gap-3",children:["Rule History: ",r.rule_code,r.tags&&r.tags.length>0&&s.jsx(ie,{variant:"outline",className:"font-normal",children:r.tags[0]})]}),s.jsx(Hr,{className:"mt-1",children:m?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(bs,{className:"size-3 animate-spin"}),"Loading version history..."]}):`${y.length} version${y.length!==1?"s":""}  Current: v${B}`})]})]})}),s.jsx("div",{className:"flex-1 overflow-hidden p-6",children:m?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(bs,{className:"size-8 animate-spin text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading version history..."})]})}):y.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Dr,{className:"size-16 text-gray-300 mx-auto"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"No version history available"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This rule has not been modified since creation."})]})]})}):s.jsxs(Wn,{value:u,onValueChange:S=>p(S),className:"h-full flex flex-col",children:[s.jsxs(Xr,{className:"grid w-full grid-cols-3 mb-6 shrink-0",children:[s.jsxs(rt,{value:"timeline",className:"gap-2",children:[s.jsx(ba,{className:"size-4"}),"Timeline"]}),s.jsxs(rt,{value:"diff",className:"gap-2",children:[s.jsx(Ro,{className:"size-4"}),"Compare Versions"]}),s.jsxs(rt,{value:"details",className:"gap-2",children:[s.jsx(Ys,{className:"size-4"}),"Version Details"]})]}),s.jsx(nt,{value:"timeline",className:"flex-1 overflow-hidden m-0",children:s.jsxs("div",{className:"flex gap-6 h-full",children:[s.jsx("div",{className:"w-96 shrink-0",children:s.jsxs(me,{className:"h-full flex flex-col",children:[s.jsxs(Ce,{className:"shrink-0",children:[s.jsx($e,{className:"text-base",children:"Version History"}),s.jsx(Re,{children:"Click a version to view details"})]}),s.jsx(pe,{className:"flex-1 overflow-hidden p-0",children:s.jsx(ks,{className:"h-full px-6 pb-6",children:s.jsxs("div",{className:"relative space-y-4",children:[s.jsx("div",{className:"absolute left-[22px] top-8 bottom-8 w-0.5 bg-gradient-to-b from-blue-400 via-gray-300 to-gray-200"}),y.map(S=>s.jsxs("button",{onClick:()=>i(S.version),className:`
                                    relative w-full text-left p-4 rounded-lg border-2 transition-all
                                    ${a===S.version?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm bg-white"}
                                  `,children:[s.jsx("div",{className:`
                                    absolute -left-[18px] top-6 size-5 rounded-full border-3 bg-white shadow-sm
                                    flex items-center justify-center
                                    ${a===S.version?"border-blue-500":"border-gray-300"}
                                  `,children:s.jsx("div",{className:`size-2 rounded-full ${a===S.version?"bg-blue-500":"bg-gray-300"}`})}),s.jsxs("div",{className:"space-y-2 ml-2",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"font-semibold text-base",children:["v",S.version]}),S.version===B&&s.jsx(ie,{variant:"default",className:"text-xs",children:"Current"}),je(S.changeType)]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:S.changeSummary}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ba,{className:"size-3"}),Y(S.timestamp)]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Oo,{className:"size-3"}),S.author.split("@")[0]]})]}),s.jsxs("div",{className:"flex gap-2 pt-2 flex-wrap",children:[S.conditions.length>0&&s.jsxs(ie,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(Me,{className:"size-3"}),S.conditions.length," condition",S.conditions.length!==1?"s":""]}),S.changeDetails.metadataChanged&&s.jsxs(ie,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(Ts,{className:"size-3"}),"metadata"]})]})]})]},S.version))]})})})]})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs(me,{className:"h-full flex flex-col",children:[s.jsx(Ce,{className:"shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs($e,{className:"text-base flex items-center gap-2",children:["Version ",a," Details",a===B&&s.jsx(ie,{variant:"default",className:"text-xs",children:"Current"})]}),s.jsx(Re,{className:"mt-1",children:(T==null?void 0:T.changeSummary)||"Select a version to view details"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{asChild:!0,children:s.jsx(W,{variant:"outline",size:"sm",onClick:()=>T&&ye(T),disabled:!T,children:s.jsx(Ka,{className:"size-4"})})}),s.jsx(Vs,{children:"Export this version as JSON"})]})}),a!==null&&a!==B&&s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{asChild:!0,children:s.jsxs(W,{size:"sm",onClick:()=>f(!0),children:[s.jsx(Na,{className:"size-4 mr-2"}),"Restore"]})}),s.jsx(Vs,{children:"Restore this version as the current configuration"})]})})]})]})}),s.jsx(pe,{className:"flex-1 overflow-hidden p-0",children:s.jsx(ks,{className:"h-full px-6 pb-6",children:T?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1",children:[s.jsx(Oo,{className:"size-3"}),"Author"]}),s.jsx("div",{className:"mt-1 text-sm font-medium truncate",children:T.author})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1",children:[s.jsx(ba,{className:"size-3"}),"Timestamp"]}),s.jsx("div",{className:"mt-1 text-sm",children:Y(T.timestamp)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1",children:"Change Type"}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[oe(T.changeType),s.jsx("span",{className:"text-sm capitalize",children:T.changeType})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Priority"}),s.jsx("div",{className:"mt-1 text-sm font-medium",children:T.priority??"N/A"})]})]}),(()=>{const{baseConditions:S,vectorizedConditions:w}=ve(T.conditions);return s.jsxs(s.Fragment,{children:[S.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Me,{className:"size-4 text-green-600"}),"Base Conditions",s.jsx(ie,{variant:"secondary",className:"text-xs",children:S.length})]}),s.jsx("div",{className:"space-y-2",children:S.map((P,I)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 bg-green-50 border border-green-200 rounded-lg flex-wrap",children:[s.jsx(Me,{className:"size-4 text-green-600 shrink-0"}),s.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono border",children:P.field}),s.jsx("span",{className:"text-gray-500 font-medium",children:P.operator}),s.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono border",children:Array.isArray(P.value)?JSON.stringify(P.value):String(P.value)})]},I))})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(_t,{className:"size-4 text-blue-600"}),"Vectorized Conditions",s.jsx(ie,{className:"text-xs bg-blue-100 text-blue-800",children:w.length})]}),s.jsx("div",{className:"space-y-2",children:w.map((P,I)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 bg-blue-50 border border-blue-200 rounded-lg flex-wrap",children:[s.jsx(_t,{className:"size-4 text-blue-600 shrink-0"}),s.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono border",children:P.field}),s.jsx("span",{className:"text-gray-500 font-medium",children:P.operator}),s.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono border",children:typeof P.value=="number"?P.value.toLocaleString():String(P.value)})]},I))})]}),S.length===0&&w.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Ys,{className:"size-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"No conditions defined in this version"})]})]})})(),T.tags&&T.tags.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:T.tags.map(S=>s.jsx(ie,{variant:"secondary",children:S},S))})]}),T.labels&&Object.keys(T.labels).length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Labels"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(T.labels).map(([S,w])=>s.jsxs(ie,{variant:"outline",className:"gap-1",children:[s.jsxs("span",{className:"text-gray-500",children:[S,":"]}),s.jsx("span",{children:w})]},S))})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full text-center",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ys,{className:"size-12 text-gray-300 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-600",children:"Select a version"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Click on a version in the timeline to view its details"})]})]})})})})]})})]})}),s.jsx(nt,{value:"diff",className:"flex-1 overflow-hidden m-0",children:s.jsx(ks,{className:"h-full",children:s.jsxs("div",{className:"space-y-6 pr-4",children:[s.jsx(me,{children:s.jsxs(pe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Compare From"}),s.jsxs(ft,{value:(o==null?void 0:o.toString())||"",onValueChange:S=>l(parseInt(S)),children:[s.jsx(pt,{children:s.jsx(mt,{placeholder:"Select version"})}),s.jsx(xt,{children:y.map(S=>s.jsx(Ne,{value:S.version.toString(),children:s.jsxs("span",{className:"flex items-center gap-2",children:["v",S.version,S.version===B&&s.jsx(ie,{variant:"default",className:"text-xs",children:"Current"}),s.jsxs("span",{className:"text-gray-500 truncate max-w-[200px]",children:["- ",S.changeSummary]})]})},S.version))})]})]}),s.jsx("div",{className:"pt-6",children:s.jsx(Or,{className:"size-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Compare To"}),s.jsxs(ft,{value:(c==null?void 0:c.toString())||"",onValueChange:S=>d(parseInt(S)),children:[s.jsx(pt,{children:s.jsx(mt,{placeholder:"Select version to compare"})}),s.jsx(xt,{children:y.filter(S=>S.version!==o).map(S=>s.jsx(Ne,{value:S.version.toString(),children:s.jsxs("span",{className:"flex items-center gap-2",children:["v",S.version,S.version===B&&s.jsx(ie,{variant:"default",className:"text-xs",children:"Current"}),s.jsxs("span",{className:"text-gray-500 truncate max-w-[200px]",children:["- ",S.changeSummary]})]})},S.version))})]})]})]}),k&&N&&s.jsxs(qe,{className:"mt-4 bg-blue-50 border-blue-200",children:[s.jsx(Ja,{className:"size-4 text-blue-600"}),s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-center gap-6 text-sm flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"size-6 rounded bg-green-100 flex items-center justify-center",children:s.jsx(gs,{className:"size-4 text-green-600"})}),s.jsxs("span",{className:"font-medium text-green-700",children:[fe(k,N).additions," additions"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"size-6 rounded bg-red-100 flex items-center justify-center",children:s.jsx(ja,{className:"size-4 text-red-600"})}),s.jsxs("span",{className:"font-medium text-red-700",children:[fe(k,N).deletions," deletions"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"size-6 rounded bg-blue-100 flex items-center justify-center",children:s.jsx(Ts,{className:"size-4 text-blue-600"})}),s.jsxs("span",{className:"font-medium text-blue-700",children:[fe(k,N).modifications," modifications"]})]})]})})]})]})}),k&&N?s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{className:"text-base",children:"Changes"}),s.jsxs(Re,{children:["Comparing version ",o," with version ",c]})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Ys,{className:"size-4"}),"JSON Comparison"]}),s.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ie,{variant:"outline",children:["v",c]}),s.jsx("span",{className:"text-sm text-gray-500",children:"Older (left)"})]}),s.jsx(Or,{className:"size-4 text-gray-400"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ie,{variant:"outline",children:["v",o]}),s.jsx("span",{className:"text-sm text-gray-500",children:"Newer (right)"})]})]}),s.jsx("div",{className:"border rounded-lg overflow-hidden max-h-[500px] overflow-y-auto",children:R?s.jsx(Yd,{diff:R,indent:4,lineNumbers:!0,highlightInlineDiff:!0,hideUnchangedLines:!0,inlineDiffOptions:{mode:"word",wordSeparator:" "}}):s.jsx("div",{className:"p-4 text-gray-500 text-center",children:"Loading diff..."})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Ts,{className:"size-4"}),"Detailed Changes"]}),k.priority!==N.priority&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ts,{className:"size-4 text-yellow-600"}),s.jsx("span",{className:"font-medium text-yellow-800",children:"Priority Modified"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[s.jsx("code",{className:"bg-red-100 text-red-800 px-2 py-1 rounded line-through",children:N.priority}),s.jsx(Or,{className:"size-4 text-gray-400"}),s.jsx("code",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:k.priority})]})]}),k.enabled!==N.enabled&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ts,{className:"size-4 text-yellow-600"}),s.jsx("span",{className:"font-medium text-yellow-800",children:"Status Modified"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[s.jsxs("code",{className:"bg-red-100 text-red-800 px-2 py-1 rounded line-through",children:["enabled: ",String(N.enabled)]}),s.jsx(Or,{className:"size-4 text-gray-400"}),s.jsxs("code",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:["enabled: ",String(k.enabled)]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Conditions"}),k.conditions.filter(S=>!N.conditions.some(w=>F(w.field)===F(S.field))).map((S,w)=>s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(gs,{className:"size-4 text-green-600 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-medium text-green-600 uppercase",children:"Added"}),s.jsxs("code",{className:"block text-sm font-mono text-green-800 mt-1",children:[S.field," ",S.operator," ",JSON.stringify(S.value)]})]})]},`added-${w}`)),k.conditions.filter(S=>{const w=N.conditions.find(P=>F(P.field)===F(S.field));return w&&(JSON.stringify(S.value)!==JSON.stringify(w.value)||S.operator!==w.operator)}).map((S,w)=>{const P=N.conditions.find(I=>F(I.field)===F(S.field));return s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx(Ts,{className:"size-4 text-yellow-600 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-medium text-yellow-600 uppercase",children:"Modified"}),s.jsxs("div",{className:"mt-1 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("code",{className:"text-sm font-mono text-gray-700",children:[S.field," ",S.operator]})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("code",{className:"bg-red-100 text-red-800 px-2 py-1 rounded line-through",children:JSON.stringify(P.value)}),s.jsx(Or,{className:"size-4 text-gray-400"}),s.jsx("code",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:JSON.stringify(S.value)})]})]})]})]},`modified-${w}`)}),N.conditions.filter(S=>!k.conditions.some(w=>F(w.field)===F(S.field))).map((S,w)=>s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(ja,{className:"size-4 text-red-600 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-medium text-red-600 uppercase",children:"Removed"}),s.jsxs("code",{className:"block text-sm font-mono text-red-800 mt-1 line-through",children:[S.field," ",S.operator," ",JSON.stringify(S.value)]})]})]},`removed-${w}`)),k.conditions.filter(S=>!N.conditions.some(w=>F(w.field)===F(S.field))).length===0&&N.conditions.filter(S=>!k.conditions.some(w=>F(w.field)===F(S.field))).length===0&&k.conditions.filter(S=>{const w=N.conditions.find(P=>F(P.field)===F(S.field));return w&&(JSON.stringify(S.value)!==JSON.stringify(w.value)||S.operator!==w.operator)}).length===0&&s.jsx("div",{className:"text-sm text-gray-500 italic p-3 bg-gray-50 rounded-lg",children:"No condition changes between versions"})]}),(k.tags.some(S=>!N.tags.includes(S))||N.tags.some(S=>!k.tags.includes(S)))&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.tags.filter(S=>!N.tags.includes(S)).map(S=>s.jsxs(ie,{className:"bg-green-100 text-green-800 border-green-200 gap-1",children:[s.jsx(gs,{className:"size-3"}),S]},S)),N.tags.filter(S=>!k.tags.includes(S)).map(S=>s.jsxs(ie,{className:"bg-red-100 text-red-800 border-red-200 gap-1",children:[s.jsx(ja,{className:"size-3"}),S]},S))]})]})]})]})})]}):s.jsx(me,{children:s.jsx(pe,{className:"py-16",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[s.jsx(Ro,{className:"size-16 text-gray-300"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-600",children:"Select two versions to compare"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose versions from the dropdowns above to see the differences"})]})]})})})]})})}),s.jsx(nt,{value:"details",className:"flex-1 overflow-hidden m-0",children:s.jsxs(me,{className:"h-full flex flex-col",children:[s.jsx(Ce,{className:"shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx($e,{className:"text-base",children:"Raw Version Data"}),s.jsxs(Re,{children:["JSON representation of version ",a]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ft,{value:(a==null?void 0:a.toString())||"",onValueChange:S=>i(parseInt(S)),children:[s.jsx(pt,{className:"w-48",children:s.jsx(mt,{placeholder:"Select version"})}),s.jsx(xt,{children:y.map(S=>s.jsx(Ne,{value:S.version.toString(),children:s.jsxs("span",{className:"flex items-center gap-2",children:["v",S.version,S.version===B&&s.jsx(ie,{variant:"default",className:"text-xs",children:"Current"})]})},S.version))})]}),s.jsxs(W,{variant:"outline",size:"sm",onClick:()=>T&&ye(T),disabled:!T,children:[s.jsx(Ka,{className:"size-4 mr-2"}),"Export"]})]})]})}),s.jsx(pe,{className:"flex-1 overflow-hidden p-0",children:s.jsx(ks,{className:"h-full",children:s.jsx("div",{className:"px-6 pb-6",children:T?s.jsx("pre",{className:"text-sm font-mono bg-gray-900 text-gray-100 p-6 rounded-lg overflow-x-auto",children:JSON.stringify(T.rawData||{rule_code:r.rule_code,version:T.version,description:T.description,conditions:T.conditions,priority:T.priority,enabled:T.enabled,author:T.author,timestamp:T.timestamp,change_type:T.changeType.toUpperCase(),change_summary:T.changeSummary,tags:T.tags,labels:T.labels},null,2)}):s.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Select a version to view its raw data"})})})})]})})]})}),s.jsx(Ln,{className:"border-t px-6 py-4 shrink-0",children:s.jsx(W,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})}),s.jsx($n,{open:x,onOpenChange:f,children:s.jsxs(Ur,{className:"max-w-md",children:[s.jsxs(Br,{children:[s.jsxs(qr,{className:"flex items-center gap-2 text-orange-600",children:[s.jsx(Ue,{className:"size-5"}),"Confirm Rollback"]}),s.jsxs(Hr,{children:["Are you sure you want to restore version ",a,"?"]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs(qe,{className:"bg-blue-50 border-blue-200",children:[s.jsx(Ja,{className:"size-4 text-blue-600"}),s.jsx(Qe,{className:"text-blue-800",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"font-medium",children:"This will:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Create a new version (v",B+1,")"]}),s.jsxs("li",{children:["Restore all settings from version ",a]}),s.jsx("li",{children:"Mark the change as a rollback in history"}),s.jsx("li",{children:"Preserve the current version in history"})]})]})})]}),s.jsxs(qe,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(Ue,{className:"size-4 text-yellow-600"}),s.jsx(Qe,{className:"text-yellow-800",children:s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"Warning:"})," This action will immediately affect the rule in production."]})})]})]}),s.jsxs(Ln,{className:"gap-2 sm:gap-0",children:[s.jsx(W,{variant:"outline",onClick:()=>f(!1),disabled:j,children:"Cancel"}),s.jsx(W,{onClick:()=>a&&L(a),disabled:j,className:"bg-orange-600 hover:bg-orange-700",children:j?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"size-4 mr-2 animate-spin"}),"Rolling back..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Na,{className:"size-4 mr-2"}),"Confirm Rollback"]})})]})]})})]})}function c1({onNewRule:e,onEditRule:t}){const{data:r,isLoading:n,error:a,refetch:i}=Jc(),[o,l]=h.useState(""),[c,d]=h.useState("all"),[u,p]=h.useState(["active","inactive","draft"]),[x,f]=h.useState([]),[y,g]=h.useState(""),[m,v]=h.useState("all"),[j,E]=h.useState(new Set),[A,T]=h.useState("list"),[k,N]=h.useState("match-rate"),[R,B]=h.useState(!1),[L,F]=h.useState(!1),[q,fe]=h.useState(!1),[oe,je]=h.useState(!1),[Y,ye]=h.useState(null),[ve,S]=h.useState(!1),[w,P]=h.useState(!1),[I,D]=h.useState(null),[z,H]=h.useState(1),[$,M]=h.useState(25),G=h.useMemo(()=>r?r.map(Tx):[],[r]),te=h.useMemo(()=>r?Ex(r):[],[r]),se=h.useMemo(()=>{const C=new Map;return G.forEach(J=>{const ne=J.family||"general";C.has(ne)||C.set(ne,{name:ne,ruleCount:0,dedupRate:0,avgPriority:0});const K=C.get(ne);K.ruleCount++,K.avgPriority=(K.avgPriority||0)+J.priority}),C.forEach(J=>{J.avgPriority=Math.round((J.avgPriority||0)/J.ruleCount)}),Array.from(C.values()).sort((J,ne)=>J.name.localeCompare(ne.name))},[G]),U=h.useMemo(()=>G.filter(C=>{const J=!o||C.rule_code.toLowerCase().includes(o.toLowerCase())||C.description.toLowerCase().includes(o.toLowerCase()),ne=c==="all"||C.family===c,K=u.length===0||u.includes(C.status||"active"),it=x.length===0||x.every(Nt=>C.tags&&C.tags.includes(Nt)),Ze=m==="all"||(C.compilation_status||"PENDING")===m;return J&&ne&&K&&it&&Ze}),[G,o,c,u,x,m]),ae=h.useMemo(()=>{const C={};return U.forEach(J=>{const ne=J.family||"general";C[ne]||(C[ne]=[]),C[ne].push(J)}),C},[U]),ge=Math.ceil(U.length/$),De=h.useMemo(()=>{const C=(z-1)*$;return U.slice(C,C+$)},[U,z,$]);h.useEffect(()=>{H(1)},[o,c,u,x,m]);const O=C=>{f(J=>J.includes(C)?J.filter(ne=>ne!==C):[...J,C])},X=()=>{const C=y.trim().toLowerCase();C&&!x.includes(C)&&(f([...x,C]),g(""),ee.success(`Added custom tag filter: ${C}`))},Te=()=>{l(""),d("all"),p(["active","inactive","draft"]),f([]),v("all")},_e=C=>{const J=new Set(j);J.has(C)?J.delete(C):J.add(C),E(J)},jt=()=>{E(new Set(U.map(C=>C.rule_code))),ee.success(`Selected ${U.length} rules`)},es=()=>{E(new Set),ee.info("Selection cleared")},gt=C=>{if(j.size===0){ee.error("No rules selected");return}ee.success(`${C} applied to ${j.size} rules`)},an=async()=>{fe(!0);try{const C=await Td();C.success?(ee.success(C.message,{description:`Compiled ${C.compiledRules} rules in ${C.compilationTimeMs}ms`}),i()):ee.error("Compilation failed",{description:C.message||C.error})}catch(C){ee.error("Compilation failed",{description:C instanceof Error?C.message:"Unknown error"})}finally{fe(!1)}},Pt=C=>{ye({type:"single",ruleCode:C}),je(!0)},ha=()=>{if(j.size===0){ee.error("No rules selected");return}ye({type:"batch"}),je(!0)},fa=async()=>{if(Y){S(!0);try{if(Y.type==="single"&&Y.ruleCode)await Qc(Y.ruleCode),ee.success(`Rule "${Y.ruleCode}" deleted successfully`);else if(Y.type==="batch"){const C=Array.from(j),J=await Wc(C);J.totalDeleted>0&&ee.success(`Deleted ${J.totalDeleted} rule${J.totalDeleted!==1?"s":""}`),J.totalFailed>0&&ee.error(`Failed to delete ${J.totalFailed} rule${J.totalFailed!==1?"s":""}`,{description:J.failed.map(ne=>ne.ruleCode).join(", ")}),E(new Set)}i()}catch(C){ee.error("Delete failed",{description:C instanceof Error?C.message:"Unknown error"})}finally{S(!1),je(!1),ye(null)}}},Xe=C=>{const J=r==null?void 0:r.find(ne=>ne.rule_code===C);if(J){if(!J.version||J.version<=1){ee.info("No version history available",{description:"This rule has not been modified since creation."});return}D(J),P(!0)}},Ut=async(C,J)=>{try{const ne=J?"deactivate":"activate",K=!J,it=r==null?void 0:r.find(Nt=>Nt.rule_code===C);if(!it){ee.error("Rule not found");return}if(!(await fetch(`/api/v1/rules/${encodeURIComponent(C)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...it,enabled:K})})).ok)throw new Error("Failed to update rule");ee.success(`Rule ${ne==="activate"?"activated":"deactivated"} successfully`),i()}catch(ne){ee.error(`Failed to ${J?"deactivate":"activate"} rule`),console.error("Error toggling rule activation:",ne)}},on=C=>{switch(C){case"active":return s.jsx(Me,{className:"size-4 text-green-600"});case"inactive":return s.jsx(fn,{className:"size-4 text-gray-400"});case"draft":return s.jsx(mr,{className:"size-4 text-yellow-600"});default:return s.jsx(ys,{className:"size-4 text-red-600"})}},ln=C=>{var J,ne;return(J=C.stats)!=null&&J.p99LatencyMs&&C.stats.p99LatencyMs>1?"poor":(ne=C.stats)!=null&&ne.matchRate&&C.stats.matchRate<.1?"warning":"good"},Bt=(C,J)=>{if(!J)return C;const ne=C.split(new RegExp(`(${J})`,"gi"));return s.jsx(s.Fragment,{children:ne.map((K,it)=>K.toLowerCase()===J.toLowerCase()?s.jsx("mark",{className:"bg-yellow-200 text-yellow-900",children:K},it):K)})};return n?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"size-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),s.jsx("p",{className:"text-gray-600",children:"Loading rules..."})]})}):a?s.jsx("div",{className:"p-8",children:s.jsxs(qe,{className:"bg-red-50 border-red-200",children:[s.jsx(Ue,{className:"size-4 text-red-600"}),s.jsxs(Qe,{children:[s.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error Loading Rules"}),s.jsx("p",{className:"text-red-600 text-sm mb-4",children:pp(a)}),s.jsx(W,{onClick:()=>i(),variant:"outline",size:"sm",children:"Retry"})]})]})}):s.jsxs("div",{className:"grid grid-cols-3 gap-6 h-full",children:[s.jsxs("div",{className:"col-span-1 space-y-4",children:[s.jsxs(me,{children:[s.jsx(Ce,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx($e,{children:"Filters"}),s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{asChild:!0,children:s.jsx(W,{variant:"ghost",size:"sm",onClick:()=>B(!R),children:s.jsx(Ip,{className:"size-4"})})}),s.jsxs(Vs,{children:[R?"Hide":"Show"," advanced filters"]})]})})]})}),s.jsxs(pe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"font-medium",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-gray-400"}),s.jsx(Jt,{placeholder:"Search rules...",value:o,onChange:C=>l(C.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mn,{className:"size-4"}),s.jsx("label",{className:"font-medium",children:"Filter by Tags"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Predefined Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Cn).map(([C,J])=>{const ne=(r||[]).filter(K=>K.tags&&K.tags.includes(C)).length;return ne===0?null:s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{asChild:!0,children:s.jsxs("button",{onClick:()=>O(C),className:`
                                px-2 py-1 rounded-md text-xs font-medium border transition-all
                                ${x.includes(C)?`${kr(C)} ring-2 ring-offset-1 ring-current`:"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}
                              `,children:[C," (",ne,")"]})}),s.jsx(Vs,{children:J.description})]})},C)})})]}),te.some(C=>!Cn[C])&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Custom Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:te.filter(C=>!Cn[C]).map(C=>{const J=(r||[]).filter(ne=>ne.tags&&ne.tags.includes(C)).length;return s.jsxs("button",{onClick:()=>O(C),className:`
                              px-2 py-1 rounded-md text-xs font-medium border transition-all
                              ${x.includes(C)?`${kr(C)} ring-2 ring-offset-1 ring-current`:"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}
                            `,children:[C," (",J,")"]},C)})})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Add Custom Tag Filter"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Jt,{placeholder:"e.g., my-custom-tag",value:y,onChange:C=>g(C.target.value),onKeyDown:C=>C.key==="Enter"&&X(),className:"text-sm"}),s.jsx(W,{size:"sm",onClick:X,disabled:!y.trim(),children:s.jsx(gs,{className:"size-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Filter by any custom tag name"})]}),x.length>0&&s.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Active Tag Filters"}),s.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f([]),className:"h-6 text-xs",children:"Clear"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(C=>s.jsxs(ie,{className:`${kr(C)} gap-1 pr-1`,children:[C,s.jsx("button",{onClick:()=>O(C),className:"hover:bg-black/10 rounded-full p-0.5",children:s.jsx(kn,{className:"size-3"})})]},C))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"font-medium",children:"Rule Family"}),s.jsxs(ft,{value:c,onValueChange:d,children:[s.jsx(pt,{children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsxs(Ne,{value:"all",children:["All Families (",G.length,")"]}),se.map(C=>s.jsxs(Ne,{value:C.name,children:[C.name," (",C.ruleCount,")"]},C.name))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"font-medium",children:"Status"}),s.jsx("div",{className:"space-y-2",children:["active","inactive","draft"].map(C=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Os,{id:C,checked:u.includes(C),onCheckedChange:J=>{p(ne=>J?[...ne,C]:ne.filter(K=>K!==C))}}),s.jsx("label",{htmlFor:C,className:"capitalize cursor-pointer flex-1",children:C}),s.jsx(ie,{variant:"outline",className:"text-xs",children:G.filter(J=>J.status===C).length})]},C))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"size-4"}),"Compilation Status"]}),s.jsxs(ft,{value:m,onValueChange:v,children:[s.jsx(pt,{children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsxs(Ne,{value:"all",children:["All (",G.length,")"]}),s.jsx(Ne,{value:"OK",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Me,{className:"size-3 text-green-600"}),"Compiled (",G.filter(C=>C.compilation_status==="OK").length,")"]})}),s.jsx(Ne,{value:"PENDING",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(mr,{className:"size-3 text-yellow-600"}),"Pending (",G.filter(C=>!C.compilation_status||C.compilation_status==="PENDING").length,")"]})}),s.jsx(Ne,{value:"ERROR",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ys,{className:"size-3 text-red-600"}),"Error (",G.filter(C=>C.compilation_status==="ERROR").length,")"]})}),s.jsx(Ne,{value:"WARNING",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ue,{className:"size-3 text-orange-600"}),"Warning (",G.filter(C=>C.compilation_status==="WARNING").length,")"]})})]})]})]}),(o||c!=="all"||u.length<3||x.length>0||m!=="all")&&s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),s.jsx(W,{variant:"ghost",size:"sm",onClick:Te,children:"Clear All"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&s.jsxs(ie,{variant:"secondary",className:"gap-1",children:['Search: "',o,'"',s.jsx("button",{onClick:()=>l(""),children:""})]}),c!=="all"&&s.jsxs(ie,{variant:"secondary",className:"gap-1",children:[c,s.jsx("button",{onClick:()=>d("all"),children:""})]}),x.length>0&&s.jsxs(ie,{variant:"secondary",className:"gap-1",children:[s.jsx(mn,{className:"size-3"}),x.length," tag",x.length!==1?"s":""]}),m!=="all"&&s.jsxs(ie,{variant:"secondary",className:"gap-1",children:[s.jsx(_t,{className:"size-3"}),m,s.jsx("button",{onClick:()=>v("all"),children:""})]})]})]})]})]}),s.jsxs(me,{children:[s.jsx(Ce,{children:s.jsx($e,{children:"Actions"})}),s.jsxs(pe,{className:"space-y-2",children:[s.jsxs(W,{className:"w-full justify-start",onClick:()=>e==null?void 0:e(),children:[s.jsx(gs,{className:"size-4 mr-2"}),"New Rule"]}),s.jsxs(W,{className:"w-full justify-start",variant:"outline",onClick:()=>F(!0),children:[s.jsx(Xa,{className:"size-4 mr-2"}),"Import Rules"]}),s.jsxs(W,{className:"w-full justify-start",variant:"outline",onClick:()=>gt("Export"),children:[s.jsx(Ka,{className:"size-4 mr-2"}),"Export Selected"]}),s.jsxs(W,{className:"w-full justify-start",variant:"outline",onClick:an,disabled:q,children:[q?s.jsx(bs,{className:"size-4 mr-2 animate-spin"}):s.jsx(_t,{className:"size-4 mr-2"}),q?"Compiling...":"Compile All Rules"]})]})]}),s.jsx(me,{children:s.jsx(pe,{className:"pt-6",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"text-3xl font-bold",children:U.length}),s.jsxs("div",{className:"text-sm text-gray-600",children:[U.length===1?"rule":"rules"," found"]}),j.size>0&&s.jsxs(ie,{variant:"secondary",className:"mt-2",children:[j.size," selected"]})]})})})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs(me,{className:"h-full flex flex-col",children:[s.jsxs(Ce,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs($e,{children:["Rules (",U.length,")"]}),s.jsx(Re,{children:"Manage and monitor your rule configurations"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex gap-1 border rounded-lg p-1",children:[s.jsx(W,{size:"sm",variant:A==="tree"?"default":"ghost",onClick:()=>T("tree"),children:"Tree"}),s.jsx(W,{size:"sm",variant:A==="list"?"default":"ghost",onClick:()=>T("list"),children:"List"})]}),s.jsxs(ft,{value:k,onValueChange:C=>N(C),children:[s.jsx(pt,{className:"w-40",children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"match-rate",children:"Sort by Match Rate"}),s.jsx(Ne,{value:"priority",children:"Sort by Priority"}),s.jsx(Ne,{value:"modified",children:"Sort by Last Modified"}),s.jsx(Ne,{value:"latency",children:"Sort by Latency"}),s.jsx(Ne,{value:"name",children:"Sort by Name"})]})]})]})]}),j.size>0&&s.jsx(qe,{className:"mt-4 bg-blue-50 border-blue-200",children:s.jsx(Qe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-medium",children:[j.size," rule",j.size!==1?"s":""," ","selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>gt("Enable"),children:[s.jsx(Sn,{className:"size-4 mr-1"}),"Enable"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>gt("Disable"),children:[s.jsx(fn,{className:"size-4 mr-1"}),"Disable"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>gt("Test"),children:[s.jsx(wa,{className:"size-4 mr-1"}),"Test"]}),s.jsxs(W,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:ha,children:[s.jsx(pn,{className:"size-4 mr-1"}),"Delete"]}),s.jsx(W,{size:"sm",variant:"outline",onClick:es,children:"Clear"})]})]})})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[s.jsx(Os,{checked:j.size===U.length&&U.length>0,onCheckedChange:C=>C?jt():es()}),s.jsxs("label",{className:"cursor-pointer",onClick:()=>j.size===U.length?es():jt(),children:["Select all ",U.length," rules"]})]})]}),s.jsxs(pe,{className:"flex-1 overflow-hidden flex flex-col",children:[U.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[s.jsx("div",{className:"size-16 rounded-full bg-gray-100 flex items-center justify-center",children:s.jsx(Ya,{className:"size-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-1",children:"No rules found"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Try adjusting your filters or create a new rule"})]}),s.jsxs(W,{onClick:()=>e==null?void 0:e(),children:[s.jsx(gs,{className:"size-4 mr-2"}),"Create New Rule"]})]}):A==="tree"?s.jsx(ks,{className:"flex-1 pr-4",children:s.jsx("div",{className:"space-y-6",children:Object.entries(ae).map(([C,J])=>{const ne=se.find(K=>K.name===C);return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 sticky top-0 bg-white pb-2 border-b",children:[s.jsx(To,{className:"size-4"}),s.jsx("h3",{className:"font-semibold",children:C}),s.jsxs(ie,{variant:"outline",children:[J.length," rules"]}),ne&&ne.dedupRate&&s.jsxs(ie,{variant:"secondary",className:"gap-1",children:[s.jsx(_t,{className:"size-3"}),(ne.dedupRate*100).toFixed(0),"% dedup"]})]}),s.jsx(ko,{type:"single",collapsible:!0,className:"space-y-3",children:J.map(K=>{var Ze,Nt,Cs,Pe,ot,qt,He;const it=ln(K);return s.jsxs(Po,{value:K.rule_code,className:`border rounded-lg px-4 shadow-sm ${j.has(K.rule_code)?"bg-blue-50 border-blue-300":"bg-white"}`,children:[s.jsx(Io,{className:"hover:no-underline",children:s.jsxs("div",{className:"flex items-start gap-4 w-full text-left",children:[s.jsx(Os,{checked:j.has(K.rule_code),onClick:we=>we.stopPropagation(),onCheckedChange:()=>_e(K.rule_code),className:"mt-1"}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:on(K.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1 flex-wrap",children:[s.jsx("h3",{className:"font-semibold",children:Bt(K.rule_code,o)}),s.jsx(ie,{variant:"outline",children:K.family}),s.jsxs(ie,{variant:"secondary",children:["Priority: ",K.priority]}),K.version&&K.version>1&&s.jsxs(ie,{variant:"outline",className:"gap-1",children:[s.jsx(Dr,{className:"size-3"}),"v",K.version]}),it==="poor"&&s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{children:s.jsxs(ie,{variant:"destructive",className:"gap-1",children:[s.jsx(Ue,{className:"size-3"}),"Slow"]})}),s.jsx(Vs,{children:"P99 latency > 1ms - needs optimization"})]})}),K.tags&&K.tags.map(we=>s.jsxs(ie,{className:`${kr(we)} text-xs gap-1`,children:[s.jsx(mn,{className:"size-3"}),we]},we))]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Bt(K.description,o)}),s.jsxs("div",{className:"flex gap-6 text-sm text-gray-500 flex-wrap",children:[s.jsxs("span",{children:[((Nt=(Ze=K.stats)==null?void 0:Ze.evalsPerDay)==null?void 0:Nt.toLocaleString())||0," ","evals/day"]}),s.jsxs("span",{className:(((Cs=K.stats)==null?void 0:Cs.matchRate)||0)>.5?"text-green-600":"",children:[((((Pe=K.stats)==null?void 0:Pe.matchRate)||0)*100).toFixed(0),"% match rate"]}),s.jsxs("span",{className:(((ot=K.stats)==null?void 0:ot.avgLatencyMs)||0)>1?"text-red-600":"text-green-600",children:[(((qt=K.stats)==null?void 0:qt.avgLatencyMs)||0).toFixed(2),"ms avg latency"]})]})]})]})}),s.jsx($o,{children:s.jsxs("div",{className:"pt-4 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:["Conditions",s.jsx(ie,{variant:"secondary",className:"text-xs",children:((He=K.conditions)==null?void 0:He.length)||0})]}),s.jsx("div",{className:"space-y-2",children:K.conditions&&K.conditions.map((we,It)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm pl-4 border-l-2 border-green-500 hover:bg-green-50 p-2 rounded-r transition-colors",children:[s.jsx(Me,{className:"size-4 text-green-600 shrink-0"}),s.jsx("code",{className:"bg-gray-50 px-2 py-1 rounded font-mono text-xs",children:we.field}),s.jsx("span",{className:"text-gray-500",children:we.operator}),s.jsx("code",{className:"bg-gray-50 px-2 py-1 rounded font-mono text-xs",children:Array.isArray(we.value)?JSON.stringify(we.value):`"${we.value}"`})]},It))})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Metadata"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Version:"}),s.jsxs("div",{className:"mt-1 text-xs",children:["v",K.version||1,"  Last modified:"," ",K.lastModified]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Compilation:"}),s.jsx("div",{className:"mt-1 text-xs",children:K.compilation_status||"N/A"})]}),K.combination_ids&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Combinations:"}),s.jsx("div",{className:"mt-1 text-xs",children:K.combination_ids.length})]})]})]}),(()=>{const we=Do(K);if(we.length===0)return null;const It=we.filter(de=>de.type==="error"),re=we.filter(de=>de.type==="warning");return s.jsxs("div",{className:"space-y-3",children:[It.length>0&&s.jsxs(qe,{className:"bg-red-50 border-red-200",children:[s.jsx(ys,{className:"size-4 text-red-600"}),s.jsxs(Qe,{children:[s.jsxs("div",{className:"font-medium text-red-800 mb-2",children:[It.length," Error",It.length!==1?"s":""]}),s.jsx("ul",{className:"space-y-1 text-sm text-red-700",children:It.map((de,Ae)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 mt-0.5",children:""}),s.jsxs("span",{children:[de.message,de.field&&s.jsx("code",{className:"ml-1 px-1 py-0.5 bg-red-100 rounded text-xs",children:de.field})]})]},Ae))})]})]}),re.length>0&&s.jsxs(qe,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(Ue,{className:"size-4 text-yellow-600"}),s.jsxs(Qe,{children:[s.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[re.length," Warning",re.length!==1?"s":""]}),s.jsx("ul",{className:"space-y-1 text-sm text-yellow-700",children:re.map((de,Ae)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-yellow-500 mt-0.5",children:""}),s.jsxs("span",{children:[de.message,de.field&&s.jsx("code",{className:"ml-1 px-1 py-0.5 bg-yellow-100 rounded text-xs",children:de.field})]})]},Ae))})]})]})]})})(),s.jsxs("div",{className:"flex gap-2 pt-4 border-t flex-wrap",children:[s.jsx(W,{size:"sm",variant:K.status==="active"?"outline":"default",onClick:()=>Ut(K.rule_code,K.status==="active"),children:K.status==="active"?s.jsxs(s.Fragment,{children:[s.jsx(fn,{className:"size-4 mr-2"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(Sn,{className:"size-4 mr-2"}),"Activate"]})}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>{const we=r==null?void 0:r.find(It=>It.rule_code===K.rule_code);we&&t&&t(we)},children:[s.jsx(_o,{className:"size-4 mr-2"}),"Edit Rule"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>ee.success(`Cloned ${K.rule_code}`),children:[s.jsx(Ao,{className:"size-4 mr-2"}),"Clone"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>ee.info(`Testing ${K.rule_code}`),children:[s.jsx(wa,{className:"size-4 mr-2"}),"Test"]}),K.version&&K.version>1&&s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>Xe(K.rule_code),children:[s.jsx(Dr,{className:"size-4 mr-2"}),"History (v",K.version,")"]}),s.jsxs(W,{size:"sm",variant:"outline",className:"ml-auto text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Pt(K.rule_code),children:[s.jsx(pn,{className:"size-4 mr-2"}),"Delete"]})]})]})})]},K.rule_code)})})]},C)})})}):s.jsx(ks,{className:"flex-1 pr-4",children:s.jsx(ko,{type:"single",collapsible:!0,className:"space-y-4",children:De.map(C=>{var ne,K,it,Ze,Nt,Cs;const J=ln(C);return s.jsxs(Po,{value:C.rule_code,className:`border rounded-lg px-4 shadow-sm ${j.has(C.rule_code)?"bg-blue-50 border-blue-300":"bg-white"}`,children:[s.jsx(Io,{className:"hover:no-underline",children:s.jsxs("div",{className:"flex items-start gap-4 w-full text-left",children:[s.jsx(Os,{checked:j.has(C.rule_code),onClick:Pe=>Pe.stopPropagation(),onCheckedChange:()=>_e(C.rule_code),className:"mt-1"}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:on(C.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1 flex-wrap",children:[s.jsx("h3",{className:"font-semibold",children:Bt(C.rule_code,o)}),s.jsx(ie,{variant:"outline",children:C.family}),s.jsxs(ie,{variant:"secondary",children:["Priority: ",C.priority]}),J==="poor"&&s.jsxs(ie,{variant:"destructive",className:"gap-1",children:[s.jsx(Ue,{className:"size-3"}),"Slow"]}),C.tags&&C.tags.map(Pe=>s.jsxs(ie,{className:`${kr(Pe)} text-xs gap-1`,children:[s.jsx(mn,{className:"size-3"}),Pe]},Pe))]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Bt(C.description,o)}),s.jsxs("div",{className:"flex gap-6 text-sm text-gray-500 flex-wrap",children:[s.jsxs("span",{children:[((K=(ne=C.stats)==null?void 0:ne.evalsPerDay)==null?void 0:K.toLocaleString())||0," evals/day"]}),s.jsxs("span",{children:[((((it=C.stats)==null?void 0:it.matchRate)||0)*100).toFixed(0),"% match rate"]}),s.jsxs("span",{className:(((Ze=C.stats)==null?void 0:Ze.avgLatencyMs)||0)>1?"text-red-600":"",children:[(((Nt=C.stats)==null?void 0:Nt.avgLatencyMs)||0).toFixed(2),"ms avg latency"]})]})]})]})}),s.jsx($o,{children:s.jsxs("div",{className:"pt-4 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:["Conditions",s.jsx(ie,{variant:"secondary",className:"text-xs",children:((Cs=C.conditions)==null?void 0:Cs.length)||0})]}),s.jsx("div",{className:"space-y-2",children:C.conditions&&C.conditions.map((Pe,ot)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm pl-4 border-l-2 border-green-500 hover:bg-green-50 p-2 rounded-r transition-colors",children:[s.jsx(Me,{className:"size-4 text-green-600 shrink-0"}),s.jsx("code",{className:"bg-gray-50 px-2 py-1 rounded font-mono text-xs",children:Pe.field}),s.jsx("span",{className:"text-gray-500",children:Pe.operator}),s.jsx("code",{className:"bg-gray-50 px-2 py-1 rounded font-mono text-xs",children:Array.isArray(Pe.value)?JSON.stringify(Pe.value):`"${Pe.value}"`})]},ot))})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Metadata"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Version:"}),s.jsxs("div",{className:"mt-1 text-xs",children:["v",C.version||1,"  Last modified:"," ",C.lastModified]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Compilation:"}),s.jsx("div",{className:"mt-1 text-xs",children:C.compilation_status||"N/A"})]}),C.combination_ids&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Combinations:"}),s.jsx("div",{className:"mt-1 text-xs",children:C.combination_ids.length})]})]})]}),(()=>{const Pe=Do(C);if(Pe.length===0)return null;const ot=Pe.filter(He=>He.type==="error"),qt=Pe.filter(He=>He.type==="warning");return s.jsxs("div",{className:"space-y-3",children:[ot.length>0&&s.jsxs(qe,{className:"bg-red-50 border-red-200",children:[s.jsx(ys,{className:"size-4 text-red-600"}),s.jsxs(Qe,{children:[s.jsxs("div",{className:"font-medium text-red-800 mb-2",children:[ot.length," Error",ot.length!==1?"s":""]}),s.jsx("ul",{className:"space-y-1 text-sm text-red-700",children:ot.map((He,we)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 mt-0.5",children:""}),s.jsxs("span",{children:[He.message,He.field&&s.jsx("code",{className:"ml-1 px-1 py-0.5 bg-red-100 rounded text-xs",children:He.field})]})]},we))})]})]}),qt.length>0&&s.jsxs(qe,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(Ue,{className:"size-4 text-yellow-600"}),s.jsxs(Qe,{children:[s.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[qt.length," Warning",qt.length!==1?"s":""]}),s.jsx("ul",{className:"space-y-1 text-sm text-yellow-700",children:qt.map((He,we)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-yellow-500 mt-0.5",children:""}),s.jsxs("span",{children:[He.message,He.field&&s.jsx("code",{className:"ml-1 px-1 py-0.5 bg-yellow-100 rounded text-xs",children:He.field})]})]},we))})]})]})]})})(),s.jsxs("div",{className:"flex gap-2 pt-4 border-t flex-wrap",children:[s.jsx(W,{size:"sm",variant:C.status==="active"?"outline":"default",onClick:()=>Ut(C.rule_code,C.status==="active"),children:C.status==="active"?s.jsxs(s.Fragment,{children:[s.jsx(fn,{className:"size-4 mr-2"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(Sn,{className:"size-4 mr-2"}),"Activate"]})}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>{const Pe=r==null?void 0:r.find(ot=>ot.rule_code===C.rule_code);Pe&&t&&t(Pe)},children:[s.jsx(_o,{className:"size-4 mr-2"}),"Edit Rule"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>ee.success(`Cloned ${C.rule_code}`),children:[s.jsx(Ao,{className:"size-4 mr-2"}),"Clone"]}),s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>ee.info(`Testing ${C.rule_code}`),children:[s.jsx(wa,{className:"size-4 mr-2"}),"Test"]}),C.version&&C.version>1&&s.jsxs(W,{size:"sm",variant:"outline",onClick:()=>Xe(C.rule_code),children:[s.jsx(Dr,{className:"size-4 mr-2"}),"History (v",C.version,")"]}),s.jsxs(W,{size:"sm",variant:"outline",className:"ml-auto text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Pt(C.rule_code),children:[s.jsx(pn,{className:"size-4 mr-2"}),"Delete"]})]})]})})]},C.rule_code)})})}),U.length>0&&A==="list"&&s.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between pt-4 border-t mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Rows per page:"}),s.jsxs(ft,{value:$.toString(),onValueChange:C=>{M(Number(C)),H(1)},children:[s.jsx(pt,{className:"w-20 h-8",children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"10",children:"10"}),s.jsx(Ne,{value:"25",children:"25"}),s.jsx(Ne,{value:"50",children:"50"}),s.jsx(Ne,{value:"100",children:"100"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[(z-1)*$+1,"-",Math.min(z*$,U.length)," of ",U.length]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(W,{variant:"outline",size:"sm",onClick:()=>H(1),disabled:z===1,className:"h-8 w-8 p-0",children:s.jsx(_p,{className:"size-4"})}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>H(C=>Math.max(1,C-1)),disabled:z===1,className:"h-8 w-8 p-0",children:s.jsx(Ap,{className:"size-4"})}),s.jsxs("div",{className:"flex items-center gap-1 px-2",children:[s.jsx("span",{className:"text-sm",children:"Page"}),s.jsx(Jt,{type:"number",min:1,max:ge,value:z,onChange:C=>{const J=parseInt(C.target.value);J>=1&&J<=ge&&H(J)},className:"w-14 h-8 text-center"}),s.jsxs("span",{className:"text-sm",children:["of ",ge]})]}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>H(C=>Math.min(ge,C+1)),disabled:z===ge,className:"h-8 w-8 p-0",children:s.jsx(To,{className:"size-4"})}),s.jsx(W,{variant:"outline",size:"sm",onClick:()=>H(ge),disabled:z===ge,className:"h-8 w-8 p-0",children:s.jsx(Op,{className:"size-4"})})]})]})]})]})]})}),s.jsx(fg,{open:L,onOpenChange:F}),s.jsx($n,{open:oe,onOpenChange:je,children:s.jsxs(Ur,{children:[s.jsxs(Br,{children:[s.jsx(qr,{className:"text-red-600",children:(Y==null?void 0:Y.type)==="batch"?`Delete ${j.size} Rules`:"Delete Rule"}),s.jsx(Hr,{children:(Y==null?void 0:Y.type)==="batch"?s.jsxs(s.Fragment,{children:["Are you sure you want to delete"," ",s.jsx("span",{className:"font-semibold",children:j.size})," ","selected rule",j.size!==1?"s":"","? This action cannot be undone."]}):s.jsxs(s.Fragment,{children:["Are you sure you want to delete the rule"," ",s.jsx("span",{className:"font-semibold",children:Y==null?void 0:Y.ruleCode}),"? This action cannot be undone."]})})]}),s.jsxs(Ln,{className:"gap-2 sm:gap-0",children:[s.jsx(W,{variant:"outline",onClick:()=>{je(!1),ye(null)},disabled:ve,children:"Cancel"}),s.jsx(W,{variant:"destructive",onClick:fa,disabled:ve,children:ve?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"size-4 mr-2 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"size-4 mr-2"}),"Delete"]})})]})]})}),s.jsx(l1,{open:w,onOpenChange:P,rule:I,onRollbackSuccess:()=>i()})]})}function d1({className:e,...t}){return s.jsx("textarea",{"data-slot":"textarea",className:Se("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var u1=Symbol.for("react.lazy"),Hn=xi[" use ".trim().toString()];function h1(e){return typeof e=="object"&&e!==null&&"then"in e}function Xd(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===u1&&"_payload"in e&&h1(e._payload)}function f1(e){const t=m1(e),r=h.forwardRef((n,a)=>{let{children:i,...o}=n;Xd(i)&&typeof Hn=="function"&&(i=Hn(i._payload));const l=h.Children.toArray(i),c=l.find(x1);if(c){const d=c.props.children,u=l.map(p=>p===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:p);return s.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function m1(e){const t=h.forwardRef((r,n)=>{let{children:a,...i}=r;if(Xd(a)&&typeof Hn=="function"&&(a=Hn(a._payload)),h.isValidElement(a)){const o=y1(a),l=g1(i,a.props);return a.type!==h.Fragment&&(l.ref=n?pi(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var p1=Symbol("radix.slottable");function x1(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===p1}function g1(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function y1(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var v1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],b1=v1.reduce((e,t)=>{const r=f1(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),j1="Separator",wl="horizontal",N1=["horizontal","vertical"],Zd=h.forwardRef((e,t)=>{const{decorative:r,orientation:n=wl,...a}=e,i=w1(n)?n:wl,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(b1.div,{"data-orientation":i,...l,...a,ref:t})});Zd.displayName=j1;function w1(e){return N1.includes(e)}var S1=Zd;function Ir({className:e,orientation:t="horizontal",decorative:r=!0,...n}){return s.jsx(S1,{"data-slot":"separator-root",decorative:r,orientation:t,className:Se("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}function C1({onRuleCreated:e,editingRule:t}){const r=Gn(),n=!!t,[a,i]=h.useState(null),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,p]=h.useState(""),[x,f]=h.useState("100"),[y,g]=h.useState(!0),[m,v]=h.useState(""),[j,E]=h.useState([{id:"1",field:"",operator:"EQUAL_TO",value:"",type:"auto"}]),[A,T]=h.useState(!1),[k,N]=h.useState([]);h.useEffect(()=>{var $,M;if(t){const G=t.rule_code.split("."),te=G.length>1?G[0]:"",se=G.length>1?G.slice(1).join("."):t.rule_code;i(t.rule_code),l(te),d(se),p(t.description||""),f((($=t.priority)==null?void 0:$.toString())||"100"),g(t.enabled??!0),v(((M=t.tags)==null?void 0:M.join(", "))||""),t.conditions&&t.conditions.length>0&&E(t.conditions.map((U,ae)=>{var ge;return{id:(ae+1).toString(),field:U.field||"",operator:U.operator||"EQUAL_TO",value:Array.isArray(U.value)?U.value.join(", "):((ge=U.value)==null?void 0:ge.toString())||"",type:"auto"}}))}else i(null),l(""),d(""),p(""),f("100"),g(!0),v(""),E([{id:"1",field:"",operator:"EQUAL_TO",value:"",type:"auto"}]),N([])},[t]);const R=o&&c?`${o}.${c}`:"",B=[{value:"fraud_detection",label:"Fraud Detection"},{value:"customer_segmentation",label:"Customer Segmentation"},{value:"personalization",label:"Personalization"},{value:"pricing",label:"Pricing & Promotions"},{value:"risk_assessment",label:"Risk Assessment"},{value:"compliance",label:"Compliance"}],L={EQUAL_TO:{label:"EQUAL_TO",type:"base",description:"Exact string match (cached)",acceptsArray:!1,category:"string"},NOT_EQUAL_TO:{label:"NOT_EQUAL_TO",type:"base",description:"Not equal to value (cached)",acceptsArray:!1,category:"string"},IS_ANY_OF:{label:"IS_ANY_OF",type:"base",description:"Value is in list (cached) - enter CSV",acceptsArray:!0,category:"string"},IS_NONE_OF:{label:"IS_NONE_OF",type:"base",description:"Value not in list (cached) - enter CSV",acceptsArray:!0,category:"string"},GREATER_THAN:{label:"GREATER_THAN",type:"vectorized",description:"Greater than (SIMD optimized)",acceptsArray:!1,category:"numeric"},GREATER_THAN_OR_EQUAL:{label:"GREATER_THAN_OR_EQUAL",type:"vectorized",description:"Greater than or equal (SIMD optimized)",acceptsArray:!1,category:"numeric"},LESS_THAN:{label:"LESS_THAN",type:"vectorized",description:"Less than (SIMD optimized)",acceptsArray:!1,category:"numeric"},LESS_THAN_OR_EQUAL:{label:"LESS_THAN_OR_EQUAL",type:"vectorized",description:"Less than or equal (SIMD optimized)",acceptsArray:!1,category:"numeric"},BETWEEN:{label:"BETWEEN",type:"vectorized",description:'Value in range [min, max] (SIMD optimized) - enter as "min, max"',acceptsArray:!0,category:"numeric"},CONTAINS:{label:"CONTAINS",type:"base",description:"String contains substring",acceptsArray:!1,category:"pattern"},STARTS_WITH:{label:"STARTS_WITH",type:"base",description:"String starts with prefix",acceptsArray:!1,category:"pattern"},ENDS_WITH:{label:"ENDS_WITH",type:"base",description:"String ends with suffix",acceptsArray:!1,category:"pattern"},REGEX:{label:"REGEX",type:"base",description:"Matches regular expression pattern",acceptsArray:!1,category:"pattern"},IS_NULL:{label:"IS_NULL",type:"base",description:"Value is null or missing",acceptsArray:!1,category:"null"},IS_NOT_NULL:{label:"IS_NOT_NULL",type:"base",description:"Value is not null",acceptsArray:!1,category:"null"}},F=$=>{var M;return((M=L[$])==null?void 0:M.type)||"base"},q=$=>{var M;return((M=L[$])==null?void 0:M.acceptsArray)||!1},fe=()=>{E([...j,{id:Date.now().toString(),field:"",operator:"EQUAL_TO",value:"",type:"auto"}])},oe=$=>{j.length>1?E(j.filter(M=>M.id!==$)):ee.error("Rule must have at least one condition")},je=($,M,G)=>{E(j.map(te=>{if(te.id===$){const se={...te,[M]:G};return M==="operator"&&(se.type="auto"),se}return te}))},Y=($,M)=>{if(q(M)){const te=$.split(",").map(se=>se.trim()).filter(se=>se.length>0);return M==="BETWEEN"?te.map(se=>{const U=parseFloat(se);return isNaN(U)?se:U}):te}const G=$.trim();return/^-?\d+(\.\d+)?$/.test(G)?parseFloat(G):G},ye=()=>{const $=[];o.trim()||$.push("Rule family is required"),c.trim()?/^[a-zA-Z0-9_-]+$/.test(c)||$.push("Rule name must contain only letters, numbers, underscores, and hyphens"):$.push("Rule name is required"),u.trim()||$.push("Description is required");const M=parseInt(x);return(isNaN(M)||M<0||M>1e3)&&$.push("Priority must be between 0 and 1000"),j.forEach((G,te)=>{if(G.field.trim()||$.push(`Condition ${te+1}: Field name is required`),G.value.trim()||$.push(`Condition ${te+1}: Value is required`),q(G.operator)){const se=Y(G.value,G.operator);(!Array.isArray(se)||se.length===0)&&$.push(`Condition ${te+1}: Enter comma-separated values for ${G.operator}`),G.operator==="BETWEEN"&&(se.length!==2?$.push(`Condition ${te+1}: BETWEEN requires exactly 2 values (min, max)`):typeof se[0]!="number"||typeof se[1]!="number"?$.push(`Condition ${te+1}: BETWEEN values must be numeric`):se[0]>se[1]&&$.push(`Condition ${te+1}: BETWEEN min value (${se[0]}) cannot be greater than max (${se[1]})`))}}),N($),$.length===0},ve=()=>({rule_code:R,description:u,conditions:j.map($=>({field:$.field.toUpperCase(),operator:$.operator,value:Y($.value,$.operator)})),priority:parseInt(x),enabled:y,tags:m.split(",").map($=>$.trim()).filter($=>$.length>0)}),S=async()=>{var $,M,G,te,se,U,ae,ge,De;if(!ye()){ee.error("Please fix validation errors");return}T(!0);try{const O=ve();if(n&&a)await Kc(a,O),ee.success(`Rule "${R}" updated successfully!`);else{const X=await Le.post("/api/v1/rules",O,{headers:{"Content-Type":"application/json"}});ee.success(`Rule "${R}" created successfully!`),console.log("Created rule:",X.data)}r.invalidateQueries({queryKey:["rules"]}),l(""),d(""),p(""),f("100"),v(""),E([{id:Date.now().toString(),field:"",operator:"EQUAL_TO",value:"",type:"auto"}]),N([]),i(null),e&&e()}catch(O){console.error(`Error ${n?"updating":"creating"} rule:`,O),console.error("Error response:",($=O.response)==null?void 0:$.data);const X=((G=(M=O.response)==null?void 0:M.data)==null?void 0:G.error)||((se=(te=O.response)==null?void 0:te.data)==null?void 0:se.message)||O.message||`Failed to ${n?"update":"create"} rule`;ee.error(X),(ae=(U=O.response)==null?void 0:U.data)!=null&&ae.errors?N(O.response.data.errors):(De=(ge=O.response)==null?void 0:ge.data)!=null&&De.message&&N([O.response.data.message])}finally{T(!1)}},w=async()=>{var $,M,G,te,se,U,ae,ge,De;if(!ye()){ee.error("Please fix validation errors before saving as draft");return}T(!0);try{const O=ve();O.enabled=!1,console.log("Sending draft payload:",JSON.stringify(O,null,2));const X=await Le.post("/api/v1/rules",O,{headers:{"Content-Type":"application/json"}});console.log("Draft save response:",X.data),ee.success(`Rule "${R}" saved as draft successfully!`),r.invalidateQueries({queryKey:["rules"]}),l(""),d(""),p(""),f("100"),g(!0),v(""),E([{id:Date.now().toString(),field:"",operator:"EQUAL_TO",value:"",type:"auto"}]),N([]),e&&e()}catch(O){console.error("Draft save error:",O),console.error("Error response:",($=O.response)==null?void 0:$.data);const X=((G=(M=O.response)==null?void 0:M.data)==null?void 0:G.message)||((se=(te=O.response)==null?void 0:te.data)==null?void 0:se.error)||"Failed to save rule as draft";ee.error(X),(ae=(U=O.response)==null?void 0:U.data)!=null&&ae.errors?N(O.response.data.errors):(De=(ge=O.response)==null?void 0:ge.data)!=null&&De.message&&N([O.response.data.message])}finally{T(!1)}},P=async()=>{if(!ye()){ee.error("Please fix validation errors");return}T(!0);try{const $=ve(),M=await Le.post("/api/v1/rules/validate",$,{headers:{"Content-Type":"application/json"}});M.data.valid?ee.success(" Rule is valid and ready to save"):(ee.error("Validation failed"),N(M.data.errors||[]))}catch($){console.error("Validation error:",$),ee.error("Validation request failed")}finally{T(!1)}},I=$=>k.some(M=>M.toLowerCase().includes($.toLowerCase())),D=$=>k.find(G=>G.toLowerCase().includes($.toLowerCase()))||null,z=j.filter($=>$.field&&$.value),H={vectorizedCount:z.filter($=>F($.operator)==="vectorized").length,baseCount:z.filter($=>F($.operator)==="base").length,estimatedLatency:z.length>0?.2+z.length*.05:0};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:n?"Edit Rule":"Visual Rule Builder"}),s.jsx(Re,{children:n?`Editing rule: ${a}`:"Create business rules with automatic optimization detection"})]}),s.jsxs(pe,{className:"space-y-6",children:[k.length>0&&s.jsxs(qe,{className:"bg-red-50 border-red-200",children:[s.jsx(Ue,{className:"size-4 text-red-600"}),s.jsxs(Qe,{children:[s.jsx("p",{className:"font-semibold text-red-800 mb-2",children:"Please fix the following errors:"}),s.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:k.map(($,M)=>s.jsx("li",{children:$},M))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(We,{htmlFor:"family",children:["Rule Family ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(ft,{value:o,onValueChange:$=>{l($),I("family")&&N(M=>M.filter(G=>!G.toLowerCase().includes("family")))},children:[s.jsx(pt,{id:"family",className:I("family")?"border-red-300 focus:border-red-400":"",children:s.jsx(mt,{placeholder:"Select family..."})}),s.jsx(xt,{children:B.map($=>s.jsx(Ne,{value:$.value,children:$.label},$.value))})]}),I("family")?s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx(Ue,{className:"size-3"}),D("family")]}):s.jsx("p",{className:"text-xs text-gray-500",children:"Categorizes the rule"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(We,{htmlFor:"rule-name",children:["Rule Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Jt,{id:"rule-name",value:c,onChange:$=>{d($.target.value),I("rule name")&&N(M=>M.filter(G=>!G.toLowerCase().includes("rule name")))},placeholder:"e.g., high_value",className:I("rule name")?"border-red-300 focus:border-red-400":""}),I("rule name")?s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx(Ue,{className:"size-3"}),D("rule name")]}):s.jsx("p",{className:"text-xs text-gray-500",children:"Specific rule identifier"})]})]}),R&&s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Rule Code:"})," ",s.jsx("code",{className:"bg-white px-2 py-1 rounded font-mono",children:R})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(We,{htmlFor:"description",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(d1,{id:"description",value:u,onChange:$=>{p($.target.value),I("description")&&N(M=>M.filter(G=>!G.toLowerCase().includes("description")))},placeholder:"Describe what this rule does...",rows:2,className:I("description")?"border-red-300 focus:border-red-400":""}),I("description")&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx(Ue,{className:"size-3"}),D("description")]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(We,{htmlFor:"priority",children:["Priority ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Jt,{id:"priority",type:"number",value:x,onChange:$=>{f($.target.value),I("priority")&&N(M=>M.filter(G=>!G.toLowerCase().includes("priority")))},min:"0",max:"1000",className:I("priority")?"border-red-300 focus:border-red-400":""}),I("priority")?s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx(Ue,{className:"size-3"}),D("priority")]}):s.jsx("p",{className:"text-xs text-gray-500",children:"0-1000 (higher = evaluated first)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{htmlFor:"tags",children:"Tags (optional)"}),s.jsx(Jt,{id:"tags",value:m,onChange:$=>v($.target.value),placeholder:"tag1, tag2, tag3"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Comma-separated"})]})]})]}),s.jsx(Ir,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:["Conditions",s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{children:s.jsx(Ja,{className:"size-4 text-gray-400"})}),s.jsx(Vs,{className:"max-w-xs",children:s.jsx("p",{className:"text-sm",children:"All conditions must be true for the rule to match (AND logic). Condition type is auto-detected based on operator."})})]})})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"All conditions must be true (AND logic)"})]}),s.jsx("div",{className:"space-y-3",children:j.map(($,M)=>{const G=F($.operator),te=q($.operator),se=L[$.operator];return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex items-center justify-center size-8 rounded-full bg-blue-100 text-blue-600 font-semibold shrink-0 mt-2",children:M===0?"IF":"AND"}),s.jsx(me,{className:"flex-1",children:s.jsxs(pe,{className:"p-4",children:[s.jsxs("div",{className:"grid grid-cols-[1fr,auto,1fr,auto] gap-3 items-start",children:[s.jsxs("div",{children:[s.jsx(Jt,{value:$.field,onChange:U=>{je($.id,"field",U.target.value);const ae=`Condition ${M+1}: Field`;k.some(ge=>ge.includes(ae))&&N(ge=>ge.filter(De=>!De.includes(ae)))},placeholder:"Field name (e.g., CUSTOMER_TIER)",className:k.some(U=>U.includes(`Condition ${M+1}: Field`))?"border-red-300 focus:border-red-400":""}),k.some(U=>U.includes(`Condition ${M+1}: Field`))?s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1 mt-1",children:[s.jsx(Ue,{className:"size-3"}),"Field name is required"]}):s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Custom attribute name"})]}),s.jsxs("div",{children:[s.jsxs(ft,{value:$.operator,onValueChange:U=>je($.id,"operator",U),children:[s.jsx(pt,{className:"w-48",children:s.jsx(mt,{})}),s.jsxs(xt,{children:[s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase",children:"String/Categorical (Cached)"}),Object.entries(L).filter(([U,ae])=>ae.category==="string").map(([U,ae])=>s.jsx(Ne,{value:U,children:ae.label},U)),s.jsx(Ir,{className:"my-1"}),s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase",children:"Numeric (SIMD Optimized)"}),Object.entries(L).filter(([U,ae])=>ae.category==="numeric").map(([U,ae])=>s.jsx(Ne,{value:U,children:ae.label},U)),s.jsx(Ir,{className:"my-1"}),s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase",children:"String Pattern"}),Object.entries(L).filter(([U,ae])=>ae.category==="pattern").map(([U,ae])=>s.jsx(Ne,{value:U,children:ae.label},U)),s.jsx(Ir,{className:"my-1"}),s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase",children:"Null Checks"}),Object.entries(L).filter(([U,ae])=>ae.category==="null").map(([U,ae])=>s.jsx(Ne,{value:U,children:ae.label},U))]})]}),se&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se.description})]}),s.jsxs("div",{children:[s.jsx(Jt,{value:$.value,onChange:U=>{je($.id,"value",U.target.value);const ae=`Condition ${M+1}:`;k.some(ge=>ge.includes(ae)&&ge.toLowerCase().includes("value"))&&N(ge=>ge.filter(De=>!(De.includes(ae)&&De.toLowerCase().includes("value"))))},placeholder:te?"Enter CSV: value1, value2, value3":"Enter value",className:k.some(U=>U.includes(`Condition ${M+1}:`)&&(U.toLowerCase().includes("value")||U.toLowerCase().includes("comma")))?"border-red-300 focus:border-red-400":""}),k.some(U=>U.includes(`Condition ${M+1}:`)&&(U.toLowerCase().includes("value")||U.toLowerCase().includes("comma")))?s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1 mt-1",children:[s.jsx(Ue,{className:"size-3"}),k.find(U=>U.includes(`Condition ${M+1}:`)&&(U.toLowerCase().includes("value")||U.toLowerCase().includes("comma")))]}):te?s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter comma-separated values"}):null]}),s.jsx(W,{size:"sm",variant:"ghost",onClick:()=>oe($.id),className:"mt-0",disabled:j.length===1,children:s.jsx(kn,{className:"size-4"})})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx(Ns,{children:s.jsxs(qs,{children:[s.jsx(Hs,{asChild:!0,children:s.jsx(ie,{variant:G==="vectorized"?"default":"secondary",className:"cursor-help",children:G==="vectorized"?s.jsxs(s.Fragment,{children:[s.jsx(_t,{className:"size-3 mr-1"}),"Vectorized (SIMD)"]}):"Base (Cached)"})}),s.jsx(Vs,{className:"max-w-xs",children:G==="vectorized"?s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-semibold",children:"Vectorized (SIMD)"}),s.jsx("p",{className:"text-xs",children:"Numeric comparisons using SIMD instructions for parallel processing. Best for numeric fields like amounts, counts, ratios. ~10-100x faster than regular comparisons."})]}):s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-semibold",children:"Base (Cached)"}),s.jsx("p",{className:"text-xs",children:"String/categorical comparisons with dictionary encoding and caching. Best for fields with limited distinct values like status, tier, category. High cache hit rate."})]})})]})}),s.jsx("span",{className:"text-xs text-gray-500",children:"Auto-detected based on operator"})]})]})})]},$.id)})}),s.jsx("div",{className:"flex justify-start",children:s.jsxs(W,{size:"sm",variant:"outline",onClick:fe,children:[s.jsx(gs,{className:"size-4 mr-2"}),"Add Condition"]})})]}),s.jsx(Ir,{}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(_t,{className:"size-5 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-blue-900",children:"Optimization Preview"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[H.vectorizedCount>0?s.jsx(Me,{className:"size-4 text-green-600"}):s.jsx(mr,{className:"size-4 text-yellow-600"}),s.jsx("span",{className:"text-sm font-medium",children:"SIMD Optimization"})]}),s.jsx("p",{className:"text-sm text-gray-700",children:H.vectorizedCount>0?s.jsxs(s.Fragment,{children:[" ",H.vectorizedCount," vectorized condition(s)"]}):s.jsx(s.Fragment,{children:"! No SIMD conditions"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[H.baseCount>0?s.jsx(Me,{className:"size-4 text-green-600"}):s.jsx(mr,{className:"size-4 text-yellow-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Cached Conditions"})]}),s.jsx("p",{className:"text-sm text-gray-700",children:H.baseCount>0?s.jsxs(s.Fragment,{children:[" ",H.baseCount," cached condition(s)"]}):s.jsx(s.Fragment,{children:"! No cached conditions"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Me,{className:"size-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Estimated Latency"})]}),s.jsxs("p",{className:"text-sm text-gray-700",children:["~",H.estimatedLatency.toFixed(2),"ms per evaluation"]})]})]}),H.vectorizedCount>0&&H.baseCount>0&&s.jsx("div",{className:"mt-4 p-3 bg-white rounded border border-blue-200",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{className:"text-blue-900",children:"Hybrid optimization:"}),"  Mix of cached and SIMD conditions for optimal performance"]})})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(W,{className:"flex-1",size:"lg",onClick:S,disabled:A,children:A?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"size-4 mr-2 animate-spin"}),n?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Me,{className:"size-4 mr-2"}),n?"Update Rule":"Save & Activate"]})}),s.jsx(W,{className:"flex-1",variant:"outline",size:"lg",onClick:w,disabled:A,children:A?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"size-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx($p,{className:"size-4 mr-2"}),"Save as Draft"]})}),s.jsxs(W,{variant:"outline",size:"lg",onClick:P,disabled:A,children:[s.jsx(Sn,{className:"size-4 mr-2"}),"Validate"]}),s.jsxs(W,{variant:"ghost",size:"lg",onClick:()=>{e&&e()},disabled:A,children:[s.jsx(kn,{className:"size-4 mr-2"}),"Cancel"]})]})]})]}),s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Generated JSON Preview"}),s.jsx(Re,{children:"API payload that will be sent"})]}),s.jsx(pe,{children:s.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg text-sm font-mono overflow-x-auto",children:JSON.stringify(ve(),null,2)})})]})]})}const E1=async e=>Xt("/evaluate",e),T1=async(e,t="FULL",r=!1)=>Xt(`/evaluate/trace?level=${t}&conditionalTracing=${r}`,e),A1=async(e,t)=>Xt(`/evaluate/explain/${e}`,t),R1=async(e,t="NONE")=>Xt(`/evaluate/batch?level=${t}`,e),An={all:["evaluation"],evaluate:e=>[...An.all,"evaluate",e],trace:(e,t)=>[...An.all,"trace",e,t],explain:(e,t)=>[...An.all,"explain",e,t]},qi={evaluate:E1,evaluateWithTrace:T1,explainRule:A1,evaluateBatch:R1,queryKeys:An},_1=e=>zr({mutationFn:({event:t,level:r="FULL",conditionalTracing:n=!1})=>qi.evaluateWithTrace(t,r,n),...e}),O1=e=>zr({mutationFn:({ruleCode:t,event:r})=>qi.explainRule(t,r),...e}),k1=e=>zr({mutationFn:({events:t,level:r="NONE"})=>qi.evaluateBatch(t,r),...e});function P1({options:e,value:t,onChange:r,placeholder:n="Select an option...",searchPlaceholder:a="Search...",emptyMessage:i="No results found",className:o}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),p=h.useRef(null),x=h.useMemo(()=>{const g=d.toLowerCase().trim();return g?e.filter(m=>{var v;return m.label.toLowerCase().includes(g)||((v=m.description)==null?void 0:v.toLowerCase().includes(g))}):e},[e,d]),f=e.find(g=>g.value===t);h.useEffect(()=>{const g=m=>{p.current&&!p.current.contains(m.target)&&c(!1)};if(l)return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[l]);const y=g=>{r(g),c(!1),u("")};return s.jsxs("div",{ref:p,className:Se("relative",o),children:[s.jsxs(W,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,className:"w-full justify-between font-normal",onClick:()=>c(!l),children:[f?s.jsxs("div",{className:"flex flex-col items-start text-left min-w-0 flex-1",children:[s.jsx("span",{className:"font-mono text-sm truncate w-full",children:f.label}),f.description&&s.jsx("span",{className:"text-xs text-muted-foreground truncate w-full",children:f.description})]}):s.jsx("span",{className:"text-muted-foreground",children:n}),s.jsx(ea,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),l&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg",children:[s.jsx("div",{className:"p-2 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Jt,{type:"text",placeholder:a,value:d,onChange:g=>u(g.target.value),className:"pl-8",autoFocus:!0})]})}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto p-1",children:x.length===0?s.jsxs("div",{className:"py-6 text-center text-sm text-muted-foreground",children:[i,d&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("span",{className:"text-xs",children:['No matches for "',d,'"']})]})]}):x.map(g=>s.jsxs("button",{type:"button",className:Se("w-full flex items-start gap-2 px-2 py-2 text-sm rounded hover:bg-gray-100 transition-colors",t===g.value&&"bg-gray-100"),onClick:()=>y(g.value),children:[s.jsx(Ti,{className:Se("h-4 w-4 shrink-0 mt-0.5",t===g.value?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col items-start text-left min-w-0 flex-1",children:[s.jsx("span",{className:"font-mono text-sm truncate w-full",children:g.label}),g.description&&s.jsx("span",{className:"text-xs text-muted-foreground truncate w-full",children:g.description})]})]},g.value))}),x.length>0&&s.jsxs("div",{className:"border-t p-2 text-xs text-muted-foreground text-center",children:[x.length," ",x.length===1?"rule":"rules",d&&` matching "${d}"`]})]})]})}function I1(){var ve,S;const[e,t]=h.useState("single"),[r,n]=h.useState(JSON.stringify({eventId:"test-001",timestamp:Date.now(),attributes:{amount:1500,transaction_count:12,time_window:45,total_spend:15e3}},null,2)),[a,i]=h.useState(""),[o,l]=h.useState(null),[c,d]=h.useState("all"),[u,p]=h.useState("eventId"),[x,f]=h.useState("FULL"),[y,g]=h.useState("all"),[m,v]=h.useState(""),{data:j}=Jc(),E=h.useMemo(()=>{if(!j)return[];const w=new Set;return j.forEach(P=>{const I=P.rule_code.split(".")[0];I&&w.add(I)}),Array.from(w).sort()},[j]),A=h.useMemo(()=>j?j.map(w=>({value:w.rule_code,label:w.rule_code,description:w.description})):[],[j]),T=h.useMemo(()=>!j||!m?null:j.find(w=>w.rule_code===m),[j,m]),k=_1(),N=O1(),R=k1({onSuccess:w=>{l(w)}});h.useEffect(()=>{if(m&&r)try{const w=JSON.parse(r);N.mutate({ruleCode:m,event:w})}catch(w){console.error("Invalid JSON:",w)}},[m]);const B=()=>{try{const w=JSON.parse(r);k.mutate({event:w,level:x})}catch(w){console.error("Invalid JSON:",w)}},L=()=>{try{const w=JSON.parse(a);if(!Array.isArray(w))throw new Error("Input must be an array of events");R.mutate({events:w,level:x})}catch(w){console.error("Failed to parse events JSON:",w)}},F=()=>{const w=[{eventId:"evt-001",timestamp:Date.now(),attributes:{user_age:25,country:"US",premium:!0,login_count:10}},{eventId:"evt-002",timestamp:Date.now(),attributes:{user_age:30,country:"UK",premium:!1,login_count:5}},{eventId:"evt-003",timestamp:Date.now(),attributes:{user_age:35,country:"US",premium:!0,login_count:15}}];i(JSON.stringify(w,null,2))},q=w=>{var D;const P=(D=w.target.files)==null?void 0:D[0];if(!P)return;const I=new FileReader;I.onload=z=>{var $;const H=($=z.target)==null?void 0:$.result;i(H)},I.readAsText(P)},fe=()=>{if(!o)return[];let w=o.results;return c==="matched"?w=w.filter(I=>I.matchedRules.length>0):c==="unmatched"&&(w=w.filter(I=>I.matchedRules.length===0)),[...w].sort((I,D)=>{switch(u){case"eventId":return I.eventId.localeCompare(D.eventId);case"time":return D.evaluationTimeNanos-I.evaluationTimeNanos;case"matches":return D.matchedRules.length-I.matchedRules.length;default:return 0}})},oe=w=>w<1e3?`${w}ns`:w<1e6?`${(w/1e3).toFixed(2)}s`:w<1e9?`${(w/1e6).toFixed(2)}ms`:`${(w/1e9).toFixed(2)}s`,je=w=>`${(w*100).toFixed(1)}%`,Y=()=>{if(!o)return;const w={timestamp:new Date().toISOString(),statistics:o.stats,results:o.results},P=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),I=URL.createObjectURL(P),D=document.createElement("a");D.href=I,D.download=`batch-evaluation-${Date.now()}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(I)},ye=()=>{if(!o)return;const P=[["Event ID","Matched Rules","Evaluation Time (ns)","Predicates Evaluated","Rules Evaluated"],...o.results.map(H=>[H.eventId,H.matchedRules.length.toString(),H.evaluationTimeNanos.toString(),H.predicatesEvaluated.toString(),H.rulesEvaluated.toString()])].map(H=>H.join(",")).join(`
`),I=new Blob([P],{type:"text/csv"}),D=URL.createObjectURL(I),z=document.createElement("a");z.href=D,z.download=`batch-evaluation-${Date.now()}.csv`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(D)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Rule Evaluation & Testing"}),s.jsx("p",{className:"text-muted-foreground",children:"Test rules with single events or run batch evaluations"})]}),s.jsx(me,{children:s.jsx(pe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(We,{children:"Evaluation Mode:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{onClick:()=>t("single"),variant:e==="single"?"default":"outline",size:"sm",children:"Single Event"}),s.jsx(W,{onClick:()=>t("batch"),variant:e==="batch"?"default":"outline",size:"sm",children:"Batch Testing"})]})]})})}),e==="single"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Event Input"}),s.jsx(Re,{children:"Enter event JSON to evaluate against rules"})]}),s.jsxs(pe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event JSON"}),s.jsx("textarea",{value:r,onChange:w=>n(w.target.value),className:"w-full h-64 p-3 border rounded-md font-mono text-sm bg-muted/50",placeholder:"Enter event JSON...",spellCheck:!1})]}),s.jsxs("div",{children:[s.jsx(We,{htmlFor:"trace-level",className:"block text-sm font-medium mb-2",children:"Trace Level"}),s.jsxs("select",{id:"trace-level",value:x,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border rounded-md text-sm",children:[s.jsx("option",{value:"NONE",children:"NONE - No tracing (fastest)"}),s.jsx("option",{value:"BASIC",children:"BASIC - Rule matches only (~34% overhead)"}),s.jsx("option",{value:"STANDARD",children:"STANDARD - + Predicate outcomes (~51% overhead)"}),s.jsx("option",{value:"FULL",children:"FULL - + Field values (~53% overhead)"})]})]}),s.jsxs("div",{children:[s.jsx(We,{htmlFor:"family-filter",className:"block text-sm font-medium mb-2",children:"Rule Family Filter"}),s.jsxs(ft,{value:y,onValueChange:g,children:[s.jsx(pt,{id:"family-filter",children:s.jsx(mt,{placeholder:"All families"})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"all",children:"All Families"}),E.map(w=>s.jsx(Ne,{value:w,children:w},w))]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Evaluate against specific rule family or all rules"})]}),s.jsx(W,{onClick:B,disabled:k.isPending,className:"w-full",children:k.isPending?"Evaluating...":"Evaluate Event"})]})]}),s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Evaluation Results"}),s.jsx(Re,{children:"Rule matches and execution traces"})]}),s.jsxs(pe,{children:[k.isSuccess&&k.data&&s.jsxs(Wn,{defaultValue:"matches",children:[s.jsxs(Xr,{children:[s.jsx(rt,{value:"matches",children:"Matches"}),s.jsx(rt,{value:"trace",children:"Execution Trace"}),s.jsx(rt,{value:"explain",children:"Explain Rule"})]}),s.jsxs(nt,{value:"matches",className:"space-y-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsx("div",{children:"Matched Rules:"}),s.jsx("div",{className:"font-mono",children:k.data.match_result.matchedRules.length}),s.jsx("div",{children:"Evaluation Time:"}),s.jsx("div",{className:"font-mono",children:oe(k.data.match_result.evaluationTimeNanos)}),s.jsx("div",{children:"Predicates Evaluated:"}),s.jsx("div",{className:"font-mono",children:k.data.match_result.predicatesEvaluated}),s.jsx("div",{children:"Rules Evaluated:"}),s.jsx("div",{className:"font-mono",children:k.data.match_result.rulesEvaluated})]})]}),k.data.match_result.matchedRules.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Matched Rules:"}),k.data.match_result.matchedRules.map(w=>s.jsx("div",{className:"p-3 border rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-mono font-semibold",children:w.ruleCode}),s.jsx("div",{className:"text-sm text-muted-foreground",children:w.description})]}),s.jsxs("div",{className:"text-sm px-2 py-1 bg-blue-100 text-blue-800 rounded",children:["Priority: ",w.priority]})]})},w.ruleId))]}):s.jsx(qe,{children:s.jsx(Qe,{children:"No rules matched this event."})})]}),s.jsx(nt,{value:"trace",className:"space-y-4",children:k.data.trace&&x!=="NONE"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Performance Breakdown"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Dictionary Encoding:"}),s.jsxs("span",{className:"font-mono",children:[oe(k.data.trace.dict_encoding_nanos),"(",je(k.data.trace.timingBreakdown.dictEncodingPercent),")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Base Condition:"}),s.jsxs("span",{className:"font-mono",children:[oe(k.data.trace.base_condition_nanos),"(",je(k.data.trace.timingBreakdown.baseConditionPercent),")"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Predicate Evaluation:"}),s.jsxs("span",{className:"font-mono",children:[oe(k.data.trace.predicate_eval_nanos),"(",je(k.data.trace.timingBreakdown.predicateEvalPercent),")"]})]})]})]}),k.data.trace.predicate_outcomes&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Predicate Outcomes"}),s.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:k.data.trace.predicate_outcomes.map((w,P)=>s.jsxs("div",{className:`p-2 border rounded text-sm ${w.matched?"bg-green-50":"bg-red-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-mono text-xs",children:[w.field_name," ",w.operator]}),s.jsx("span",{className:w.matched?"text-green-700":"text-red-700",children:w.matched?" Matched":" Failed"})]}),x==="FULL"&&w.actual_value!==void 0&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Expected: ",JSON.stringify(w.expected_value)," | Actual: ",JSON.stringify(w.actual_value)]})]},P))})]})]}):s.jsx(qe,{children:s.jsx(Qe,{children:"Set trace level to BASIC, STANDARD, or FULL to see execution traces."})})}),s.jsxs(nt,{value:"explain",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(We,{children:"Select Rule to Explain"}),s.jsx(P1,{options:A,value:m,onChange:v,placeholder:"Search and select a rule...",searchPlaceholder:"Type to search by code or description...",emptyMessage:"No rules found"})]}),N.isSuccess&&N.data&&T&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Rule Being Explained"}),s.jsx("div",{className:"font-mono text-sm font-semibold",children:T.rule_code}),T.description&&s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:T.description})]})})}),s.jsxs("div",{className:`p-4 border rounded-lg ${N.data.matched?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold text-lg",children:N.data.matched?" Rule Matched":" Rule Did Not Match"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N.data.matched?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.data.matched?"PASS":"FAIL"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Evaluation Time"}),s.jsx("div",{className:"font-mono font-semibold",children:oe(N.data.evaluation_time_nanos)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Predicates Evaluated"}),s.jsx("div",{className:"font-mono font-semibold",children:N.data.predicates_evaluated})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Rules Evaluated"}),s.jsx("div",{className:"font-mono font-semibold",children:N.data.rules_evaluated})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-base",children:["Condition Evaluation Results",s.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",N.data.condition_explanations.length," ",N.data.condition_explanations.length===1?"condition":"conditions",")"]})]}),s.jsx("div",{className:"space-y-2",children:N.data.condition_explanations.map((w,P)=>s.jsx("div",{className:`p-3 border rounded-lg ${w.evaluated?w.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200":"bg-gray-50 border-gray-300 opacity-60"}`,children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-mono text-sm font-medium mb-1",children:[w.field_name," ",w.operator," ",JSON.stringify(w.expected_value)]}),w.evaluated&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actual: ",s.jsx("span",{className:"font-mono",children:JSON.stringify(w.actual_value)})]}),s.jsxs("div",{className:`text-sm mt-1 ${w.evaluated?w.passed?"text-green-700":"text-red-700":"text-gray-600 italic"}`,children:[w.evaluated?w.passed?" ":" ":" ",w.reason]})]}),s.jsx("div",{className:`flex-shrink-0 px-2 py-1 rounded text-xs font-semibold ${w.evaluated?w.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"bg-gray-200 text-gray-700"}`,children:w.evaluated?w.passed?"PASS":"FAIL":"SKIPPED"})]})},P))})]})]})]})]}),k.isError&&s.jsx(qe,{variant:"destructive",children:s.jsx(Qe,{children:((ve=k.error)==null?void 0:ve.message)||"Failed to evaluate event"})}),!k.isSuccess&&!k.isError&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'Enter an event and click "Evaluate Event" to see results'})]})]})]}),e==="batch"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Batch Event Input"}),s.jsx(Re,{children:"Enter multiple events as a JSON array or upload a JSON file"})]}),s.jsxs(pe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{onClick:F,variant:"outline",size:"sm",children:"Load Example"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".json",onChange:q,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),s.jsx(W,{variant:"outline",size:"sm",children:"Upload JSON File"})]})]}),s.jsx("textarea",{value:a,onChange:w=>i(w.target.value),placeholder:'[{"eventId": "evt-001", "timestamp": 1234567890, "attributes": {...}}]',className:"w-full h-64 p-3 font-mono text-sm border rounded-md bg-muted/50",spellCheck:!1}),s.jsxs("div",{children:[s.jsx(We,{htmlFor:"batch-trace-level",className:"block text-sm font-medium mb-2",children:"Trace Level"}),s.jsxs("select",{id:"batch-trace-level",value:x,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border rounded-md text-sm",children:[s.jsx("option",{value:"NONE",children:"NONE - No tracing (fastest)"}),s.jsx("option",{value:"BASIC",children:"BASIC - Rule matches only (~34% overhead)"}),s.jsx("option",{value:"STANDARD",children:"STANDARD - + Predicate outcomes (~51% overhead)"}),s.jsx("option",{value:"FULL",children:"FULL - + Field values (~53% overhead)"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Control trace detail level for batch evaluation"})]}),s.jsxs("div",{children:[s.jsx(We,{htmlFor:"batch-family-filter",className:"block text-sm font-medium mb-2",children:"Rule Family Filter"}),s.jsxs(ft,{value:y,onValueChange:g,children:[s.jsx(pt,{id:"batch-family-filter",children:s.jsx(mt,{placeholder:"All families"})}),s.jsxs(xt,{children:[s.jsx(Ne,{value:"all",children:"All Families"}),E.map(w=>s.jsx(Ne,{value:w,children:w},w))]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Evaluate against specific rule family or all rules"})]}),s.jsx(W,{onClick:L,disabled:!a.trim()||R.isPending,className:"w-full",children:R.isPending?"Evaluating...":"Evaluate Batch"}),R.isError&&s.jsx(qe,{variant:"destructive",children:s.jsx(Qe,{children:((S=R.error)==null?void 0:S.message)||"Failed to evaluate batch"})})]})]}),o&&s.jsxs(me,{children:[s.jsx(Ce,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx($e,{children:"Batch Statistics"}),s.jsxs(Re,{children:["Aggregated metrics for ",o.stats.totalEvents," events"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{onClick:Y,variant:"outline",size:"sm",children:"Export JSON"}),s.jsx(W,{onClick:ye,variant:"outline",size:"sm",children:"Export CSV"})]})]})}),s.jsxs(pe,{children:[s.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium mb-3",children:"Evaluation Time Distribution"}),s.jsx("div",{className:"space-y-2",children:o.results.slice().sort((w,P)=>P.evaluationTimeNanos-w.evaluationTimeNanos).slice(0,10).map((w,P)=>{const I=Math.max(...o.results.map(z=>z.evaluationTimeNanos)),D=w.evaluationTimeNanos/I*100;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-24 text-xs font-mono truncate",children:w.eventId}),s.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-4 relative",children:s.jsx("div",{className:`h-4 rounded-full ${P===0?"bg-red-500":P<3?"bg-orange-500":"bg-blue-500"}`,style:{width:`${D}%`}})}),s.jsx("div",{className:"w-24 text-xs text-right font-mono",children:oe(w.evaluationTimeNanos)})]},w.eventId)})}),o.results.length>10&&s.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"Showing top 10 slowest evaluations"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Events"}),s.jsx("div",{className:"text-2xl font-bold",children:o.stats.totalEvents})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Match Rate"}),s.jsx("div",{className:"text-2xl font-bold",children:je(o.stats.matchRate)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Time"}),s.jsx("div",{className:"text-2xl font-bold",children:oe(o.stats.avgEvaluationTimeNanos)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Matches"}),s.jsx("div",{className:"text-2xl font-bold",children:o.stats.totalMatchedRules})]})]})]})]}),o&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Individual Results"}),s.jsx(Re,{children:"Detailed results for each event"})]}),s.jsxs(pe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter:"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(W,{onClick:()=>d("all"),variant:c==="all"?"default":"outline",size:"sm",children:["All (",o.results.length,")"]}),s.jsxs(W,{onClick:()=>d("matched"),variant:c==="matched"?"default":"outline",size:"sm",children:["Matched (",o.results.filter(w=>w.matchedRules.length>0).length,")"]}),s.jsxs(W,{onClick:()=>d("unmatched"),variant:c==="unmatched"?"default":"outline",size:"sm",children:["Unmatched (",o.results.filter(w=>w.matchedRules.length===0).length,")"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Sort by:"}),s.jsxs("select",{value:u,onChange:w=>p(w.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[s.jsx("option",{value:"eventId",children:"Event ID"}),s.jsx("option",{value:"time",children:"Evaluation Time"}),s.jsx("option",{value:"matches",children:"Matched Rules"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[fe().map(w=>s.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-mono font-semibold",children:w.eventId}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Evaluation time: ",oe(w.evaluationTimeNanos)]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${w.matchedRules.length>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.matchedRules.length>0?`${w.matchedRules.length} rule${w.matchedRules.length>1?"s":""} matched`:"No matches"})})]}),w.matchedRules.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Matched Rules:"}),s.jsx("div",{className:"space-y-1",children:w.matchedRules.map(P=>s.jsxs("div",{className:"flex items-center gap-3 text-sm bg-muted/50 p-2 rounded",children:[s.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:["#",P.ruleId]}),s.jsx("span",{className:"font-medium",children:P.ruleCode}),s.jsxs("span",{className:"text-muted-foreground",children:["Priority: ",P.priority]}),s.jsx("span",{className:"flex-1 text-muted-foreground text-xs",children:P.description})]},P.ruleId))})]})]},w.eventId)),fe().length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No results match the current filter"})]})]})]})]})]})}function $1(){const[e,t]=h.useState(null),[r,n]=h.useState(null),[a,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,p]=h.useState(!0),[x,f]=h.useState(null),y=async()=>{try{p(!0),f(null);const[E,A,T,k,N]=await Promise.all([Ye("/compilation/stats"),Ye("/compilation/dictionaries/fields"),Ye("/compilation/dictionaries/values"),Ye("/compilation/predicates/count"),Ye("/compilation/deduplication")]);t(E),n(A),i(T),l(k),d(N)}catch(E){f(E.message||"Failed to fetch compilation stats")}finally{p(!1)}};h.useEffect(()=>{y()},[]);const g=E=>{const A=E/1e6;return A<1e3?`${A.toFixed(2)} ms`:`${(A/1e3).toFixed(2)} s`},m=E=>E.toLocaleString(),v=E=>({PARSING:"bg-blue-500",VALIDATION:"bg-green-500",FACTORIZATION:"bg-purple-500",DICTIONARY_ENCODING:"bg-yellow-500",SELECTIVITY_PROFILING:"bg-pink-500",MODEL_BUILDING:"bg-indigo-500",INDEX_BUILDING:"bg-red-500"})[E]||"bg-gray-500",j=[{name:"PARSING",description:"Load and parse JSON rules"},{name:"VALIDATION",description:"Validate syntax and semantics"},{name:"FACTORIZATION",description:"Apply IS_ANY_OF factorization"},{name:"DICTIONARY_ENCODING",description:"Build field and value dictionaries"},{name:"SELECTIVITY_PROFILING",description:"Calculate predicate weights"},{name:"MODEL_BUILDING",description:"Build core model with deduplication"},{name:"INDEX_BUILDING",description:"Build inverted index"}];return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading compilation stats..."})}):x?s.jsxs(qe,{variant:"destructive",children:[s.jsx("strong",{children:"Error:"})," ",x]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Compilation Pipeline"}),s.jsx("p",{className:"text-muted-foreground",children:"View compilation statistics and pipeline stages"})]}),s.jsx(W,{onClick:y,children:"Refresh Stats"})]}),e&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Compilation Summary"}),s.jsx(Re,{children:"Overall compilation metrics"})]}),s.jsx(pe,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Compilation Time"}),s.jsx("div",{className:"text-2xl font-bold",children:g(e.compilationTimeNanos)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Logical Rules"}),s.jsx("div",{className:"text-2xl font-bold",children:m(e.metadata.logicalRules)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Unique Combinations"}),s.jsx("div",{className:"text-2xl font-bold",children:m(e.metadata.uniqueCombinations)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Predicate Count"}),s.jsx("div",{className:"text-2xl font-bold",children:m(e.totalPredicates)})]})]})})]}),c&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Deduplication Analysis"}),s.jsx(Re,{children:"Rule combination deduplication efficiency"})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Logical Rules"}),s.jsx("div",{className:"text-xl font-semibold",children:m(c.logicalRules)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Physical Combinations"}),s.jsx("div",{className:"text-xl font-semibold",children:m(c.uniqueCombinations)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Deduplication Rate"}),s.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[c.deduplicationRatePercent.toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Memory Savings"}),s.jsx("span",{className:"text-green-600 font-medium",children:c.savings})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:s.jsx("div",{className:"bg-green-500 h-4 rounded-full transition-all duration-500",style:{width:`${c.deduplicationRatePercent}%`}})})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Field Dictionary"}),s.jsx(Re,{children:r.description})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Dictionary Size:"}),s.jsx("span",{className:"text-2xl font-bold",children:r.size})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Each unique field name is encoded to an integer for faster lookups"})]})})]}),a&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Value Dictionary"}),s.jsx(Re,{children:a.description})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Dictionary Size:"}),s.jsx("span",{className:"text-2xl font-bold",children:a.size})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"String values are encoded to integers to reduce memory usage"})]})})]})]}),s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Compilation Pipeline"}),s.jsx(Re,{children:"7-stage compilation process"})]}),s.jsxs(pe,{children:[s.jsx("div",{className:"space-y-3",children:j.map((E,A)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-muted text-sm font-medium",children:A+1}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${v(E.name)}`}),s.jsx("span",{className:"font-medium",children:E.name})]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E.description})]})]},E.name))}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-md",children:s.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[s.jsx("strong",{children:"Note:"})," Real-time compilation progress monitoring will be available in a future update. The current view shows post-compilation statistics."]})})]})]}),e&&c&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Performance Insights"}),s.jsx(Re,{children:"Optimization recommendations"})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-3",children:[c.deduplicationRatePercent>50&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-950 rounded-md",children:[s.jsx("div",{className:"text-green-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-green-900 dark:text-green-100",children:"Excellent Deduplication"}),s.jsxs("div",{className:"text-sm text-green-700 dark:text-green-200",children:[c.deduplicationRatePercent.toFixed(1),"% deduplication rate indicates effective rule factorization. The engine is sharing predicates efficiently."]})]})]}),c.deduplicationRatePercent<20&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 dark:bg-yellow-950 rounded-md",children:[s.jsx("div",{className:"text-yellow-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"Low Deduplication Rate"}),s.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-200",children:"Consider refactoring rules to share common conditions. Rules with similar IS_ANY_OF operators can be factorized for better memory efficiency."})]})]}),e.compilationTimeNanos>1e10&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-950 rounded-md",children:[s.jsx("div",{className:"text-orange-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Slow Compilation"}),s.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-200",children:["Compilation took ",g(e.compilationTimeNanos),". Consider splitting rules into smaller files or simplifying complex conditions."]})]})]}),o&&o.predicateCount>1e4&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950 rounded-md",children:[s.jsx("div",{className:"text-blue-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Large Predicate Count"}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-200",children:[m(o.predicateCount)," unique predicates. Memory usage is optimized through dictionary encoding, but consider caching evaluation results for frequently accessed events."]})]})]})]})})]})]})}function L1(){const[e,t]=h.useState(null),[r,n]=h.useState([]),[a,i]=h.useState([]),[o,l]=h.useState(!0),[c,d]=h.useState(null),[u,p]=h.useState(!0),x=async()=>{try{d(null);const[g,m,v]=await Promise.all([Ye("/monitoring/summary"),Ye("/monitoring/hot-rules?topN=10"),Ye("/monitoring/slow-rules?thresholdMs=100")]);t(g),n(m.rules),i(v.rules)}catch(g){d(g.message||"Failed to fetch monitoring metrics")}finally{l(!1)}};h.useEffect(()=>{if(x(),u){const g=setInterval(x,5e3);return()=>clearInterval(g)}},[u]);const f=g=>g.toLocaleString(),y=g=>{const m=g/1e6;return m<1?`${(g/1e3).toFixed(0)} s`:m<1e3?`${m.toFixed(2)} ms`:`${(m/1e3).toFixed(2)} s`};return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading monitoring metrics..."})}):c?s.jsxs(qe,{variant:"destructive",children:[s.jsx("strong",{children:"Error:"})," ",c]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Performance Monitoring"}),s.jsx("p",{className:"text-muted-foreground",children:"Real-time rule evaluation metrics and system health"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(W,{variant:u?"default":"outline",size:"sm",onClick:()=>p(!u),children:[u?" Pause":" Resume"," Auto-Refresh"]}),s.jsx(W,{onClick:x,size:"sm",children:"Refresh Now"})]})]}),e&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Total Evaluations"})}),s.jsx(pe,{children:s.jsx("div",{className:"text-2xl font-bold",children:f(e.totalEvaluations)})})]}),s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Total Matches"})}),s.jsx(pe,{children:s.jsx("div",{className:"text-2xl font-bold",children:f(e.totalMatches)})})]}),s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Match Rate"})}),s.jsx(pe,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[(e.overallMatchRate*100).toFixed(1),"%"]})})]}),s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Active Rules"})}),s.jsx(pe,{children:s.jsx("div",{className:"text-2xl font-bold",children:f(e.uniqueRulesEvaluated)})})]}),s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Throughput"})}),s.jsxs(pe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f(e.avgEventsPerMinute)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"events/min"})]})]}),s.jsxs(me,{children:[s.jsx(Ce,{className:"pb-3",children:s.jsx(Re,{className:"text-xs",children:"Cache Hit Rate"})}),s.jsx(pe,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[(e.cacheHitRate*100).toFixed(1),"%"]})})]})]}),s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Hot Rules (Top 10)"}),s.jsx(Re,{children:"Most frequently evaluated rules"})]}),s.jsx(pe,{children:r.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No hot rules data available. Start evaluating events to see metrics."}):s.jsx("div",{className:"space-y-3",children:r.map((g,m)=>s.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-md",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground font-bold text-sm",children:m+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:g.ruleCode}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[f(g.evaluationCount)," evaluations "," ",f(g.matchCount)," matches"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-semibold",children:[(g.matchRate*100).toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"match rate"})]})]},g.ruleCode))})})]}),s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Slow Rules"}),s.jsx(Re,{children:"Rules with P99 latency above 100ms threshold"})]}),s.jsx(pe,{children:a.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No slow rules detected. All rules are performing well!"}):s.jsx("div",{className:"space-y-3",children:a.map(g=>s.jsxs("div",{className:"p-4 border border-yellow-500/50 bg-yellow-50 dark:bg-yellow-950 rounded-md",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:g.ruleCode}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[f(g.evaluationCount)," evaluations"]})]}),s.jsx(ie,{variant:"destructive",children:"Slow"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"P99 Latency"}),s.jsx("div",{className:"text-sm font-semibold text-red-600",children:y(g.p99Nanos)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Latency"}),s.jsx("div",{className:"text-sm font-semibold",children:y(g.avgNanos)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Latency"}),s.jsx("div",{className:"text-sm font-semibold",children:y(g.maxNanos)})]})]})]},g.ruleCode))})})]}),e&&s.jsxs(me,{children:[s.jsxs(Ce,{children:[s.jsx($e,{children:"Performance Insights"}),s.jsx(Re,{children:"Recommendations based on current metrics"})]}),s.jsx(pe,{children:s.jsxs("div",{className:"space-y-3",children:[e.cacheHitRate>.8&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-950 rounded-md",children:[s.jsx("div",{className:"text-green-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-green-900 dark:text-green-100",children:"Excellent Cache Performance"}),s.jsxs("div",{className:"text-sm text-green-700 dark:text-green-200",children:["Cache hit rate is ",(e.cacheHitRate*100).toFixed(1),"%. BaseCondition cache is working efficiently."]})]})]}),e.cacheHitRate<.5&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 dark:bg-yellow-950 rounded-md",children:[s.jsx("div",{className:"text-yellow-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"Low Cache Hit Rate"}),s.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-200",children:["Cache hit rate is only ",(e.cacheHitRate*100).toFixed(1),"%. Consider reviewing event patterns or increasing cache size."]})]})]}),a.length>5&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-950 rounded-md",children:[s.jsx("div",{className:"text-orange-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Multiple Slow Rules Detected"}),s.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-200",children:[a.length," rules have P99 latency above threshold. Review rule complexity and consider optimization."]})]})]}),e.avgEventsPerMinute>1e5&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950 rounded-md",children:[s.jsx("div",{className:"text-blue-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:"High Throughput"}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-200",children:["Processing ",f(e.avgEventsPerMinute)," events per minute. System is handling high load efficiently."]})]})]}),e.totalEvaluations===0&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-md",children:[s.jsx("div",{className:"text-gray-600 mt-0.5",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"No Metrics Yet"}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Start evaluating events to see performance metrics. Use the Evaluation or Batch Testing tabs to generate data."})]})]})]})})]})]})}function D1(){const[e,t]=h.useState("overview"),[r,n]=h.useState(null),a=o=>{n(o),t("builder")},i=()=>{n(null),t("rules")};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b",children:s.jsxs("div",{className:"container mx-auto px-4 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Helios Rule Engine"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Management Console"})]})}),s.jsx("main",{className:"container mx-auto px-4 py-6",children:s.jsxs(Wn,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(Xr,{children:[s.jsx(rt,{value:"overview",children:"Overview"}),s.jsx(rt,{value:"rules",children:"Rules"}),s.jsx(rt,{value:"builder",children:"Rule Builder"}),s.jsx(rt,{value:"evaluation",children:"Evaluation"}),s.jsx(rt,{value:"compilation",children:"Compilation"}),s.jsx(rt,{value:"monitoring",children:"Monitoring"})]}),s.jsx(nt,{value:"overview",className:"space-y-4",children:s.jsxs("div",{className:"rounded-lg border p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Welcome to Helios Rule Engine"}),s.jsx("p",{className:"text-muted-foreground",children:"This is the management console for the Helios Rule Engine. Use the tabs above to:"}),s.jsxs("ul",{className:"list-disc list-inside mt-4 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Rules:"})," Browse and manage existing rules"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Rule Builder:"})," Create new rules with a visual interface"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Evaluation:"})," Test single events with traces or run batch evaluations"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Compilation:"})," View compilation pipeline and optimization metrics"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Monitoring:"})," Monitor real-time performance and system health"]})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-md",children:s.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[s.jsx("strong",{children:"Note:"})," UI components will be implemented progressively. This is the initial setup. See helios-mock-ui for complete component examples."]})})]})}),s.jsx(nt,{value:"rules",children:s.jsx(c1,{onNewRule:()=>{n(null),t("builder")},onEditRule:a})}),s.jsx(nt,{value:"builder",children:s.jsx(C1,{onRuleCreated:i,editingRule:r})}),s.jsx(nt,{value:"evaluation",children:s.jsx(I1,{})}),s.jsx(nt,{value:"compilation",children:s.jsx($1,{})}),s.jsx(nt,{value:"monitoring",children:s.jsx(L1,{})})]})})]})}const F1=new nh({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3}}});Ta.createRoot(document.getElementById("root")).render(s.jsx(V.StrictMode,{children:s.jsxs(ah,{client:F1,children:[s.jsx(D1,{}),s.jsx(Hh,{position:"top-right",richColors:!0})]})}));
//# sourceMappingURL=index-CSI51Nmo.js.map
