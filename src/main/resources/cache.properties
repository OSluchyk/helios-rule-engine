# ==============================================================================
# Cache Configuration Properties
# ==============================================================================
# 
# This file provides default cache configuration values.
# 
# Priority order:
# 1. Environment variables (highest priority)
# 2. This properties file
# 3. Code defaults (lowest priority)
#
# Usage:
#   CacheConfig config = CacheConfig.loadDefault();
#   CacheConfig config = CacheConfig.loadDefault()
#       .toBuilder()
#       .maxSize(500_000)
#       .build();
#
# ==============================================================================

# ==============================================================================
# CACHE TYPE SELECTION
# ==============================================================================
# Options: IN_MEMORY, CAFFEINE, ADAPTIVE, REDIS, NO_OP
# 
# IN_MEMORY  - Simple LRU cache for development
# CAFFEINE   - High-performance W-TinyLFU for production (single-node)
# ADAPTIVE   - Self-tuning cache for auto-scaling production
# REDIS      - Distributed cache for multi-instance deployments
# NO_OP      - Disabled cache for testing/benchmarking

cache.type=ADAPTIVE

# ==============================================================================
# COMMON PROPERTIES (All Cache Types)
# ==============================================================================

# Maximum cache size (entries)
# Development: 10,000
# Production: 100,000 - 500,000
# Auto-scaling: 100,000 (initial)
cache.max.size=100000

# Pre-allocated capacity (optional, 0 = auto)
# Recommended: 10% of max size
cache.initial.capacity=10000

# Time-to-live (TTL) configuration
# Use either minutes OR seconds (seconds takes precedence)
cache.ttl.minutes=10
# cache.ttl.seconds=600

# Enable statistics collection
# Recommended: true for production (needed for monitoring)
cache.record.stats=true

# ==============================================================================
# ADAPTIVE CACHE PROPERTIES (ADAPTIVE type only)
# ==============================================================================

# Enable adaptive sizing
# If false, behaves like standard CAFFEINE cache
cache.adaptive.enabled=true

cache.adaptive.initial.max.size=10000

# Minimum cache size (adaptive floor)
cache.adaptive.min.size=1000

# Maximum cache size (adaptive ceiling)
cache.adaptive.max.size=10000000

# Hit rate thresholds for resizing
# Increase size if hit rate < low threshold
cache.adaptive.low.threshold=0.70

# Decrease size if hit rate > high threshold
cache.adaptive.high.threshold=0.95

# Tuning interval (seconds)
# How often to evaluate and potentially resize
cache.adaptive.tuning.interval.seconds=30

# ==============================================================================
# REDIS CACHE PROPERTIES (REDIS type only)
# ==============================================================================

# Redis connection string
# Format: redis://host:port or rediss://host:port (SSL)
cache.redis.address=redis://localhost:6379

# Redis authentication password
# Leave empty for no authentication
# SECURITY: Use environment variable instead: CACHE_REDIS_PASSWORD
cache.redis.password=

# Connection pool configuration
cache.redis.pool.size=64
cache.redis.min.idle=24

# Operation timeout (milliseconds)
cache.redis.timeout.ms=3000

# Compression threshold (bytes)
# Compress BitSets larger than this value
# 0 = never compress, 9999999 = always compress
# Recommended: 512-2048 depending on network speed
cache.redis.compression.threshold=1024

# Enable Redis Cluster mode
# false = single server or Sentinel
# true = Redis Cluster (3+ nodes)
cache.redis.use.cluster=false

# ==============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ==============================================================================
# 
# Create environment-specific property files:
# - cache-dev.properties
# - cache-staging.properties
# - cache-prod.properties
#
# Load with:
#   CacheConfig.loadFromProperties("cache-prod.properties")
#
# Or use environment variables:
#   export CACHE_TYPE=ADAPTIVE
#   export CACHE_MAX_SIZE=500000
#   CacheConfig.fromEnvironment()
#
# ==============================================================================

# ==============================================================================
# PRESET CONFIGURATIONS
# ==============================================================================
#
# Development:
#   cache.type=IN_MEMORY
#   cache.max.size=10000
#   cache.ttl.minutes=5
#   cache.record.stats=false
#
# Production (Single-Node):
#   cache.type=CAFFEINE
#   cache.max.size=100000
#   cache.ttl.minutes=10
#   cache.record.stats=true
#
# Production (Auto-Scaling):
#   cache.type=ADAPTIVE
#   cache.max.size=100000
#   cache.adaptive.enabled=true
#   cache.record.stats=true
#
# Production (Multi-Instance):
#   cache.type=REDIS
#   cache.redis.address=redis://redis-cluster:6379
#   cache.redis.pool.size=32
#   cache.record.stats=true
#
# Testing/Benchmarking:
#   cache.type=NO_OP
#
# ==============================================================================